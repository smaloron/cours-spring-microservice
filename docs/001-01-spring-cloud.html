<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-31T08:30:08.713371"><title>Module 1 : Avantages, D&eacute;fis et notre Alli&eacute; Spring Cloud (Pour aller plus loin) | Spring Micro Services</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs Pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction-la-m-daille-a-toujours-deux-faces","level":0,"title":"Introduction : La médaille a toujours deux faces","anchor":"#introduction-la-m-daille-a-toujours-deux-faces"},{"id":"les-promesses-des-microservices-les-avantages-concrets","level":0,"title":"Les Promesses des Microservices : Les Avantages Concrets","anchor":"#les-promesses-des-microservices-les-avantages-concrets"},{"id":"les-d-fis-relever-rien-n-est-gratuit","level":0,"title":"Les Défis à Relever : Rien n\u0027est gratuit","anchor":"#les-d-fis-relever-rien-n-est-gratuit"},{"id":"notre-bo-te-outils-l-cosyst-me-spring-cloud","level":0,"title":"Notre Boîte à Outils : L\u0027Écosystème Spring Cloud","anchor":"#notre-bo-te-outils-l-cosyst-me-spring-cloud"},{"id":"exercice-2-analyse-avantages-d-fis","level":0,"title":"Exercice 2 : Analyse Avantages/Défis","anchor":"#exercice-2-analyse-avantages-d-fis"},{"id":"auto-valuation","level":0,"title":"Auto-évaluation","anchor":"#auto-valuation"},{"id":"conclusion-de-la-partie","level":0,"title":"Conclusion de la partie","anchor":"#conclusion-de-la-partie"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Module 1 : Avantages, D&eacute;fis et notre Alli&eacute; Spring Cloud (Pour aller plus loin) | Spring Micro Services"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Spring Micro Services Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/001-01-spring-cloud.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Module 1 : Avantages, D&eacute;fis et notre Alli&eacute; Spring Cloud (Pour aller plus loin) | Spring Micro Services"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/001-01-spring-cloud.html#webpage",
    "url": "writerside-documentation/001-01-spring-cloud.html",
    "name": "Module 1 : Avantages, D&eacute;fis et notre Alli&eacute; Spring Cloud (Pour aller plus loin) | Spring Micro Services",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Spring Micro Services Help"
}</script><!-- End Schema.org --></head><body data-id="001-01-spring-cloud" data-main-title="Module 1 : Avantages, Défis et notre Allié Spring Cloud (Pour aller plus loin)" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="001-00-intro.md|Module 1 : Les Fondations - Du Monolithe aux Microservices (L'essentiel)"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Spring Micro Services  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="001-01-spring-cloud" id="001-01-spring-cloud.md">Module 1 : Avantages, Défis et notre Allié Spring Cloud (Pour aller plus loin)</h1><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs P&eacute;dagogiques</h2><p id="-bt8i4t_11">&Agrave; la fin de cette partie, vous serez capable de :</p><ul class="list _bullet" id="-bt8i4t_12"><li class="list__item" id="-bt8i4t_13"><p id="-bt8i4t_17">Lister et expliquer les avantages majeurs de l'architecture microservices.</p></li><li class="list__item" id="-bt8i4t_14"><p id="-bt8i4t_18">Identifier les principaux d&eacute;fis et inconv&eacute;nients de cette approche.</p></li><li class="list__item" id="-bt8i4t_15"><p id="-bt8i4t_19">Comprendre le r&ocirc;le de l'&eacute;cosyst&egrave;me Spring Cloud et comment il nous aidera &agrave; relever ces d&eacute;fis.</p></li><li class="list__item" id="-bt8i4t_16"><p id="-bt8i4t_20">Justifier le choix d'une architecture microservices pour un projet donn&eacute;.</p></li></ul></section><section class="chapter"><h2 id="introduction-la-m-daille-a-toujours-deux-faces" data-toc="introduction-la-m-daille-a-toujours-deux-faces">Introduction : La m&eacute;daille a toujours deux faces</h2><p id="-bt8i4t_21">Dans la partie pr&eacute;c&eacute;dente, nous avons d&eacute;cid&eacute; de d&eacute;construire notre monolithe &quot;MagiCakes&quot; en plusieurs petits services. C'est fantastique ! On imagine d&eacute;j&agrave; des &eacute;quipes autonomes, des d&eacute;ploiements fluides, une application qui r&eacute;siste aux pannes... Mais ce passage n'est pas magique.</p><p id="-bt8i4t_22">Imaginez que vous d&eacute;m&eacute;nagez d'un grand manoir (le monolithe) pour habiter dans un village de charmants petits cottages ( les microservices). Vous gagnez en ind&eacute;pendance (chaque cottage peut &ecirc;tre d&eacute;cor&eacute; diff&eacute;remment), en r&eacute;silience (un incendie dans un cottage n'affecte pas les autres). Mais vous h&eacute;ritez de nouveaux probl&egrave;mes : il faut construire des routes pour que les villageois communiquent, un syst&egrave;me postal pour &eacute;changer des biens, et un plan de la ville pour que personne ne se perde.</p><p id="-bt8i4t_23">Cette partie explore les deux faces de cette m&eacute;daille : les puissants avantages qui nous motivent, et les d&eacute;fis de &quot; gestion du village&quot; que nous devrons relever. Heureusement, nous ne partirons pas de z&eacute;ro ; nous aurons une bo&icirc;te &agrave; outils formidable : <span class="control" id="-bt8i4t_24">Spring Cloud</span>.</p></section><section class="chapter"><h2 id="les-promesses-des-microservices-les-avantages-concrets" data-toc="les-promesses-des-microservices-les-avantages-concrets">Les Promesses des Microservices : Les Avantages Concrets</h2><section class="chapter"><h3 id="1-scalabilit-ind-pendante" data-toc="1-scalabilit-ind-pendante">1. Scalabilit&eacute; Ind&eacute;pendante</h3><p id="-bt8i4t_28">C'est l'un des arguments les plus forts. Dans une architecture microservices, vous pouvez mettre &agrave; l'&eacute;chelle uniquement les parties de votre application qui en ont besoin.</p><ul class="list _bullet" id="-bt8i4t_29"><li class="list__item" id="-bt8i4t_32"><p id="-bt8i4t_33"><span class="control" id="-bt8i4t_34">Sc&eacute;nario :</span> C'est le Black Friday sur notre site &quot;BookHive&quot;. Le nombre de personnes qui recherchent des livres et passent commande explose. Par contre, tr&egrave;s peu de gens mettent &agrave; jour leur profil utilisateur &agrave; ce moment-l&agrave;.</p></li></ul><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="127px" preserveAspectRatio="none" style="width:706px;height:127px;background:#FFFFFF;" version="1.1" viewBox="0 0 706 127" width="706px" zoomAndPan="magnify"><defs/><g><!--cluster Monolithe--><g id="cluster_Monolithe"><path d="M13.5,11 L92.5,11 A3.75,3.75 0 0 1 95,13.5 L102,34.0146 L696.5,34.0146 A2.5,2.5 0 0 1 699,36.5146 L699,117.9 A2.5,2.5 0 0 1 696.5,120.4 L13.5,120.4 A2.5,2.5 0 0 1 11,117.9 L11,13.5 A2.5,2.5 0 0 1 13.5,11 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="11" x2="102" y1="34.0146" y2="34.0146"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="78" x="15" y="27.0752">Monolithe</text></g><!--entity M1--><g id="elem_M1"><rect fill="#EEEEEE" height="37.0146" rx="2.5" ry="2.5" style="stroke:#333333;stroke-width:1.0;" width="109" x="429.5" y="57.19"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="89" x="439.5" y="81.2652">BookHive.jar</text></g><!--entity M2--><g id="elem_M2"><rect fill="#EEEEEE" height="37.0146" rx="2.5" ry="2.5" style="stroke:#333333;stroke-width:1.0;" width="109" x="27.5" y="57.19"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="89" x="37.5" y="81.2652">BookHive.jar</text></g><!--entity M3--><g id="elem_M3"><rect fill="#EEEEEE" height="37.0146" rx="2.5" ry="2.5" style="stroke:#333333;stroke-width:1.0;" width="109" x="573.5" y="57.19"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="89" x="583.5" y="81.2652">BookHive.jar</text></g><g id="elem_GMN6"><path d="M171.5,47 L171.5,71.7 L136.96,75.7 L171.5,79.7 L171.5,104.3979 A0,0 0 0 0 171.5,104.3979 L394.5,104.3979 A0,0 0 0 0 394.5,104.3979 L394.5,57 L384.5,47 L171.5,47 A0,0 0 0 0 171.5,47 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M384.5,47 L384.5,57 L394.5,57 L384.5,47 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="151" x="177.5" y="65.0698">On doit tout dupliquer,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="197" x="182.5" y="80.8691">y compris la gestion de profil</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168" x="182.5" y="96.6685">qui n'est pas surcharg&#233;e.</text></g><!--SRC=[XP0nJiH034NxdE8J2Xgq4gIZN1I9PiK5QAp4Ep6PZ6SzCqW8SI3EmSMmj2jHhillv_zjtzI5DqQE9AahgwHCHXkCfqefHCPN1w-zsipsh54DjyCmd4MQrc3QqdnfZEFOVNTTTfq2epzeqYYUq5zi_ctxlUhw8X-yUoVhGGM7X-l8utNal5hIoZ09IuKUVGvFU4sOLIggjegvvIYdndR_bl29IRTiKX09WKiLTTQVOdgKwC2f2TATDv0zeZIR5hBm-yCxF_SF]--></g></svg></div><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="305px" preserveAspectRatio="none" style="width:835px;height:305px;background:#FFFFFF;" version="1.1" viewBox="0 0 835 305" width="835px" zoomAndPan="magnify"><defs/><g><!--cluster Microservices--><g id="cluster_Microservices"><path d="M13.5,11 L120.5,11 A3.75,3.75 0 0 1 123,13.5 L130,34.0146 L825.5,34.0146 A2.5,2.5 0 0 1 828,36.5146 L828,296.13 A2.5,2.5 0 0 1 825.5,298.63 L13.5,298.63 A2.5,2.5 0 0 1 11,296.13 L11,13.5 A2.5,2.5 0 0 1 13.5,11 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="11" x2="130" y1="34.0146" y2="34.0146"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="106" x="15" y="27.0752">Microservices</text></g><!--entity S1_1--><g id="elem_S1_1"><rect fill="#EEEEEE" height="37.0146" rx="2.5" ry="2.5" style="stroke:#333333;stroke-width:1.0;" width="146" x="475" y="49.29"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="126" x="485" y="73.3652">Service Catalogue</text></g><!--entity S1_2--><g id="elem_S1_2"><rect fill="#EEEEEE" height="37.0146" rx="2.5" ry="2.5" style="stroke:#333333;stroke-width:1.0;" width="146" x="475" y="148.6"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="126" x="485" y="172.6752">Service Catalogue</text></g><!--entity S1_3--><g id="elem_S1_3"><rect fill="#EEEEEE" height="37.0146" rx="2.5" ry="2.5" style="stroke:#333333;stroke-width:1.0;" width="146" x="475" y="245.62"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="126" x="485" y="269.6952">Service Catalogue</text></g><!--entity S2_1--><g id="elem_S2_1"><rect fill="#EEEEEE" height="37.0146" rx="2.5" ry="2.5" style="stroke:#333333;stroke-width:1.0;" width="156" x="656" y="49.29"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="136" x="666" y="73.3652">Service Commande</text></g><!--entity S2_2--><g id="elem_S2_2"><rect fill="#EEEEEE" height="37.0146" rx="2.5" ry="2.5" style="stroke:#333333;stroke-width:1.0;" width="156" x="656" y="148.6"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="136" x="666" y="172.6752">Service Commande</text></g><!--entity S3_3--><g id="elem_S3_3"><rect fill="#EEEEEE" height="37.0146" rx="2.5" ry="2.5" style="stroke:#333333;stroke-width:1.0;" width="156" x="656" y="245.62"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="136" x="666" y="269.6952">Service Commande</text></g><!--entity S3_1--><g id="elem_S3_1"><rect fill="#EEEEEE" height="37.0146" rx="2.5" ry="2.5" style="stroke:#333333;stroke-width:1.0;" width="148" x="292" y="49.29"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="128" x="302" y="73.3652">Service Utilisateur</text></g><g id="elem_GMN10"><path d="M27.5,47 L27.5,88.5986 A0,0 0 0 0 27.5,88.5986 L256.5,88.5986 A0,0 0 0 0 256.5,88.5986 L256.5,71.8 L291.66,67.8 L256.5,63.8 L256.5,57 L246.5,47 L27.5,47 A0,0 0 0 0 27.5,47 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M246.5,47 L246.5,57 L256.5,57 L246.5,47 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170" x="33.5" y="65.0698">Une seule instance suffit,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="203" x="38.5" y="80.8691">on &#233;conomise les ressources !</text></g><!--link S1_1 to S1_2--><!--link S1_2 to S1_3--><!--link S2_1 to S2_2--><!--link S2_2 to S3_3--><!--SRC=[ZP6_JiCm4CPtFyKrh7Hel34mK7LagZe1GYQ-f5RjkyX_M50VYEVWnR2JL4Mjg6B9bdNVxxjFFY_Y7Xr2RvKX4Gw6UkML0uzDLDHPX2y1UJsnr-ZNRDd3dPHoBAhcq7bEf2TXizc8en1zhgiEeNesZUU0_jCq6AgfLUG-R_ZW6Dc1DYNAC0tQERRQZZPOgwWiTmahK06sg_VLRBAUJKhnByhEAT8JMTz8lm3hUQ2yaRsBnfgW8YP_WiTuueXWiOt0xL251zWHGi2K_OP2xfJz8RMjYVUl14pmyzqmiJEXE4EE2u6Jp_y2Yw7dS9Jnml9bRxH6UjFBn_COo-LAad-izPNrD8HokP3Aiu-_]--></g></svg></div></section><section class="chapter"><h3 id="2-r-silience-et-isolation-des-pannes" data-toc="2-r-silience-et-isolation-des-pannes">2. R&eacute;silience et Isolation des Pannes</h3><p id="-bt8i4t_35">Un bug dans un service ne doit pas entra&icirc;ner l'indisponibilit&eacute; de toute l'application.</p><ul class="list _bullet" id="-bt8i4t_36"><li class="list__item" id="-bt8i4t_38"><p id="-bt8i4t_39"><span class="control" id="-bt8i4t_41">Sc&eacute;nario :</span> Sur &quot;BookHive&quot;, le service qui g&egrave;re les avis des lecteurs rencontre un bug critique et ne r&eacute;pond plus.</p><ul class="list _bullet" id="-bt8i4t_40"><li class="list__item" id="-bt8i4t_42"><p id="-bt8i4t_44"><span class="control" id="-bt8i4t_45">Dans le monolithe :</span> Une exception non g&eacute;r&eacute;e dans le module d'avis peut faire planter le thread du serveur d' applications, rendant tout le site inaccessible. Le client ne peut m&ecirc;me plus acheter de livres.</p></li><li class="list__item" id="-bt8i4t_43"><p id="-bt8i4t_46"><span class="control" id="-bt8i4t_47">En microservices :</span> Le service d'avis est en panne. L'API du service Catalogue qui renvoie les d&eacute;tails d'un livre peut &ecirc;tre con&ccedil;ue pour continuer &agrave; fonctionner, en renvoyant les informations du livre... sans les avis. La fonctionnalit&eacute; principale (la vente) est pr&eacute;serv&eacute;e.</p></li></ul></li></ul><aside class="prompt" data-type="tip" data-title="" id="-bt8i4t_37"><p id="-bt8i4t_48"><span class="control" id="-bt8i4t_49">Conseil :</span> Cette r&eacute;silience n'est pas automatique. Elle se construit avec des patterns comme le **Circuit Breaker ** (disjoncteur), que nous &eacute;tudierons en d&eacute;tail plus tard.</p></aside></section><section class="chapter"><h3 id="3-ind-pendance-technologique-et-quipes-autonomes" data-toc="3-ind-pendance-technologique-et-quipes-autonomes">3. Ind&eacute;pendance Technologique et &Eacute;quipes Autonomes</h3><p id="-bt8i4t_50">Puisque les services sont ind&eacute;pendants, les &eacute;quipes qui les d&eacute;veloppent le sont aussi.</p><ul class="list _bullet" id="-bt8i4t_51"><li class="list__item" id="-bt8i4t_52"><p id="-bt8i4t_54"><span class="control" id="-bt8i4t_55">Polyglottisme technologique :</span> L'&eacute;quipe du service &quot;Recherche&quot; de BookHive veut utiliser Elasticsearch et un service &eacute;crit en Python pour ses capacit&eacute;s d'analyse de texte. L'&eacute;quipe &quot;Commande&quot; pr&eacute;f&egrave;re la robustesse de Java/Spring et d'une base de donn&eacute;es PostgreSQL. C'est possible !</p></li><li class="list__item" id="-bt8i4t_53"><p id="-bt8i4t_56"><span class="control" id="-bt8i4t_57">D&eacute;ploiement agile :</span> L'&eacute;quipe &quot;Catalogue&quot; peut d&eacute;ployer la version 1.2 de son service un mardi &agrave; 15h, tandis que l'&eacute;quipe &quot;Utilisateur&quot; d&eacute;ploie la version 1.1 un mercredi &agrave; 10h. Fini les plannings de d&eacute;ploiement monolithiques complexes et risqu&eacute;s qui bloquent tout le monde.</p></li></ul></section></section><section class="chapter"><h2 id="les-d-fis-relever-rien-n-est-gratuit" data-toc="les-d-fis-relever-rien-n-est-gratuit">Les D&eacute;fis &agrave; Relever : Rien n'est gratuit</h2><p id="-bt8i4t_58">Adopter les microservices, c'est accepter une nouvelle forme de complexit&eacute;.</p><section class="chapter"><h3 id="1-complexit-op-rationnelle" data-toc="1-complexit-op-rationnelle">1. Complexit&eacute; Op&eacute;rationnelle</h3><p id="-bt8i4t_62">G&eacute;rer un seul service est simple. En g&eacute;rer 10, 50 ou 100 est un tout autre m&eacute;tier.</p><ul class="list _bullet" id="-bt8i4t_63"><li class="list__item" id="-bt8i4t_64"><p id="-bt8i4t_67"><span class="control" id="-bt8i4t_68">D&eacute;ploiement :</span> Vous devez automatiser le d&eacute;ploiement de N services.</p></li><li class="list__item" id="-bt8i4t_65"><p id="-bt8i4t_69"><span class="control" id="-bt8i4t_70">Monitoring :</span> Vous devez surveiller N services. Comment savoir si l'application globale est en bonne sant&eacute; ?</p></li><li class="list__item" id="-bt8i4t_66"><p id="-bt8i4t_71"><span class="control" id="-bt8i4t_72">Logging :</span> Un utilisateur signale une erreur. Sa requ&ecirc;te a travers&eacute; 4 services. Comment retrouver le log pertinent dans chacun d'eux et reconstituer l'histoire ?</p></li></ul></section><section class="chapter"><h3 id="2-latence-r-seau" data-toc="2-latence-r-seau">2. Latence R&eacute;seau</h3><p id="-bt8i4t_73">Dans un monolithe, un module en appelle un autre via un appel de m&eacute;thode en m&eacute;moire. C'est quasi-instantan&eacute;. En microservices, les services s'appellent via le r&eacute;seau.</p><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="356px" preserveAspectRatio="none" style="width:410px;height:356px;background:#FFFFFF;" version="1.1" viewBox="0 0 410 356" width="410px" zoomAndPan="magnify"><defs/><g><!--entity Service A--><g id="elem_Service A"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="106" x="12" y="12"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="98" y="17"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="96" y="19"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="96" y="23"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66" x="27" y="46.0752">Service A</text></g><!--entity Service B--><g id="elem_Service B"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="106" x="12" y="136.02"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="98" y="141.02"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="96" y="143.02"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="96" y="147.02"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66" x="27" y="170.0952">Service B</text></g><!--entity Service C--><g id="elem_Service C"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="106" x="12" y="281.02"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="98" y="286.02"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="96" y="288.02"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="96" y="292.02"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66" x="27" y="315.0952">Service C</text></g><g id="elem_GMN7"><path d="M153,260.03 L153,300.53 L118.25,304.53 L153,308.53 L153,349.0266 A0,0 0 0 0 153,349.0266 L403,349.0266 A0,0 0 0 0 403,349.0266 L403,270.03 L393,260.03 L153,260.03 A0,0 0 0 0 153,260.03 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M393,260.03 L393,270.03 L403,270.03 L393,260.03 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="225" x="159" y="278.0998">La latence totale pour l'utilisateur</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="229" x="159" y="293.8991">est la somme des latences r&#233;seau</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="188" x="159" y="309.6985">et des temps de traitement.</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="208" x="159" y="325.4978">C'est bien plus lent qu'un appel</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120" x="159" y="341.2971">de m&#233;thode local.</text></g><!--link Service A to Service B--><g id="link_Service A_Service B"><path d="M65,59.46 C65,81.28 65,107.9 65,129.68 " fill="none" id="Service A-to-Service B" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="65,135.68,69,126.68,65,130.68,61,126.68,65,135.68" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148" x="66" y="103.0898">Appel HTTP (ex: 5ms)</text></g><!--link Service B to Service C--><g id="link_Service B_Service C"><path d="M65,183.5 C65,210.19 65,247.95 65,274.61 " fill="none" id="Service B-to-Service C" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="65,280.61,69,271.61,65,275.61,61,271.61,65,280.61" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="156" x="66" y="227.0998">Appel HTTP (ex: 10ms)</text></g><!--SRC=[RO-z3a5148NxVOgZkXI4GgEGe54e97IYMEvmDzcVQtTMl9Bdy69c9KH4DsVE-IPdEjoG8xHM6w_KRaFnQew4sHxzkZ_5Pp7VJp1hMx9ORhThTEasmTYbdlfA_22BFyXeM1WVc13DkM64qpUWW9M6rKnUD0VMLhg5766hpCQQ95QE4gF4aaCAJjhNbDvGGdpS4-bSClnoc5oRP097RKIGvu6uYwhSE1ZoydsM0xB79LVPGvVM4X76FUxS11biE6exKEHhbFfF]--></g></svg></div><p id="-bt8i4t_75">Chaque appel r&eacute;seau ajoute de la latence et un point de d&eacute;faillance potentiel (le r&eacute;seau n'est jamais fiable &agrave; 100%).</p></section><section class="chapter"><h3 id="3-consistance-des-donn-es-distribu-es" data-toc="3-consistance-des-donn-es-distribu-es">3. Consistance des Donn&eacute;es Distribu&eacute;es</h3><p id="-bt8i4t_76">C'est l'un des d&eacute;fis les plus complexes.</p><ul class="list _bullet" id="-bt8i4t_77"><li class="list__item" id="-bt8i4t_79"><p id="-bt8i4t_80"><span class="control" id="-bt8i4t_82">Sc&eacute;nario :</span> Un client passe une commande sur &quot;BookHive&quot;. Deux choses doivent se passer :</p><ol class="list _decimal" id="-bt8i4t_81" type="1"><li class="list__item" id="-bt8i4t_83"><p id="-bt8i4t_85">Une nouvelle commande est cr&eacute;&eacute;e dans la base de donn&eacute;es du <code class="code" id="-bt8i4t_86">service-commande</code>.</p></li><li class="list__item" id="-bt8i4t_84"><p id="-bt8i4t_87">Le stock du livre doit &ecirc;tre d&eacute;cr&eacute;ment&eacute; dans la base de donn&eacute;es du <code class="code" id="-bt8i4t_88">service-catalogue</code>.</p></li></ol></li></ul><aside class="prompt" data-type="warning" data-title="" id="-bt8i4t_78"><p><b id="-bt8i4t_89">Que se passe-t-il si l'&eacute;tape 2 &eacute;choue ?</b> La commande est cr&eacute;&eacute;e, le client est peut-&ecirc;tre m&ecirc;me d&eacute;bit&eacute;, mais le stock n'est pas mis &agrave; jour. Catastrophe ! Dans un monolithe, on utiliserait une transaction de base de donn&eacute;es (ACID) pour s'assurer que soit les deux op&eacute;rations r&eacute;ussissent, soit les deux &eacute;chouent. On ne peut pas faire &ccedil;a avec deux bases de donn&eacute;es distinctes. Il faut utiliser des strat&eacute;gies de compensation et des patterns avanc&eacute;s comme les **Sagas** pour atteindre une **consistance &agrave; terme** (eventual consistency).</p></aside></section></section><section class="chapter"><h2 id="notre-bo-te-outils-l-cosyst-me-spring-cloud" data-toc="notre-bo-te-outils-l-cosyst-me-spring-cloud">Notre Bo&icirc;te &agrave; Outils : L'&Eacute;cosyst&egrave;me Spring Cloud</h2><p id="-bt8i4t_90">Face &agrave; ces d&eacute;fis, faut-il tout r&eacute;inventer ? Heureusement, non ! La communaut&eacute; Spring a cr&eacute;&eacute; <span class="control" id="-bt8i4t_97">Spring Cloud</span>, un ensemble de projets qui fournissent des solutions &eacute;prouv&eacute;es aux probl&egrave;mes r&eacute;currents des architectures distribu&eacute;es.</p><p id="-bt8i4t_91">Spring Cloud n'est pas un framework, mais une <span class="control" id="-bt8i4t_98">collection de d&eacute;pendances</span> qui s'int&egrave;grent parfaitement avec Spring Boot.</p><p id="-bt8i4t_92">Voici une cartographie des probl&egrave;mes et des solutions Spring Cloud que nous allons explorer :</p><div class="table-wrapper"><table class="wide" id="-bt8i4t_93"><thead><tr class="ijRowHead" id="-bt8i4t_99"><th id="-bt8i4t_106"><p>Probl&egrave;me / D&eacute;fi</p></th><th id="-bt8i4t_107"><p>Solution Spring Cloud que nous utiliserons</p></th><th id="-bt8i4t_108"><p>R&ocirc;le</p></th></tr></thead><tbody><tr id="-bt8i4t_100"><td id="-bt8i4t_109"><p>Comment mes services se trouvent-ils les uns les autres ?</p></td><td id="-bt8i4t_110"><p><span class="control" id="-bt8i4t_112">Spring Cloud Netflix Eureka</span></p></td><td id="-bt8i4t_111"><p>Un annuaire (Service Registry) o&ugrave; chaque service s'enregistre.</p></td></tr><tr id="-bt8i4t_101"><td id="-bt8i4t_113"><p>Comment appeler un autre service sans conna&icirc;tre son IP/port ?</p></td><td id="-bt8i4t_114"><p><span class="control" id="-bt8i4t_116">Spring Cloud OpenFeign</span></p></td><td id="-bt8i4t_115"><p>Un client REST d&eacute;claratif qui utilise le nom du service.</p></td></tr><tr id="-bt8i4t_102"><td id="-bt8i4t_117"><p>Comment g&eacute;rer la configuration de tous mes services ?</p></td><td id="-bt8i4t_118"><p><span class="control" id="-bt8i4t_120">Spring Cloud Config Server</span></p></td><td id="-bt8i4t_119"><p>Un serveur centralis&eacute; pour les fichiers de configuration.</p></td></tr><tr id="-bt8i4t_103"><td id="-bt8i4t_121"><p>Comment prot&eacute;ger mon application des pannes en cascade ?</p></td><td id="-bt8i4t_122"><p><span class="control" id="-bt8i4t_124">Resilience4j</span></p></td><td id="-bt8i4t_123"><p>Un disjoncteur (Circuit Breaker) pour isoler les pannes.</p></td></tr><tr id="-bt8i4t_104"><td id="-bt8i4t_125"><p>Comment exposer un point d'entr&eacute;e unique et s&eacute;curis&eacute; ?</p></td><td id="-bt8i4t_126"><p><span class="control" id="-bt8i4t_128">Spring Cloud Gateway</span></p></td><td id="-bt8i4t_127"><p>Une passerelle API intelligente pour le routage et les filtres.</p></td></tr><tr id="-bt8i4t_105"><td id="-bt8i4t_129"><p>Comment suivre une requ&ecirc;te &agrave; travers plusieurs services ?</p></td><td id="-bt8i4t_130"><p><span class="control" id="-bt8i4t_132">Micrometer Tracing</span></p></td><td id="-bt8i4t_131"><p>Un outil pour le tracing distribu&eacute;.</p></td></tr></tbody></table></div><p id="-bt8i4t_94">Voici une vision de l'architecture cible que nous allons construire pas &agrave; pas :</p><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="699px" preserveAspectRatio="none" style="width:1043px;height:699px;background:#FFFFFF;" version="1.1" viewBox="0 0 1043 699" width="1043px" zoomAndPan="magnify"><defs/><g><!--cluster Notre Ecosyst?me--><g id="cluster_Notre Ecosyst&#232;me"><path d="M13.5,243.03 L155.5,243.03 A3.75,3.75 0 0 1 158,245.53 L165,266.0446 L1014.5,266.0446 A2.5,2.5 0 0 1 1017,268.5446 L1017,689.57 A2.5,2.5 0 0 1 1014.5,692.07 L13.5,692.07 A2.5,2.5 0 0 1 11,689.57 L11,245.53 A2.5,2.5 0 0 1 13.5,243.03 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="11" x2="165" y1="266.0446" y2="266.0446"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="141" x="15" y="259.1052">Notre Ecosyst&#232;me</text></g><!--cluster Services M?tier--><g id="cluster_Services M&#233;tier"><path d="M301.5,389.04 L421.5,389.04 A3.75,3.75 0 0 1 424,391.54 L431,412.0546 L703.5,412.0546 A2.5,2.5 0 0 1 706,414.5546 L706,485.56 A2.5,2.5 0 0 1 703.5,488.06 L301.5,488.06 A2.5,2.5 0 0 1 299,485.56 L299,391.54 A2.5,2.5 0 0 1 301.5,389.04 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="299" x2="431" y1="412.0546" y2="412.0546"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="119" x="303" y="405.1152">Services M&#233;tier</text></g><!--entity gateway--><g id="elem_gateway"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="129" x="187.5" y="279.03"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="296.5" y="284.03"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="294.5" y="286.03"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="294.5" y="290.03"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="89" x="202.5" y="313.1052">API Gateway</text></g><!--entity config--><g id="elem_config"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="136" x="767" y="629.06"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="883" y="634.06"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="881" y="636.06"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="881" y="640.06"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="96" x="782" y="663.1352">Config Server</text></g><!--entity eureka--><g id="elem_eureka"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="139" x="66.5" y="629.06"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="185.5" y="634.06"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="183.5" y="636.06"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="183.5" y="640.06"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="99" x="81.5" y="663.1352">Eureka Server</text></g><!--entity srvA--><g id="elem_srvA"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="106" x="315" y="425.04"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="401" y="430.04"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="399" y="432.04"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="399" y="436.04"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66" x="330" y="459.1152">Service A</text></g><!--entity srvB--><g id="elem_srvB"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="106" x="584" y="425.04"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="670" y="430.04"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="668" y="432.04"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="668" y="436.04"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66" x="599" y="459.1152">Service B</text></g><!--entity client--><g id="elem_client"><ellipse cx="252" cy="19" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1.0;"/><path d="M252,27 L252,54 M239,35 L265,35 M252,54 L239,69 M252,54 L265,69 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="41" x="231.5" y="85.0752">Client</text></g><!--entity internet--><g id="elem_internet"><path d="M218.1902,157.7149 C220.895,152.3012 224.5259,151.1965 228.6254,156.3358 C231.2069,150.0296 237.4751,148.0897 241.8706,154.4369 C244.9958,148.6541 249.3115,147.619 254.1905,152.3895 C257.8689,148.768 261.9616,149.8284 264.0349,154.3337 C268.5309,147.6701 274.5906,148.0869 278.1739,155.266 C283.3622,152.0326 286.9937,153.1374 289.1715,158.933 C296.9409,160.7406 297.4739,167.3525 292.8799,172.5316 C298.8441,179.035 297.6383,184.6922 290.112,188.9168 C287.5693,195.6602 281.4879,197.6853 276.0975,192.1732 C275.0151,197.8579 270.4505,200.6859 265.5774,196.0295 C263.2039,203.5771 258.9421,202.989 253.6748,199.0204 C247.2072,204.4077 242.4869,201.8801 240.5623,194.3933 C235.9027,198.6501 231.9619,197.0811 229.4883,191.8435 C224.9386,197.6315 219.3532,195.3785 217.1401,189.3929 C208.6733,185.8215 207.4325,179.375 214.7892,173.4677 C208.6143,166.7143 209.3784,161.2327 218.1902,157.7149 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="58" x="223" y="178.0852">Internet</text></g><g id="elem_N1"><path d="M307.5,36.1 L307.5,61.8993 L628.5,61.8993 L628.5,46.1 L618.5,36.1 L307.5,36.1 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M618.5,36.1 L618.5,46.1 L628.5,46.1 L618.5,36.1 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="300" x="313.5" y="54.1698">Spring Cloud nous aide &#224; construire tout &#231;a !</text></g><!--link client to internet--><g id="link_client_internet"><path d="M252,88.45 C252,108.2 252,125.6 252,142.52 " fill="none" id="client-to-internet" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="252,148.52,256,139.52,252,143.52,248,139.52,252,148.52" style="stroke:#000000;stroke-width:1.0;"/></g><!--link internet to gateway--><g id="link_internet_gateway"><path d="M252,196.41 C252,219.71 252,249.62 252,272.85 " fill="none" id="internet-to-gateway" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="252,278.85,256,269.85,252,273.85,248,269.85,252,278.85" style="stroke:#000000;stroke-width:1.0;"/></g><!--link gateway to eureka--><g id="link_gateway_eureka"><path d="M241.89,326.46 C222.95,369.83 181.4,467.07 152,551.06 C144.8,571.63 141.55,576.55 138,598.06 C136.35,608.05 135.8342,613.2407 135.6842,622.7907 " fill="none" id="gateway-to-eureka" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="135.59,628.79,139.7309,619.8539,135.6685,623.7906,131.7318,619.7283,135.59,628.79" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="124" x="169.3" y="518.1298">O&#249; est Service A ?</text></g><!--link gateway to eureka--><g id="link_gateway_eureka"><path d="M219.14,326.34 C174.96,359.41 98.93,425.39 73,504.06 C58.05,549.41 87.5748,595.5774 111.2248,624.1574 " fill="none" id="gateway-to-eureka-1" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="115.05,628.78,112.3939,619.296,111.8624,624.9279,106.2305,624.3963,115.05,628.78" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="80" x="74" y="518.1298">S'enregistre</text></g><!--link gateway to srvA--><g id="link_gateway_srvA"><path d="M270.38,326.35 C292.1,353.32 324.2556,393.2479 345.9456,420.1679 " fill="none" id="gateway-to-srvA" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="349.71,424.84,347.1781,415.3222,346.573,420.9465,340.9486,420.3414,349.71,424.84" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111" x="307.52" y="370.1098">Route la requ&#234;te</text></g><!--link srvA to eureka--><g id="link_srvA_eureka"><path d="M354.89,472.29 C345.69,487.14 332.48,506.4 318,521.06 C274.41,565.17 219.6148,601.8497 180.6248,625.5897 " fill="none" id="srvA-to-eureka" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="175.5,628.71,185.2674,627.446,179.7707,626.1097,181.1069,620.613,175.5,628.71" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="124" x="285.2" y="565.1298">O&#249; est Service B ?</text></g><!--link srvA to eureka--><g id="link_srvA_eureka"><path d="M346.68,472.4 C338.27,481.88 328.79,493.19 321,504.06 C315.89,511.18 318.09,515.9 311,521.06 C260.92,557.43 221.99,510.76 175,551.06 C151.98,570.79 143.4764,599.8833 139.5964,622.9233 " fill="none" id="srvA-to-eureka-1" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="138.6,628.84,144.039,620.6292,139.4303,623.9094,136.1501,619.3007,138.6,628.84" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="80" x="176" y="565.1298">S'enregistre</text></g><!--link srvA to srvB--><g id="link_srvA_srvB"><path d="M421.47,448.55 C468.51,448.55 530.63,448.55 577.63,448.55 " fill="none" id="srvA-to-srvB" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="583.63,448.55,574.63,444.55,578.63,448.55,574.63,452.55,583.63,448.55" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127" x="439" y="442.6198">Appel inter-service</text></g><!--link srvA to config--><g id="link_srvA_config"><path d="M389.04,472.24 C415.14,499.05 462.18,543.13 511,568.06 C593.51,610.19 693.0524,631.3105 760.8424,641.9405 " fill="none" id="srvA-to-config" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="766.77,642.87,758.4983,637.5241,761.8304,642.0954,757.259,645.4275,766.77,642.87" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127" x="512" y="565.1298">R&#233;cup&#232;re sa config</text></g><!--link srvB to config--><g id="link_srvB_config"><path d="M664.21,472.45 C673.53,480.11 684.11,488.59 694,496.06 C728.15,521.82 743.6,519.98 773,551.06 C795.12,574.44 810.7418,601.5759 821.5918,623.2259 " fill="none" id="srvB-to-config" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="824.28,628.59,823.8237,618.7517,822.0398,624.1199,816.6716,622.336,824.28,628.59" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127" x="787.85" y="565.1298">R&#233;cup&#232;re sa config</text></g><!--link gateway to config--><g id="link_gateway_config"><path d="M316.88,304.74 C407.64,308.58 575.98,323.64 706,381.04 C818.4,430.66 870.09,440.64 924,551.06 C938.88,581.53 913.1563,606.5998 883.8063,625.3498 " fill="none" id="gateway-to-config" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="878.75,628.58,888.4879,627.1056,882.9636,625.8882,884.181,620.3639,878.75,628.58" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127" x="908.83" y="518.1298">R&#233;cup&#232;re sa config</text></g><!--link srvB to eureka--><g id="link_srvB_eureka"><path d="M646.69,472.11 C656.27,498.36 666.54,541.5 644,568.06 C588.61,633.29 337.8282,647.5128 211.9482,650.6028 " fill="none" id="srvB-to-eureka" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="205.95,650.75,215.0454,654.5279,210.9485,650.6273,214.8491,646.5303,205.95,650.75" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="80" x="654.36" y="565.1298">S'enregistre</text></g><!--SRC=[XPAnJiCm48PtFyNL2rCYiJ8K9LM5Eb0G7H63vHp1Qce7socgKD-5ZPOtOFQBuTX9MaH5Crtk-_tVdNqZ-u8hXBfYGXB2k5KQwAGIA2q5Pe27aF1ADGNGcRIe9KOakXz2QiQNh4IWSsKrmfGhip7MxLP8uPs0_nwp-ndSC8jlRFFK7YvZ7E54oMTHmWBr6dN0F6GYdJOQb-oOOiYGW8VQBHSS3TowlHMe-zB1euEGXVD6hxE_BEzP7jYMR0c9uqDI9EF3l7q0YS_sWv0kW3GTTmt25T0xzmreB0mDm3KTfC6sRSOh7rHZ4Ie66byRzsMHa43-jyjRkw2BJhaNPNMDLUmsCL4tU1NUBTvjMzBjULExdNyom_eh3oPfUbPt6FUij2z-FCdY0gN6KXY_C4SrJ_DVjKvBY5IsNO9Q2rd29AohL8q19We4zz7sueMDy9rPVzNWFXcCmXxFBty0]--></g></svg></div></section><section class="chapter"><h2 id="exercice-2-analyse-avantages-d-fis" data-toc="exercice-2-analyse-avantages-d-fis">Exercice 2 : Analyse Avantages/D&eacute;fis</h2><p id="-bt8i4t_133"><span class="control" id="-bt8i4t_138">Contexte :</span> L'&eacute;quipe de &quot;BookHive&quot; est en r&eacute;union d'architecture.</p><ul class="list _bullet" id="-bt8i4t_134"><li class="list__item" id="-bt8i4t_139"><p id="-bt8i4t_141"><span class="control" id="-bt8i4t_142">Situation A :</span> L'&eacute;quipe marketing veut pouvoir lancer des &quot;ventes flash&quot; tr&egrave;s complexes, dont les r&egrave;gles de calcul de prix changent toutes les semaines. L'&eacute;quipe en charge de cette fonctionnalit&eacute; est tr&egrave;s junior et apprend un nouveau framework de r&egrave;gles m&eacute;tier.</p></li><li class="list__item" id="-bt8i4t_140"><p id="-bt8i4t_143"><span class="control" id="-bt8i4t_144">Situation B :</span> Le PDG veut une nouvelle fonctionnalit&eacute; &quot;Recommandations personnalis&eacute;es&quot; qui doit analyser l'historique d'achat de TOUS les clients et les donn&eacute;es de navigation pour sugg&eacute;rer des livres. C'est un traitement tr&egrave;s lourd.</p></li></ul><p id="-bt8i4t_135"><span class="control" id="-bt8i4t_145">Votre mission :</span> Pour chaque situation, identifiez :</p><ol class="list _decimal" id="-bt8i4t_136" type="1"><li class="list__item" id="-bt8i4t_146"><p id="-bt8i4t_148">Le principal <span class="control" id="-bt8i4t_149">avantage</span> d'une architecture microservices pour r&eacute;pondre &agrave; ce besoin.</p></li><li class="list__item" id="-bt8i4t_147"><p id="-bt8i4t_150">Le principal <span class="control" id="-bt8i4t_151">d&eacute;fi</span> ou risque que cette architecture introduit et auquel il faudra faire attention.</p></li></ol><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="correction-exercice-2" data-toc="correction-exercice-2">Correction exercice 2</h3></div><div class="collapse__content"><ul class="list _bullet" id="-bt8i4t_152"><li class="list__item" id="-bt8i4t_154"><p id="-bt8i4t_156"><span class="control" id="-bt8i4t_158">Situation A (Ventes flash avec r&egrave;gles changeantes)</span></p><ol class="list _decimal" id="-bt8i4t_157" type="1"><li class="list__item" id="-bt8i4t_159"><p id="-bt8i4t_161"><span class="control" id="-bt8i4t_162">Avantage :</span> <span class="control" id="-bt8i4t_163">Isolation et autonomie.</span> On peut cr&eacute;er un <code class="code" id="-bt8i4t_164">pricing-service</code> d&eacute;di&eacute;. L'&eacute;quipe junior peut exp&eacute;rimenter, faire des erreurs et red&eacute;ployer son service tr&egrave;s fr&eacute;quemment (<code class="code" id="-bt8i4t_165">agilit&eacute;</code>) sans jamais risquer de casser le service de commande ou le catalogue (<code class="code" id="-bt8i4t_166">r&eacute;silience</code>). Ils peuvent m&ecirc;me utiliser leur nouveau framework sans l'imposer au reste de l'entreprise (<code class="code" id="-bt8i4t_167">ind&eacute;pendance technologique</code>).</p></li><li class="list__item" id="-bt8i4t_160"><p id="-bt8i4t_168"><span class="control" id="-bt8i4t_169">D&eacute;fi :</span> <span class="control" id="-bt8i4t_170">Performance et fiabilit&eacute; (Latence &amp; R&eacute;silience).</span> Le service de commande d&eacute;pendra fortement du <code class="code" id="-bt8i4t_171">pricing-service</code> pour calculer le total du panier. Si ce nouveau service est lent, tout le processus de paiement sera lent. S'il tombe en panne, personne ne peut plus acheter. Il faudra donc imp&eacute;rativement mettre en place un * <span class="emphasis" id="-bt8i4t_172">Circuit Breaker</span>* avec une solution de repli (fallback), par exemple : &quot;Si le service de prix ne r&eacute;pond pas en 200ms, appliquer le prix standard sans promotion&quot;.</p></li></ol></li><li class="list__item" id="-bt8i4t_155"><p id="-bt8i4t_173"><span class="control" id="-bt8i4t_175">Situation B (Recommandations personnalis&eacute;es)</span></p><ol class="list _decimal" id="-bt8i4t_174" type="1"><li class="list__item" id="-bt8i4t_176"><p id="-bt8i4t_178"><span class="control" id="-bt8i4t_179">Avantage :</span> <span class="control" id="-bt8i4t_180">Scalabilit&eacute; et ind&eacute;pendance technologique.</span> Le moteur de recommandation peut &ecirc;tre d&eacute;velopp&eacute; dans un service d&eacute;di&eacute;, potentiellement en Python avec des librairies de Machine Learning. Surtout, ce service peut &ecirc;tre h&eacute;berg&eacute; sur des serveurs sp&eacute;cifiques avec beaucoup de CPU et de RAM et &ecirc;tre <span class="control" id="-bt8i4t_181">mis &agrave; l'&eacute;chelle ind&eacute;pendamment</span> du reste de l'application, sans impacter les performances du processus de commande.</p></li><li class="list__item" id="-bt8i4t_177"><p id="-bt8i4t_182"><span class="control" id="-bt8i4t_183">D&eacute;fi :</span> <span class="control" id="-bt8i4t_184">Consistance et acc&egrave;s aux donn&eacute;es.</span> Pour faire des recommandations, ce service a besoin de donn&eacute;es qui &quot;appartiennent&quot; &agrave; d'autres services (historique des commandes du <code class="code" id="-bt8i4t_185">service-commande</code>, profil de l'utilisateur du <code class="code" id="-bt8i4t_186">service-utilisateur</code>...). Comment va-t-il y acc&eacute;der ? Faire des appels API synchrones pour des millions de donn&eacute;es est inenvisageable. Le d&eacute;fi sera de mettre en place une strat&eacute;gie de **r&eacute;plication de donn&eacute;es asynchrone ** (par exemple, via des &eacute;v&eacute;nements) pour que le <code class="code" id="-bt8i4t_187">recommendation-service</code> ait sa propre copie des donn&eacute;es, optimis&eacute;e pour ses besoins d'analyse. C'est un parfait exemple du d&eacute;fi de la <span class="control" id="-bt8i4t_188">gestion des donn&eacute;es distribu&eacute;es</span>.</p></li></ol></li></ul></div></div></section></section><section class="chapter"><h2 id="auto-valuation" data-toc="auto-valuation">Auto-&eacute;valuation</h2><p id="-bt8i4t_189">Prenez un moment pour r&eacute;pondre &agrave; ces questions. Les corrections se trouvent &agrave; la toute fin du support de cours.</p><ol class="list _decimal" id="-bt8i4t_190" type="1"><li class="list__item" id="-bt8i4t_192"><p id="-bt8i4t_197"><span class="control" id="-bt8i4t_199">(QCM)</span> Pour le lancement d'un nouveau jeu vid&eacute;o tr&egrave;s attendu, un site e-commerce s'attend &agrave; un pic massif sur la page du produit et lors de la finalisation de l'achat, mais pas sur les autres parties du site. Quel avantage des microservices est le plus pertinent ici ?</p><ul class="list _bullet" id="-bt8i4t_198"><li class="list__item" id="-bt8i4t_200"><p id="-bt8i4t_204">A) L'ind&eacute;pendance technologique.</p></li><li class="list__item" id="-bt8i4t_201"><p id="-bt8i4t_205">B) La scalabilit&eacute; ind&eacute;pendante.</p></li><li class="list__item" id="-bt8i4t_202"><p id="-bt8i4t_206">C) La simplicit&eacute; de gestion des logs.</p></li><li class="list__item" id="-bt8i4t_203"><p id="-bt8i4t_207">D) L'absence de latence r&eacute;seau.</p></li></ul></li><li class="list__item" id="-bt8i4t_193"><p id="-bt8i4t_208"><span class="control" id="-bt8i4t_209">(Question ouverte)</span> Expliquez le concept de &quot;panne en cascade&quot; (cascading failure) et nommez le pattern ainsi que le composant Spring Cloud qui permettent de s'en pr&eacute;munir.</p></li><li class="list__item" id="-bt8i4t_194"><p id="-bt8i4t_210"><span class="control" id="-bt8i4t_212">(QCM)</span> Une startup d&eacute;cide de construire son application avec 5 microservices, chacun &eacute;crit dans un langage diff&eacute;rent (Java, Python, Go, Node.js, Ruby). C'est un exemple de :</p><ul class="list _bullet" id="-bt8i4t_211"><li class="list__item" id="-bt8i4t_213"><p id="-bt8i4t_217">A) R&eacute;silience.</p></li><li class="list__item" id="-bt8i4t_214"><p id="-bt8i4t_218">B) Scalabilit&eacute;.</p></li><li class="list__item" id="-bt8i4t_215"><p id="-bt8i4t_219">C) Polyglottisme technologique.</p></li><li class="list__item" id="-bt8i4t_216"><p id="-bt8i4t_220">D) Consistance des donn&eacute;es.</p></li></ul></li><li class="list__item" id="-bt8i4t_195"><p id="-bt8i4t_221"><span class="control" id="-bt8i4t_222">(Question ouverte)</span> Votre <code class="code" id="-bt8i4t_223">service-commande</code> doit appeler le <code class="code" id="-bt8i4t_224">service-produit</code> pour v&eacute;rifier le prix d'un article. Listez deux nouveaux types de probl&egrave;mes qui n'existeraient pas si les deux modules &eacute;taient dans un monolithe.</p></li><li class="list__item" id="-bt8i4t_196"><p id="-bt8i4t_225"><span class="control" id="-bt8i4t_227">(QCM)</span> Quel est le r&ocirc;le principal de Spring Cloud Eureka ?</p><ul class="list _bullet" id="-bt8i4t_226"><li class="list__item" id="-bt8i4t_228"><p id="-bt8i4t_232">A) S&eacute;curiser les communications entre services.</p></li><li class="list__item" id="-bt8i4t_229"><p id="-bt8i4t_233">B) Stocker les fichiers de configuration de mani&egrave;re centralis&eacute;e.</p></li><li class="list__item" id="-bt8i4t_230"><p id="-bt8i4t_234">C) Permettre aux services de se trouver les uns les autres sur le r&eacute;seau.</p></li><li class="list__item" id="-bt8i4t_231"><p id="-bt8i4t_235">D) Router les requ&ecirc;tes des utilisateurs vers le bon service.</p></li></ul></li></ol></section><section class="chapter"><h2 id="conclusion-de-la-partie" data-toc="conclusion-de-la-partie">Conclusion de la partie</h2><p id="-bt8i4t_236">Nous avons maintenant une vision &eacute;quilibr&eacute;e et r&eacute;aliste de l'architecture microservices. Ce n'est pas une solution miracle, mais un <span class="control" id="-bt8i4t_240">arbitrage</span> (trade-off) : nous &eacute;changeons la simplicit&eacute; de d&eacute;veloppement et d'op&eacute;ration du monolithe contre une plus grande <span class="control" id="-bt8i4t_241">scalabilit&eacute;, r&eacute;silience et agilit&eacute;</span> &agrave; grande &eacute;chelle.</p><p id="-bt8i4t_237">Vous avez d&eacute;couvert que chaque avantage vient avec son lot de d&eacute;fis, notamment la <span class="control" id="-bt8i4t_242">complexit&eacute; op&eacute;rationnelle</span>, la * <span class="emphasis" id="-bt8i4t_243">latence r&eacute;seau</span>* et la <span class="control" id="-bt8i4t_244">gestion des donn&eacute;es distribu&eacute;es</span>.</p><p id="-bt8i4t_238">Mais la bonne nouvelle est que nous ne sommes pas seuls. <span class="control" id="-bt8i4t_245">L'&eacute;cosyst&egrave;me Spring Cloud</span> a &eacute;t&eacute; sp&eacute;cifiquement con&ccedil;u pour nous fournir des outils robustes afin de ma&icirc;triser cette complexit&eacute;.</p><p id="-bt8i4t_239">Nous avons pos&eacute; toutes les bases th&eacute;oriques n&eacute;cessaires. Il est maintenant temps de passer &agrave; la pratique ! Dans le prochain module, nous allons enfin mettre les mains dans le cambouis, d&eacute;finir notre projet fil rouge et cr&eacute;er notre tout premier microservice avec Spring Boot. Allons-y</p></section><div class="last-modified">17 juillet 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="001-00-intro.html" class="navigation-links__prev">Module 1 : Les Fondations - Du Monolithe aux Microservices (L'essentiel)</a><a href="002-00-first-micro-service.html" class="navigation-links__next">Module 2 : Cas d'&eacute;tude et Premier Microservice</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>