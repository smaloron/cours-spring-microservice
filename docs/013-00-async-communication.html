<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-31T13:08:47.318815"><title>Module 13 : Communication Asynchrone (RabbitMQ / Kafka) - Le D&eacute;couplage Ultime | Spring Micro Services</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs Pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction-le-t-l-phone-vs-la-bo-te-aux-lettres","level":0,"title":"Introduction : Le Téléphone vs. la Boîte aux Lettres","anchor":"#introduction-le-t-l-phone-vs-la-bo-te-aux-lettres"},{"id":"synchronous-vs-asynchronous-avantages-et-inconv-nients","level":0,"title":"Synchronous vs. Asynchronous : Avantages et Inconvénients","anchor":"#synchronous-vs-asynchronous-avantages-et-inconv-nients"},{"id":"deux-outils-deux-philosophies-rabbitmq-vs-kafka","level":0,"title":"Deux Outils, Deux Philosophies : RabbitMQ vs. Kafka","anchor":"#deux-outils-deux-philosophies-rabbitmq-vs-kafka"},{"id":"int-gration-avec-spring","level":0,"title":"Intégration avec Spring","anchor":"#int-gration-avec-spring"},{"id":"conclusion-de-la-partie","level":0,"title":"Conclusion de la partie","anchor":"#conclusion-de-la-partie"},{"id":"auto-valuation","level":0,"title":"Auto-évaluation","anchor":"#auto-valuation"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Module 13 : Communication Asynchrone (RabbitMQ / Kafka) - Le D&eacute;couplage Ultime | Spring Micro Services"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Spring Micro Services Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/013-00-async-communication.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Module 13 : Communication Asynchrone (RabbitMQ / Kafka) - Le D&eacute;couplage Ultime | Spring Micro Services"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/013-00-async-communication.html#webpage",
    "url": "writerside-documentation/013-00-async-communication.html",
    "name": "Module 13 : Communication Asynchrone (RabbitMQ / Kafka) - Le D&eacute;couplage Ultime | Spring Micro Services",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Spring Micro Services Help"
}</script><!-- End Schema.org --></head><body data-id="013-00-async-communication" data-main-title="Module 13 : Communication Asynchrone (RabbitMQ / Kafka) - Le Découplage Ultime" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Spring Micro Services  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="013-00-async-communication" id="013-00-async-communication.md">Module 13 : Communication Asynchrone (RabbitMQ / Kafka) - Le Découplage Ultime</h1><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs P&eacute;dagogiques</h2><p id="ng6qrj_10">&Agrave; la fin de ce module, vous serez capable de :</p><ul class="list _bullet" id="ng6qrj_11"><li class="list__item" id="ng6qrj_12"><p id="ng6qrj_16">Expliquer les avantages et les cas d'usage de la communication asynchrone par rapport &agrave; la communication synchrone.</p></li><li class="list__item" id="ng6qrj_13"><p id="ng6qrj_17">Distinguer les concepts d'un Message Broker (RabbitMQ) de ceux d'un Distributed Log (Kafka).</p></li><li class="list__item" id="ng6qrj_14"><p id="ng6qrj_18">Mettre en &oelig;uvre un pattern Producteur/Consommateur simple.</p></li><li class="list__item" id="ng6qrj_15"><p id="ng6qrj_19">Comprendre comment la communication asynchrone augmente la r&eacute;silience et la scalabilit&eacute;.</p></li></ul></section><section class="chapter"><h2 id="introduction-le-t-l-phone-vs-la-bo-te-aux-lettres" data-toc="introduction-le-t-l-phone-vs-la-bo-te-aux-lettres">Introduction : Le T&eacute;l&eacute;phone vs. la Bo&icirc;te aux Lettres</h2><p id="ng6qrj_20">Jusqu'&agrave; pr&eacute;sent, toutes nos communications &eacute;taient synchrones. L'Order Service &quot;t&eacute;l&eacute;phonait&quot; au Product Service et attendait en ligne qu'il r&eacute;ponde. C'est simple et direct, parfait pour des requ&ecirc;tes qui n&eacute;cessitent une r&eacute;ponse imm&eacute;diate (&quot;Quel est le prix de ce produit ?&quot;).</p><p id="ng6qrj_21">Mais imaginez ce sc&eacute;nario : quand une commande est valid&eacute;e, nous devons effectuer plusieurs actions :</p><ol class="list _decimal" id="ng6qrj_22" type="1"><li class="list__item" id="ng6qrj_25"><p id="ng6qrj_28">Envoyer un email de confirmation &agrave; l'utilisateur.</p></li><li class="list__item" id="ng6qrj_26"><p id="ng6qrj_29">Notifier le service d'exp&eacute;dition.</p></li><li class="list__item" id="ng6qrj_27"><p id="ng6qrj_30">Mettre &agrave; jour les statistiques de vente.</p></li></ol><p id="ng6qrj_23">Si l'Order Service devait appeler s&eacute;quentiellement trois autres services (Notification, Exp&eacute;dition, Statistiques) et attendre leur r&eacute;ponse, le temps de r&eacute;ponse pour l'utilisateur final serait la somme de tous ces appels. Pire, si le service de notification est en panne, la commande enti&egrave;re &eacute;choue, m&ecirc;me si la partie la plus importante (la cr&eacute;ation de la commande) a r&eacute;ussi.</p><p id="ng6qrj_24">La communication asynchrone propose une autre approche : la <span class="control" id="ng6qrj_31">bo&icirc;te aux lettres</span>. L'Order Service ne fait qu'une seule chose : il d&eacute;pose un &quot;message&quot; (un &eacute;v&eacute;nement <code class="code" id="ng6qrj_32">CommandeValid&eacute;e</code>) dans une bo&icirc;te aux lettres partag&eacute;e, puis il r&eacute;pond imm&eacute;diatement &agrave; l'utilisateur &quot;Votre commande est prise en compte !&quot;. Il ne se soucie pas de qui va lire ce message, ni quand. Les autres services (Notification, Exp&eacute;dition...), quant &agrave; eux, sont abonn&eacute;s &agrave; cette bo&icirc;te aux lettres et viendront r&eacute;cup&eacute;rer le message pour le traiter &agrave; leur propre rythme.</p></section><section class="chapter"><h2 id="synchronous-vs-asynchronous-avantages-et-inconv-nients" data-toc="synchronous-vs-asynchronous-avantages-et-inconv-nients">Synchronous vs. Asynchronous : Avantages et Inconv&eacute;nients</h2><div class="table-wrapper"><table class="wide" id="ng6qrj_33"><thead><tr class="ijRowHead" id="ng6qrj_34"><th id="ng6qrj_40"><p>Aspect</p></th><th id="ng6qrj_41"><p>Synchrone (API REST)</p></th><th id="ng6qrj_42"><p>Asynchrone (Messaging)</p></th></tr></thead><tbody><tr id="ng6qrj_35"><td id="ng6qrj_43"><p><span class="control" id="ng6qrj_46">Couplage</span></p></td><td id="ng6qrj_44"><p><span class="control" id="ng6qrj_47">Temporel :</span> L'appelant et l'appel&eacute; doivent &ecirc;tre disponibles en m&ecirc;me temps.</p></td><td id="ng6qrj_45"><p><span class="control" id="ng6qrj_48">D&eacute;couplage temporel :</span> L'&eacute;metteur et le r&eacute;cepteur n'ont pas besoin d'&ecirc;tre disponibles simultan&eacute;ment.</p></td></tr><tr id="ng6qrj_36"><td id="ng6qrj_49"><p><span class="control" id="ng6qrj_52">Latence</span></p></td><td id="ng6qrj_50"><p>La latence pour l'utilisateur est la somme des latences de tous les appels.</p></td><td id="ng6qrj_51"><p>La latence pour l'utilisateur est tr&egrave;s faible. Le traitement est diff&eacute;r&eacute;.</p></td></tr><tr id="ng6qrj_37"><td id="ng6qrj_53"><p><span class="control" id="ng6qrj_56">R&eacute;silience</span></p></td><td id="ng6qrj_54"><p>Une panne dans un service appel&eacute; peut faire &eacute;chouer toute la cha&icirc;ne.</p></td><td id="ng6qrj_55"><p>Si un consommateur est en panne, le message reste dans la file et sera trait&eacute; &agrave; son red&eacute;marrage.</p></td></tr><tr id="ng6qrj_38"><td id="ng6qrj_57"><p><span class="control" id="ng6qrj_60">Scalabilit&eacute;</span></p></td><td id="ng6qrj_58"><p>L'appelant doit g&eacute;rer les pics de charge de l'appel&eacute;.</p></td><td id="ng6qrj_59"><p>La file de messages agit comme un tampon (buffer), lissant les pics de charge.</p></td></tr><tr id="ng6qrj_39"><td id="ng6qrj_61"><p><span class="control" id="ng6qrj_64">Complexit&eacute;</span></p></td><td id="ng6qrj_62"><p>Plus simple &agrave; raisonner et &agrave; d&eacute;boguer (flux direct).</p></td><td id="ng6qrj_63"><p>Plus complexe : suivi des messages, gestion des erreurs, consistance &agrave; terme (eventual consistency).</p></td></tr></tbody></table></div></section><section class="chapter"><h2 id="deux-outils-deux-philosophies-rabbitmq-vs-kafka" data-toc="deux-outils-deux-philosophies-rabbitmq-vs-kafka">Deux Outils, Deux Philosophies : RabbitMQ vs. Kafka</h2><p id="ng6qrj_65">Pour impl&eacute;menter la communication asynchrone, on utilise un &quot;interm&eacute;diaire&quot;, un <span class="control" id="ng6qrj_68">Message Broker</span> ou un <span class="control" id="ng6qrj_69">Event Streaming Platform</span>. Les deux leaders du march&eacute; sont RabbitMQ et Kafka, mais ils fonctionnent diff&eacute;remment.</p><section class="chapter"><h3 id="rabbitmq-le-facteur-intelligent" data-toc="rabbitmq-le-facteur-intelligent">RabbitMQ (Le Facteur Intelligent)</h3><p id="ng6qrj_70">RabbitMQ est un <span class="control" id="ng6qrj_74">Message Broker</span> traditionnel. Il impl&eacute;mente le protocole AMQP (Advanced Message Queuing Protocol). Il est con&ccedil;u comme un syst&egrave;me postal intelligent.</p><ul class="list _bullet" id="ng6qrj_71"><li class="list__item" id="ng6qrj_75"><p id="ng6qrj_80"><span class="control" id="ng6qrj_81">Producer (Producteur) :</span> L'application qui envoie le message.</p></li><li class="list__item" id="ng6qrj_76"><p id="ng6qrj_82"><span class="control" id="ng6qrj_83">Consumer (Consommateur) :</span> L'application qui re&ccedil;oit le message.</p></li><li class="list__item" id="ng6qrj_77"><p id="ng6qrj_84"><span class="control" id="ng6qrj_85">Exchange (Bureau de Tri) :</span> Le producteur envoie toujours ses messages &agrave; un Exchange. Il ne sait pas o&ugrave; le message va finir.</p></li><li class="list__item" id="ng6qrj_78"><p id="ng6qrj_86"><span class="control" id="ng6qrj_87">Queue (File d'attente / Bo&icirc;te aux lettres) :</span> C'est l&agrave; que les messages sont stock&eacute;s en attendant d'&ecirc;tre lus par un consommateur.</p></li><li class="list__item" id="ng6qrj_79"><p id="ng6qrj_88"><span class="control" id="ng6qrj_89">Binding (R&egrave;gle de routage) :</span> C'est une r&egrave;gle qui lie un Exchange &agrave; une Queue. C'est le c&oelig;ur de l'intelligence de RabbitMQ. On peut avoir des r&egrave;gles tr&egrave;s complexes (ex: &quot;Envoie tous les messages dont la cl&eacute; de routage commence par <code class="code" id="ng6qrj_90">europe.</code> &agrave; cette file&quot;).</p></li></ul><p id="ng6qrj_72"><span class="control" id="ng6qrj_91">Id&eacute;al pour :</span> Les messages de type <span class="control" id="ng6qrj_92">commande</span> (ex: &quot;Envoie cet email&quot;). Le routage intelligent et la garantie de livraison &agrave; un consommateur sp&eacute;cifique sont ses points forts.</p><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="415px" preserveAspectRatio="none" style="width:387px;height:415px;background:#FFFFFF;" version="1.1" viewBox="0 0 387 415" width="387px" zoomAndPan="magnify"><defs/><g><!--entity Producer--><g id="elem_Producer"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="101" x="19.78" y="12"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="100.78" y="17"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="98.78" y="19"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="98.78" y="23"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="61" x="34.78" y="46.0752">Producer</text></g><g id="elem_Exchange"><ellipse cx="70.282" cy="156.8118" fill="#FFFFFF" rx="59.282" ry="15.1218" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="67" x="33.782" y="161.0994">Exchange</text></g><!--entity Queue--><g id="elem_Queue"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="85" x="27.78" y="254.61"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="92.78" y="259.61"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="90.78" y="261.61"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="90.78" y="265.61"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="45" x="42.78" y="288.6852">Queue</text></g><!--entity Consumer--><g id="elem_Consumer"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="111" x="14.78" y="362.63"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="105.78" y="367.63"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="103.78" y="369.63"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="103.78" y="373.63"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="71" x="29.78" y="396.7052">Consumer</text></g><g id="elem_GMN9"><path d="M164.28,136.01 L164.28,152.81 L129.86,156.81 L164.28,160.81 L164.28,177.6086 A0,0 0 0 0 164.28,177.6086 L380.28,177.6086 A0,0 0 0 0 380.28,177.6086 L380.28,146.01 L370.28,136.01 L164.28,136.01 A0,0 0 0 0 164.28,136.01 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M370.28,136.01 L370.28,146.01 L380.28,146.01 L370.28,136.01 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="195" x="170.28" y="154.0798">Le producteur ne conna&#238;t que</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="75" x="170.28" y="169.8791">l'Exchange.</text></g><g id="elem_GMN12"><path d="M148.28,257.32 L148.28,274.12 L113.05,278.12 L148.28,282.12 L148.28,298.9186 A0,0 0 0 0 148.28,298.9186 L360.28,298.9186 A0,0 0 0 0 360.28,298.9186 L360.28,267.32 L350.28,257.32 L148.28,257.32 A0,0 0 0 0 148.28,257.32 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M350.28,257.32 L350.28,267.32 L360.28,267.32 L350.28,257.32 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="191" x="154.28" y="275.3898">La Queue stocke le message</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="173" x="154.28" y="291.1891">jusqu'&#224; sa consommation.</text></g><!--link Producer to Exchange--><g id="link_Producer_Exchange"><path d="M70.28,59.51 C70.28,83.75 70.28,115.17 70.28,135.49 " fill="none" id="Producer-to-Exchange" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="70.28,141.49,74.28,132.49,70.28,136.49,66.28,132.49,70.28,141.49" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="57" x="71.28" y="103.0798">Message</text></g><!--link Exchange to Queue--><g id="link_Exchange_Queue"><path d="M70.28,171.97 C70.28,192.34 70.28,224.13 70.28,248.43 " fill="none" id="Exchange-to-Queue" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="70.28,254.43,74.28,245.43,70.28,249.43,66.28,245.43,70.28,254.43" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="49" x="71.28" y="221.6798">Binding</text></g><!--link Queue to Consumer--><g id="link_Queue_Consumer"><path d="M70.28,302.12 C70.28,319.9 70.28,338.4 70.28,356.17 " fill="none" id="Queue-to-Consumer" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="70.28,362.17,74.28,353.17,70.28,357.17,66.28,353.17,70.28,362.17" style="stroke:#000000;stroke-width:1.0;"/></g><!--SRC=[NOun3i8m54FtdC9CXQ4SW841n0OIp5M7AFsqWUQ7Ded4SJW1b-Z5I4ihAZRBjfwzy1KPmgEMceN8pgqjWg8sHrgaMomFJrL9Bcc53Kxad2n9pCoXb5q21SfZOwUvq5oAoVd6UyikcCWKWgqdjBgiFEnrHXV0CPuOnZs55anGbbbsRuycKCphP6gl1N617lN76sTxcCIWuRnLTq9DCEDxu1PS4vBk1IVx4MUDaLvR_d4_]--></g></svg></div></section><section class="chapter"><h3 id="kafka-le-journal-de-bord-public" data-toc="kafka-le-journal-de-bord-public">Kafka (Le Journal de Bord Public)</h3><p id="ng6qrj_93">Kafka est diff&eacute;rent. Ce n'est pas un simple broker, mais une <span class="control" id="ng6qrj_98">plateforme de streaming d'&eacute;v&eacute;nements</span> (un &quot;distributed log&quot;). Il a &eacute;t&eacute; con&ccedil;u pour des volumes de donn&eacute;es massifs (Big Data).</p><ul class="list _bullet" id="ng6qrj_94"><li class="list__item" id="ng6qrj_99"><p id="ng6qrj_104"><span class="control" id="ng6qrj_105">Producer :</span> Envoie des messages (ici appel&eacute;s &quot;records&quot;).</p></li><li class="list__item" id="ng6qrj_100"><p id="ng6qrj_106"><span class="control" id="ng6qrj_107">Consumer :</span> Lit des messages.</p></li><li class="list__item" id="ng6qrj_101"><p id="ng6qrj_108"><span class="control" id="ng6qrj_109">Topic (Sujet / Journal) :</span> C'est l'&eacute;quivalent d'une cat&eacute;gorie. Les producteurs &eacute;crivent dans des topics.</p></li><li class="list__item" id="ng6qrj_102"><p id="ng6qrj_110"><span class="control" id="ng6qrj_111">Partition :</span> Un topic est divis&eacute; en plusieurs partitions pour la scalabilit&eacute; et le parall&eacute;lisme.</p></li><li class="list__item" id="ng6qrj_103"><p id="ng6qrj_112"><span class="control" id="ng6qrj_113">Offset :</span> Chaque message dans une partition a un num&eacute;ro de s&eacute;quence unique, l'offset. Les consommateurs ne suppriment pas les messages, ils se contentent de suivre leur offset de lecture (&quot;J'ai lu jusqu'au message 42&quot;).</p></li></ul><p id="ng6qrj_95">La grande diff&eacute;rence est que les messages dans Kafka sont <span class="control" id="ng6qrj_114">immuables et persistants</span> pendant une p&eacute;riode configurable (ex: 7 jours). Plusieurs consommateurs (de types diff&eacute;rents) peuvent relire le m&ecirc;me flux d'&eacute;v&eacute;nements pour des besoins diff&eacute;rents.</p><p id="ng6qrj_96"><span class="control" id="ng6qrj_115">Id&eacute;al pour :</span> Les messages de type <span class="control" id="ng6qrj_116">&eacute;v&eacute;nement</span> (ex: &quot;Un utilisateur a cliqu&eacute; sur ce bouton&quot;). Le streaming, l'historisation des &eacute;v&eacute;nements et la capacit&eacute; &agrave; &ecirc;tre lu par de multiples syst&egrave;mes sont ses points forts.</p><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="181px" preserveAspectRatio="none" style="width:612px;height:181px;background:#FFFFFF;" version="1.1" viewBox="0 0 612 181" width="612px" zoomAndPan="magnify"><defs/><g><!--entity Producer--><g id="elem_Producer"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="101" x="134.5" y="16.19"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="215.5" y="21.19"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="213.5" y="23.19"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="213.5" y="27.19"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="61" x="149.5" y="50.2652">Producer</text></g><g id="elem_Topic"><ellipse cx="307.9982" cy="39.7012" fill="#FFFFFF" rx="37.6482" ry="15.0312" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="37" x="289.4982" y="43.269">Topic</text></g><!--entity Consumer Group A--><g id="elem_Consumer Group A"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="174" x="12" y="128.4"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="166" y="133.4"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="164" y="135.4"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="164" y="139.4"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="134" x="27" y="162.4752">Consumer Group A</text></g><!--entity Consumer Group B--><g id="elem_Consumer Group B"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="174" x="221" y="128.4"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="375" y="133.4"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="373" y="135.4"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="373" y="139.4"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="134" x="236" y="162.4752">Consumer Group B</text></g><!--entity Real-time Analytics--><g id="elem_Real-time Analytics"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="176" x="430" y="128.4"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="586" y="133.4"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="584" y="135.4"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="584" y="139.4"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="136" x="445" y="162.4752">Real-time Analytics</text></g><g id="elem_GMN11"><path d="M381,11 L381,35.7 L345.94,39.7 L381,43.7 L381,68.3979 A0,0 0 0 0 381,68.3979 L605,68.3979 A0,0 0 0 0 605,68.3979 L605,21 L595,11 L381,11 A0,0 0 0 0 381,11 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M595,11 L595,21 L605,21 L595,11 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="169" x="387" y="29.0698">Le message est conserv&#233;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="110" x="387" y="44.8691">et peut &#234;tre relu</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="203" x="387" y="60.6685">par plusieurs consommateurs.</text></g><!--link Producer to Topic--><g id="link_Producer_Topic"><path d="M235.93,39.7 C247.28,39.7 252.64,39.7 263.99,39.7 " fill="none" id="Producer-to-Topic" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="269.99,39.7,260.99,35.7,264.99,39.7,260.99,43.7,269.99,39.7" style="stroke:#000000;stroke-width:1.0;"/></g><!--link Topic to Consumer Group A--><g id="link_Topic_Consumer Group A"><path d="M286.03,52.28 C252.07,70.19 191.5071,102.121 147.7071,125.221 " fill="none" id="Topic-to-Consumer Group A" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="142.4,128.02,152.2267,127.3596,146.8226,125.6875,148.4947,120.2834,142.4,128.02" style="stroke:#000000;stroke-width:1.0;"/></g><!--link Topic to Consumer Group B--><g id="link_Topic_Consumer Group B"><path d="M308,55.1 C308,73.66 308,100.12 308,122.06 " fill="none" id="Topic-to-Consumer Group B" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="308,128.06,312,119.06,308,123.06,304,119.06,308,128.06" style="stroke:#000000;stroke-width:1.0;"/></g><!--link Topic to Real-time Analytics--><g id="link_Topic_Real-time Analytics"><path d="M330.08,52.28 C364.2,70.19 425.0774,102.1315 469.0874,125.2315 " fill="none" id="Topic-to-Real-time Analytics" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="474.4,128.02,468.29,120.2955,469.9728,125.6962,464.572,127.379,474.4,128.02" style="stroke:#000000;stroke-width:1.0;"/></g><!--SRC=[VOyz3i8m34RtdE9ZWw4S0Qami30Wn5PrY5938-LFZeF4aU0QlHWfGWmCRFRtR3zv8IDvGdBQ1jKTEGx54FTeDbYUOx9cfTIdG5F3RXT3BfuOUuubeUt_ukqFFf5sZTXgR8DsTx4czqg5A0Isrr4GBrylS21uobbV2PG5fjuclasFYaYGg0Ycft3T9LTgc3JNJqgsL3Y_nwFtMkPkhIWCc4Kl]--></g></svg></div></section></section><section class="chapter"><h2 id="int-gration-avec-spring" data-toc="int-gration-avec-spring">Int&eacute;gration avec Spring</h2><p id="ng6qrj_117">Spring facilite grandement l'utilisation de ces outils :</p><ul class="list _bullet" id="ng6qrj_118"><li class="list__item" id="ng6qrj_120"><p id="ng6qrj_123"><span class="control" id="ng6qrj_124">Spring AMQP :</span> Fournit une int&eacute;gration de haut niveau avec RabbitMQ (<code class="code" id="ng6qrj_125">RabbitTemplate</code> pour produire, <code class="code" id="ng6qrj_126">@RabbitListener</code> pour consommer).</p></li><li class="list__item" id="ng6qrj_121"><p id="ng6qrj_127"><span class="control" id="ng6qrj_128">Spring for Kafka :</span> Fournit une int&eacute;gration similaire pour Kafka (<code class="code" id="ng6qrj_129">KafkaTemplate</code> et <code class="code" id="ng6qrj_130">@KafkaListener</code>).</p></li><li class="list__item" id="ng6qrj_122"><p id="ng6qrj_131"><span class="control" id="ng6qrj_132">Spring Cloud Stream :</span> C'est une surcouche d'abstraction encore plus &eacute;lev&eacute;e. Elle permet d'&eacute;crire du code agnostique du broker sous-jacent. On &eacute;crit du code qui envoie des donn&eacute;es &agrave; un &quot;canal de sortie&quot; (output channel) et en re&ccedil;oit d'un &quot;canal d'entr&eacute;e&quot; (input channel), et la configuration (<code class="code" id="ng6qrj_133">application.yml</code>) se charge de lier ces canaux &agrave; un topic Kafka ou un exchange RabbitMQ. C'est tr&egrave;s puissant pour changer de technologie sans changer de code.</p></li></ul></section><section class="chapter"><h2 id="conclusion-de-la-partie" data-toc="conclusion-de-la-partie">Conclusion de la partie</h2><p id="ng6qrj_134">Vous avez d&eacute;couvert un nouveau monde de communication, puissant et flexible. La <span class="control" id="ng6qrj_139">communication asynchrone</span> est la cl&eacute; pour construire des syst&egrave;mes <span class="control" id="ng6qrj_140">hautement d&eacute;coupl&eacute;s, r&eacute;silients et scalables</span>.</p><p id="ng6qrj_135">Vous avez appris :</p><ul class="list _bullet" id="ng6qrj_136"><li class="list__item" id="ng6qrj_141"><p id="ng6qrj_143">Les avantages du d&eacute;couplage temporel pour la <span class="control" id="ng6qrj_144">r&eacute;silience</span> (un service qui tombe n'impacte pas les autres) et la * <span class="emphasis" id="ng6qrj_145">scalabilit&eacute;</span>* (les files de messages absorbent les pics de charge).</p></li><li class="list__item" id="ng6qrj_142"><p id="ng6qrj_146">La diff&eacute;rence fondamentale entre <span class="control" id="ng6qrj_147">RabbitMQ</span>, le facteur intelligent optimis&eacute; pour le routage de commandes, et * <span class="emphasis" id="ng6qrj_148">Kafka</span>*, le journal de bord distribu&eacute; optimis&eacute; pour le streaming d'&eacute;v&eacute;nements.</p></li></ul><p id="ng6qrj_137">Dans le TP qui suit, nous allons mettre en pratique ces concepts. Nous allons ajouter RabbitMQ &agrave; notre <code class="code" id="ng6qrj_149">docker-compose.yml</code>, cr&eacute;er un nouveau <code class="code" id="ng6qrj_150">notification-service</code>, et modifier notre <code class="code" id="ng6qrj_151">order-service</code> pour qu'il publie un &eacute;v&eacute;nement <code class="code" id="ng6qrj_152">OrderCreatedEvent</code> de mani&egrave;re asynchrone, d&eacute;montrant ainsi la puissance du d&eacute;couplage.</p></section><section class="chapter"><h2 id="auto-valuation" data-toc="auto-valuation">Auto-&eacute;valuation</h2><ol class="list _decimal" id="ng6qrj_153" type="1"><li class="list__item" id="ng6qrj_154"><p id="ng6qrj_159"><span class="control" id="ng6qrj_160">(Question ouverte)</span> Citez deux avantages de la communication asynchrone par rapport &agrave; la communication synchrone.</p></li><li class="list__item" id="ng6qrj_155"><p id="ng6qrj_161"><span class="control" id="ng6qrj_163">(QCM)</span> Dans RabbitMQ, quelle est l'entit&eacute; qui re&ccedil;oit les messages des producteurs et les route vers les files d' attente ?</p><ul class="list _bullet" id="ng6qrj_162"><li class="list__item" id="ng6qrj_164"><p id="ng6qrj_168">A) La Queue</p></li><li class="list__item" id="ng6qrj_165"><p id="ng6qrj_169">B) Le Binding</p></li><li class="list__item" id="ng6qrj_166"><p id="ng6qrj_170">C) L'Exchange</p></li><li class="list__item" id="ng6qrj_167"><p id="ng6qrj_171">D) Le Consumer</p></li></ul></li><li class="list__item" id="ng6qrj_156"><p id="ng6qrj_172"><span class="control" id="ng6qrj_174">(QCM)</span> Quelle technologie est la plus adapt&eacute;e pour un cas d'usage de type &quot;Event Sourcing&quot;, o&ugrave; l'on veut conserver un historique immuable de tous les &eacute;v&eacute;nements qui se sont produits ?</p><ul class="list _bullet" id="ng6qrj_173"><li class="list__item" id="ng6qrj_175"><p id="ng6qrj_179">A) API REST</p></li><li class="list__item" id="ng6qrj_176"><p id="ng6qrj_180">B) RabbitMQ</p></li><li class="list__item" id="ng6qrj_177"><p id="ng6qrj_181">C) Kafka</p></li><li class="list__item" id="ng6qrj_178"><p id="ng6qrj_182">D) gRPC</p></li></ul></li><li class="list__item" id="ng6qrj_157"><p id="ng6qrj_183"><span class="control" id="ng6qrj_184">(Question ouverte)</span> Expliquez ce qu'est le &quot;d&eacute;couplage temporel&quot; et pourquoi il am&eacute;liore la r&eacute;silience.</p></li><li class="list__item" id="ng6qrj_158"><p id="ng6qrj_185"><span class="control" id="ng6qrj_187">(QCM)</span> L'annotation Spring <code class="code" id="ng6qrj_188">@RabbitListener</code> est utilis&eacute;e pour :</p><ul class="list _bullet" id="ng6qrj_186"><li class="list__item" id="ng6qrj_189"><p id="ng6qrj_193">A) Envoyer un message &agrave; une file RabbitMQ.</p></li><li class="list__item" id="ng6qrj_190"><p id="ng6qrj_194">B) D&eacute;clarer une m&eacute;thode comme &eacute;tant un consommateur de messages d'une file RabbitMQ.</p></li><li class="list__item" id="ng6qrj_191"><p id="ng6qrj_195">C) Cr&eacute;er une nouvelle file RabbitMQ.</p></li><li class="list__item" id="ng6qrj_192"><p id="ng6qrj_196">D) Configurer la connexion &agrave; RabbitMQ.</p></li></ul></li></ol></section><div class="last-modified">17 juillet 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="012-01-tp-12.html" class="navigation-links__prev">TP 12 : Analyse de Requ&ecirc;tes avec Zipkin</a><a href="013-01-tp-13.html" class="navigation-links__next">TP 13 : D&eacute;couplage de Services avec RabbitMQ</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>