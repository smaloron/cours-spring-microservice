<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-27T21:24:57.217197"><title>TP 4 : Le Dialogue s'installe - Cr&eacute;ation et Communication avec un second service | Spring Micro Services</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs Pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction-le-premier-appel","level":0,"title":"Introduction : Le premier appel","anchor":"#introduction-le-premier-appel"},{"id":"tape-1-cr-ation-du-order-service","level":0,"title":"Étape 1 : Création du order-service","anchor":"#tape-1-cr-ation-du-order-service"},{"id":"tape-2-configuration-initiale-de-order-service","level":0,"title":"Étape 2 : Configuration initiale de order-service","anchor":"#tape-2-configuration-initiale-de-order-service"},{"id":"tape-3-impl-mentation-de-la-logique-m-tier-de-order-service","level":0,"title":"Étape 3 : Implémentation de la logique métier de order-service","anchor":"#tape-3-impl-mentation-de-la-logique-m-tier-de-order-service"},{"id":"tape-4-cr-ation-du-client-feign","level":0,"title":"Étape 4 : Création du Client Feign","anchor":"#tape-4-cr-ation-du-client-feign"},{"id":"tape-5-utilisation-du-client-feign-dans-le-controller","level":0,"title":"Étape 5 : Utilisation du client Feign dans le Controller","anchor":"#tape-5-utilisation-du-client-feign-dans-le-controller"},{"id":"tape-6-test-de-bout-en-bout","level":0,"title":"Étape 6 : Test de bout en bout","anchor":"#tape-6-test-de-bout-en-bout"},{"id":"tape-7-dockerisation-de-order-service","level":0,"title":"Étape 7 : Dockerisation de order-service","anchor":"#tape-7-dockerisation-de-order-service"},{"id":"exercice-7-gestion-d-un-produit-non-trouv","level":0,"title":"Exercice 7 : Gestion d\u0027un produit non trouvé","anchor":"#exercice-7-gestion-d-un-produit-non-trouv"},{"id":"auto-valuation","level":0,"title":"Auto-évaluation","anchor":"#auto-valuation"},{"id":"conclusion","level":0,"title":"Conclusion","anchor":"#conclusion"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="TP 4 : Le Dialogue s'installe - Cr&eacute;ation et Communication avec un second service | Spring Micro Services"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Spring Micro Services Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/004-03-tp-4.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="TP 4 : Le Dialogue s'installe - Cr&eacute;ation et Communication avec un second service | Spring Micro Services"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/004-03-tp-4.html#webpage",
    "url": "writerside-documentation/004-03-tp-4.html",
    "name": "TP 4 : Le Dialogue s'installe - Cr&eacute;ation et Communication avec un second service | Spring Micro Services",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Spring Micro Services Help"
}</script><!-- End Schema.org --></head><body data-id="004-03-TP-4" data-main-title="TP 4 : Le Dialogue s'installe - Création et Communication avec un second service" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="004-00-service-discovery.md|Module 4 : La Découverte de Services - Qui est où ? (L'essentiel)"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Spring Micro Services  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="004-03-TP-4" id="004-03-TP-4.md">TP 4 : Le Dialogue s'installe - Création et Communication avec un second service</h1><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs P&eacute;dagogiques</h2><p id="q04a75_15">&Agrave; la fin de ce TP, vous serez capable de :</p><ul class="list _bullet" id="q04a75_16"><li class="list__item" id="q04a75_17"><p id="q04a75_22">Cr&eacute;er un second microservice (<code class="code" id="q04a75_23">order-service</code>) et le configurer comme client Eureka.</p></li><li class="list__item" id="q04a75_18"><p id="q04a75_24">Activer et configurer OpenFeign pour la communication inter-service.</p></li><li class="list__item" id="q04a75_19"><p id="q04a75_25">Cr&eacute;er une interface client Feign pour appeler <code class="code" id="q04a75_26">product-service</code> par son nom d'application.</p></li><li class="list__item" id="q04a75_20"><p id="q04a75_27">Impl&eacute;menter un endpoint dans <code class="code" id="q04a75_28">order-service</code> qui r&eacute;cup&egrave;re des donn&eacute;es de <code class="code" id="q04a75_29">product-service</code>.</p></li><li class="list__item" id="q04a75_21"><p id="q04a75_30">Dockeriser le <code class="code" id="q04a75_31">order-service</code>.</p></li></ul></section><section class="chapter"><h2 id="introduction-le-premier-appel" data-toc="introduction-le-premier-appel">Introduction : Le premier appel</h2><p id="q04a75_32">Jusqu'&agrave; pr&eacute;sent, nos services vivaient dans leur coin. Le <code class="code" id="q04a75_35">product-service</code> g&egrave;re ses livres, et le serveur Eureka tient son annuaire. Il est temps d'introduire un nouvel acteur, le <code class="code" id="q04a75_36">order-service</code>, qui va avoir besoin de discuter avec le premier. Le sc&eacute;nario est simple : pour cr&eacute;er une commande, le <code class="code" id="q04a75_37">order-service</code> doit pouvoir v&eacute;rifier qu'un produit existe et conna&icirc;tre ses informations (notamment son prix).</p><p id="q04a75_33">C'est ici que la magie de Spring Cloud va op&eacute;rer. Nous allons utiliser <span class="control" id="q04a75_38">OpenFeign</span>, notre client REST d&eacute;claratif. Mais cette fois, au lieu de lui donner une URL en dur, nous allons lui dire : &quot;Je veux parler au service qui s'appelle <code class="code" id="q04a75_39">PRODUCT-SERVICE</code> &quot;. OpenFeign va alors automatiquement interroger <span class="control" id="q04a75_40">Eureka</span> pour trouver l'adresse de ce service, puis effectuer l'appel.</p><p id="q04a75_34">Le <code class="code" id="q04a75_41">order-service</code> n'aura jamais connaissance de l'IP ou du port du <code class="code" id="q04a75_42">product-service</code>. Notre communication sera enfin dynamique, r&eacute;siliente et pr&ecirc;te pour la scalabilit&eacute;. C'est le c&oelig;ur battant d'une architecture microservices. Mettons-le en place !</p></section><section class="chapter"><h2 id="tape-1-cr-ation-du-order-service" data-toc="tape-1-cr-ation-du-order-service">&Eacute;tape 1 : Cr&eacute;ation du <code class="code" id="q04a75_45">order-service</code></h2><section class="procedure-steps" id="q04a75_44"><p id="q04a75_46">Comme pour les services pr&eacute;c&eacute;dents, nous commen&ccedil;ons par le Spring Initializr.</p><p id="q04a75_47"><b id="q04a75_50">Configuration du projet sur start.spring.io :</b></p><ul class="list _bullet" id="q04a75_48"><li class="list__item" id="q04a75_51"><p><b id="q04a75_54">Project :</b> Maven Project, <b id="q04a75_55">Language :</b> Java, <b id="q04a75_56">Spring Boot :</b> 3.2.x, <b id="q04a75_57">Java :</b> 17</p></li><li class="list__item" id="q04a75_52"><p><b id="q04a75_58">Project Metadata :</b></p><ul class="list _bullet" id="q04a75_59"><li class="list__item" id="q04a75_60"><p><b id="q04a75_63">Group :</b> <code class="code" id="q04a75_64">fr.formation.spring</code></p></li><li class="list__item" id="q04a75_61"><p><b id="q04a75_65">Artifact :</b> <code class="code" id="q04a75_66">order-service</code></p></li><li class="list__item" id="q04a75_62"><p><b id="q04a75_67">Package name :</b> <code class="code" id="q04a75_68">fr.formation.spring.orderservice</code></p></li></ul></li><li class="list__item" id="q04a75_53"><p><b id="q04a75_69">Dependencies :</b></p><ul class="list _bullet" id="q04a75_70"><li class="list__item" id="q04a75_71"><p><code class="code" id="q04a75_77">Spring Web</code></p></li><li class="list__item" id="q04a75_72"><p><code class="code" id="q04a75_78">Spring Data JPA</code></p></li><li class="list__item" id="q04a75_73"><p><code class="code" id="q04a75_79">H2 Database</code></p></li><li class="list__item" id="q04a75_74"><p><code class="code" id="q04a75_80">Lombok</code></p></li><li class="list__item" id="q04a75_75"><p><code class="code" id="q04a75_81">Eureka Client</code> (Spring Cloud Discovery)</p></li><li class="list__item" id="q04a75_76"><p><code class="code" id="q04a75_82">OpenFeign</code> (Spring Cloud OpenFeign)</p></li></ul></li></ul><p id="q04a75_49">G&eacute;n&eacute;rez, t&eacute;l&eacute;chargez et ouvrez ce nouveau projet dans votre IDE.</p><ol class="list _decimal"></ol></section></section><section class="chapter"><h2 id="tape-2-configuration-initiale-de-order-service" data-toc="tape-2-configuration-initiale-de-order-service">&Eacute;tape 2 : Configuration initiale de <code class="code" id="q04a75_86">order-service</code></h2><section class="chapter"><h3 id="2-1-fichier-application-properties" data-toc="2-1-fichier-application-properties">2.1. Fichier <code class="code" id="q04a75_90">application.properties</code></h3><p id="q04a75_88">Configurons notre nouveau service. Ouvrez <code class="code" id="q04a75_91">src/main/resources/application.properties</code>.</p><div class="code-block" data-lang="properties">
# Port du service (différent des autres)
server.port=8082
# Nom de l'application, très important pour Eureka !
spring.application.name=order-service
# Configuration H2 (similaire à product-service, mais avec un nom de DB différent)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.datasource.url=jdbc:h2:mem:orderdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=password
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
# Configuration du client Eureka (pointe vers notre serveur)
eureka.client.serviceUrl.defaultZone=http://localhost:8761/eureka
</div></section><section class="chapter"><h3 id="2-2-activation-d-openfeign" data-toc="2-2-activation-d-openfeign">2.2. Activation d'OpenFeign</h3><p id="q04a75_92">Tout comme Eureka, OpenFeign doit &ecirc;tre activ&eacute;. Ouvrez la classe principale <code class="code" id="q04a75_94">OrderServiceApplication.java</code> et ajoutez l'annotation <code class="code" id="q04a75_95">@EnableFeignClients</code>.</p><div class="code-block" data-lang="java">
// package fr.formation.spring.orderservice;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.openfeign.EnableFeignClients;

@SpringBootApplication
@EnableFeignClients // &lt;-- Active la recherche et l'implémentation des clients Feign
public class OrderServiceApplication {

    public static void main(String[] args) {
        SpringApplication.run(OrderServiceApplication.class, args);
    }
}
</div></section></section><section class="chapter"><h2 id="tape-3-impl-mentation-de-la-logique-m-tier-de-order-service" data-toc="tape-3-impl-mentation-de-la-logique-m-tier-de-order-service">&Eacute;tape 3 : Impl&eacute;mentation de la logique m&eacute;tier de <code class="code" id="q04a75_100">order-service</code></h2><p id="q04a75_97">Nous allons cr&eacute;er la structure de base pour g&eacute;rer les commandes.</p><section class="chapter"><h3 id="3-1-entit-s-jpa" data-toc="3-1-entit-s-jpa">3.1. Entit&eacute;s JPA</h3><p id="q04a75_101">Une commande est compos&eacute;e de la commande elle-m&ecirc;me et de lignes de commande.</p><p id="q04a75_102"><code class="code" id="q04a75_106">Order.java</code></p><div class="code-block" data-lang="java">
// package fr.formation.spring.orderservice.model;

import jakarta.persistence.*;
import lombok.Data;

import java.time.LocalDate;
import java.util.List;

@Entity
@Table(name = &quot;orders&quot;) // &quot;order&quot; est un mot-clé SQL, mieux vaut utiliser &quot;orders&quot;
@Data
public class Order {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    private LocalDate orderDate;

    @OneToMany(cascade = CascadeType.ALL)
    private List&lt;OrderItem&gt; orderItems;
}
</div><p id="q04a75_104"><code class="code" id="q04a75_107">OrderItem.java</code></p><div class="code-block" data-lang="java">
// package fr.formation.spring.orderservice.model;

import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import lombok.Data;

@Entity
@Data
public class OrderItem {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    private Long productId; // On stocke juste l'ID du produit
    private int quantity;
    private double price; // Le prix au moment de la commande
}
</div></section><section class="chapter"><h3 id="3-2-repository" data-toc="3-2-repository">3.2. Repository</h3><p id="q04a75_108">Cr&eacute;ons le <code class="code" id="q04a75_110">OrderRepository</code>.</p><div class="code-block" data-lang="java">
// package fr.formation.spring.orderservice.repository;

import fr.formation.spring.orderservice.model.Order;
import org.springframework.data.jpa.repository.JpaRepository;

public interface OrderRepository extends JpaRepository&lt;Order, Long&gt; {
}
</div></section></section><section class="chapter"><h2 id="tape-4-cr-ation-du-client-feign" data-toc="tape-4-cr-ation-du-client-feign">&Eacute;tape 4 : Cr&eacute;ation du Client Feign</h2><p id="q04a75_111">C'est le c&oelig;ur de ce TP. Nous allons cr&eacute;er l'interface qui va nous permettre de parler &agrave; <code class="code" id="q04a75_114">product-service</code>.</p><section class="chapter"><h3 id="4-1-le-dto-data-transfer-object" data-toc="4-1-le-dto-data-transfer-object">4.1. Le DTO (Data Transfer Object)</h3><p id="q04a75_115">Dans <code class="code" id="q04a75_117">order-service</code>, nous avons besoin d'un objet pour repr&eacute;senter les donn&eacute;es que nous recevrons de <code class="code" id="q04a75_118">product-service</code>. Cr&eacute;ez un package <code class="code" id="q04a75_119">dto</code> et ajoutez-y la classe <code class="code" id="q04a75_120">ProductDTO</code>.</p><div class="code-block" data-lang="java">
// package fr.formation.spring.orderservice.dto;

import lombok.Data;

// Cet objet simple (POJO) représente les données d'un produit
// que order-service a besoin de connaître.
@Data
public class ProductDTO {
    private Long id;
    private String name;
    private double price;
    private int stock;
}
</div></section><section class="chapter"><h3 id="4-2-l-interface-du-client-feign" data-toc="4-2-l-interface-du-client-feign">4.2. L'interface du client Feign</h3><p id="q04a75_121">Cr&eacute;ez un package <code class="code" id="q04a75_124">client</code> et ajoutez-y l'interface <code class="code" id="q04a75_125">ProductServiceClient</code>.</p><div class="code-block" data-lang="java">
// package fr.formation.spring.orderservice.client;

import fr.formation.spring.orderservice.dto.ProductDTO;
import org.springframework.cloud.openfeign.FeignClient;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;

// @FeignClient est la clé !
// name = &quot;product-service&quot; : C'est le nom de l'application cible,
// tel qu'il est enregistré dans Eureka. C'est ici que la magie opère.
// Feign va demander à Eureka : &quot;Donne-moi l'adresse de 'product-service'&quot;.
@FeignClient(name = &quot;product-service&quot;)
public interface ProductServiceClient {

    // La signature de cette méthode doit correspondre à l'endpoint
    // du ProductController dans product-service.
    // GET /api/products/{id}
    @GetMapping(&quot;/api/products/{id}&quot;)
    ProductDTO findProductById(@PathVariable(&quot;id&quot;) Long id);
}
</div><aside class="prompt" data-type="warning" data-title="" id="q04a75_123"><p><b id="q04a75_126">Attention &agrave; la casse !</b> Le nom dans <code class="code" id="q04a75_127">@FeignClient(name = &quot;...&quot;)</code> doit correspondre <b id="q04a75_128">exactement</b> &agrave; la valeur de <code class="code" id="q04a75_129">spring.application.name</code> du service cible. Par convention, on utilise des minuscules avec des tirets. Assurez-vous que votre <code class="code" id="q04a75_130">product-service</code> a bien <code class="code" id="q04a75_131">spring.application.name=product-service</code>.</p></aside></section></section><section class="chapter"><h2 id="tape-5-utilisation-du-client-feign-dans-le-controller" data-toc="tape-5-utilisation-du-client-feign-dans-le-controller">&Eacute;tape 5 : Utilisation du client Feign dans le Controller</h2><p id="q04a75_132">Maintenant, nous pouvons cr&eacute;er notre <code class="code" id="q04a75_136">OrderController</code> et y injecter et utiliser notre <code class="code" id="q04a75_137">ProductServiceClient</code> comme s'il s'agissait d'un service local.</p><div class="code-block" data-lang="java">
// package fr.formation.spring.orderservice.controller;

import fr.formation.spring.orderservice.client.ProductServiceClient;
import fr.formation.spring.orderservice.dto.ProductDTO;
import fr.formation.spring.orderservice.model.Order;
import fr.formation.spring.orderservice.model.OrderItem;
import fr.formation.spring.orderservice.repository.OrderRepository;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.time.LocalDate;
import java.util.List;

@RestController
@RequestMapping(&quot;/api/orders&quot;)
public class OrderController {

    private final OrderRepository orderRepository;
    private final ProductServiceClient productServiceClient; // Injection du client Feign

    public OrderController(OrderRepository orderRepository,
                           ProductServiceClient productServiceClient) {
        this.orderRepository = orderRepository;
        this.productServiceClient = productServiceClient;
    }

    // Endpoint pour créer une commande simple pour un produit et une quantité
    // POST http://localhost:8082/api/orders
    // Body: { &quot;productId&quot;: 1, &quot;quantity&quot;: 2 }
    @PostMapping
    public ResponseEntity&lt;Order&gt; createOrder(@RequestBody OrderRequest request) {
        // 1. Appel au product-service via Feign pour récupérer les infos du produit
        ProductDTO product;
        try {
            product = productServiceClient.findProductById(request.productId);
        } catch (Exception e) {
            // Gérer le cas où le produit n'est pas trouvé (Feign lèvera une exception)
            return ResponseEntity.status(HttpStatus.NOT_FOUND)
                    .header(&quot;X-Error-Message&quot;, &quot;Product not found&quot;)
                    .build();
        }

        // 2. Vérifier si le stock est suffisant
        if (product.getStock() &lt; request.quantity) {
            return ResponseEntity.status(HttpStatus.BAD_REQUEST)
                    .header(&quot;X-Error-Message&quot;, &quot;Insufficient stock&quot;)
                    .build();
        }

        // 3. Créer et sauvegarder la commande
        Order order = new Order();
        order.setOrderDate(LocalDate.now());

        OrderItem orderItem = new OrderItem();
        orderItem.setProductId(product.getId());
        orderItem.setQuantity(request.getQuantity());
        orderItem.setPrice(product.getPrice()); // On enregistre le prix actuel

        order.setOrderItems(List.of(orderItem));

        Order savedOrder = orderRepository.save(order);
        return ResponseEntity.status(HttpStatus.CREATED).body(savedOrder);
    }

    // DTO interne pour la requête de création de commande
    @Data
    static class OrderRequest {
        private Long productId;
        private int quantity;
    }
}
</div><p id="q04a75_134">Diagramme de s&eacute;quence de l'appel :</p><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="533px" preserveAspectRatio="none" style="width:930px;height:533px;background:#FFFFFF;" version="1.1" viewBox="0 0 930 533" width="930px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="302.9932" style="stroke:#000000;stroke-width:1.0;" width="10" x="294.5" y="130.6133"/><rect fill="#FFFFFF" height="184.7959" style="stroke:#000000;stroke-width:1.0;" width="10" x="481.5" y="160.4126"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="696.5" y="226.0112"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="851" y="285.6099"/><line style="stroke:#000000;stroke-width:1.0;" x1="28" x2="28" y1="83.0146" y2="451.6064"/><line style="stroke:#000000;stroke-width:1.0;" x1="299" x2="299" y1="83.0146" y2="451.6064"/><line style="stroke:#000000;stroke-width:1.0;" x1="486" x2="486" y1="83.0146" y2="451.6064"/><line style="stroke:#000000;stroke-width:1.0;" x1="701" x2="701" y1="83.0146" y2="451.6064"/><line style="stroke:#000000;stroke-width:1.0;" x1="856" x2="856" y1="83.0146" y2="451.6064"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="31" x="10" y="80.0752">User</text><ellipse cx="28.5" cy="14" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1.0;"/><path d="M28.5,22 L28.5,49 M15.5,30 L41.5,30 M28.5,49 L15.5,64 M28.5,49 L41.5,64 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="31" x="10" y="464.6816">User</text><ellipse cx="28.5" cy="476.6211" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1.0;"/><path d="M28.5,484.6211 L28.5,511.6211 M15.5,492.6211 L41.5,492.6211 M28.5,511.6211 L15.5,526.6211 M28.5,511.6211 L41.5,526.6211 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="123" x="238" y="51"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="109" x="245" y="72.0752">OrderController</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="123" x="238" y="450.6064"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="109" x="245" y="471.6816">OrderController</text><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="159" x="407" y="33.9854"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="145" x="414" y="55.0605">ProductServiceClient</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="93" x="440" y="72.0752">(Proxy Feign)</text><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="159" x="407" y="450.6064"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="145" x="414" y="471.6816">ProductServiceClient</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="93" x="440" y="488.6963">(Proxy Feign)</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="113" x="645" y="51"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="99" x="652" y="72.0752">Eureka Server</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="113" x="645" y="450.6064"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="99" x="652" y="471.6816">Eureka Server</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="136" x="788" y="51"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="122" x="795" y="72.0752">ProductController</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="136" x="788" y="450.6064"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="122" x="795" y="471.6816">ProductController</text><rect fill="#FFFFFF" height="302.9932" style="stroke:#000000;stroke-width:1.0;" width="10" x="294.5" y="130.6133"/><rect fill="#FFFFFF" height="184.7959" style="stroke:#000000;stroke-width:1.0;" width="10" x="481.5" y="160.4126"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="696.5" y="226.0112"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="851" y="285.6099"/><polygon fill="#000000" points="282.5,126.6133,292.5,130.6133,282.5,134.6133,286.5,130.6133" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="28.5" x2="288.5" y1="130.6133" y2="130.6133"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="115" x="35.5" y="110.0845">POST /api/orders</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="171" x="35.5" y="125.8838">{productId:1, quantity:2}</text><polygon fill="#000000" points="469.5,156.4126,479.5,160.4126,469.5,164.4126,473.5,160.4126" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="304.5" x2="475.5" y1="160.4126" y2="160.4126"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125" x="311.5" y="155.6831">findProductById(1)</text><path d="M496,173.4126 L496,198.4126 L772,198.4126 L772,183.4126 L762,173.4126 L496,173.4126 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M762,173.4126 L762,183.4126 L772,183.4126 L762,173.4126 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="255" x="502" y="191.4824">Au premier appel (ou si cache expir&#233;)</text><polygon fill="#000000" points="684.5,222.0112,694.5,226.0112,684.5,230.0112,688.5,226.0112" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="491.5" x2="690.5" y1="226.0112" y2="226.0112"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="186" x="498.5" y="221.2817">Discover("product-service")</text><polygon fill="#000000" points="502.5,251.8105,492.5,255.8105,502.5,259.8105,498.5,255.8105" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="496.5" x2="700.5" y1="255.8105" y2="255.8105"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137" x="508.5" y="251.0811">"192.168.1.10:8081"</text><polygon fill="#000000" points="839,281.6099,849,285.6099,839,289.6099,843,285.6099" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="491.5" x2="845" y1="285.6099" y2="285.6099"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="303" x="498.5" y="280.8804">GET http://192.168.1.10:8081/api/products/1</text><polygon fill="#000000" points="502.5,311.4092,492.5,315.4092,502.5,319.4092,498.5,315.4092" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="496.5" x2="855" y1="315.4092" y2="315.4092"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="166" x="508.5" y="310.6797">200 OK, JSON du produit</text><polygon fill="#000000" points="315.5,341.2085,305.5,345.2085,315.5,349.2085,311.5,345.2085" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="309.5" x2="485.5" y1="345.2085" y2="345.2085"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="153" x="321.5" y="340.479">Renvoie le ProductDTO</text><line style="stroke:#000000;stroke-width:1.0;" x1="304.5" x2="346.5" y1="390.8071" y2="390.8071"/><line style="stroke:#000000;stroke-width:1.0;" x1="346.5" x2="346.5" y1="390.8071" y2="403.8071"/><line style="stroke:#000000;stroke-width:1.0;" x1="305.5" x2="346.5" y1="403.8071" y2="403.8071"/><polygon fill="#000000" points="315.5,399.8071,305.5,403.8071,315.5,407.8071,311.5,403.8071" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="119" x="311.5" y="370.2783">Cr&#233;e l'objet Order</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="112" x="311.5" y="386.0776">et le sauvegarde</text><polygon fill="#000000" points="39.5,429.6064,29.5,433.6064,39.5,437.6064,35.5,433.6064" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="33.5" x2="298.5" y1="433.6064" y2="433.6064"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="242" x="45.5" y="428.877">201 Created, JSON de la commande</text><!--SRC=[RP9DRjim48NtFCLKczg0RPbU5AuM0LBb1sc1ogZTdJUCDB6dbKcMeemOHG_KS_HY7KfChQJP4THyxxrvr1k_nmE2hHLfeKfl77njq0bXbVDKabNQGrAu2brkj7Uchj4be1eeykSpAsUgjlHhT4SgCQy9jT_g4Ly_dk06QQV77TSTdwFNhSFl2W8QnVkRLmrUn5ZbGeJ4CBtWI931gbXl85MMKXDIDrlzq_RaNPN92VneMOtyALly2WlJKNaComYcMQEBnp8FfAle-E5qLuta-3pTho2quREZtTw3UVW7NhPW7Hw88obhiOQHQQ4XA5MvHy17I-xFxx7enzamBf_15JMbuG96ISmxRVekau5rB2P2qq7WHBvVpEIxvKpEv3nRpfSo4HM-1C- -gr3MxVK6zjxRB4t_mxiEOvGcbUSCeNAcX-QB-HoAJnFuk2u-GnKQO8pyC01JqVlffRwWFXf2gFbZRtErAOP8xBb_c0x9kJi6tfhxR-YX-ostcayiqQZsY3l5Lnt0HFTRX6oIEMJ1wYaWIoWepU6WD8yF78lyBm00]--></g></svg></div></section><section class="chapter"><h2 id="tape-6-test-de-bout-en-bout" data-toc="tape-6-test-de-bout-en-bout">&Eacute;tape 6 : Test de bout en bout</h2><ol class="list _decimal" id="q04a75_138" type="1"><li class="list__item" id="q04a75_142"><p id="q04a75_146">Assurez-vous que votre conteneur <code class="code" id="q04a75_147">eureka-server</code> est lanc&eacute;.</p></li><li class="list__item" id="q04a75_143"><p id="q04a75_148">Lancez <code class="code" id="q04a75_149">product-service</code> depuis votre IDE. V&eacute;rifiez qu'il est bien enregistr&eacute; dans Eureka.</p></li><li class="list__item" id="q04a75_144"><p id="q04a75_150">Lancez <code class="code" id="q04a75_151">order-service</code> depuis votre IDE. V&eacute;rifiez qu'il s'enregistre aussi dans Eureka.</p></li><li class="list__item" id="q04a75_145"><p id="q04a75_152">Avec votre client HTTP, faites un appel pour cr&eacute;er une commande :</p></li></ol><div class="code-block" data-lang="http">
### Create an order
POST http://localhost:8082/api/orders
Content-Type: application/json

{
  &quot;productId&quot;: 1,
  &quot;quantity&quot;: 2
}

</div><p id="q04a75_140">Si tout se passe bien, vous devriez recevoir un statut <code class="code" id="q04a75_153">201 Created</code> et le JSON de la commande qui a &eacute;t&eacute; cr&eacute;&eacute;e. Dans la console de <code class="code" id="q04a75_154">order-service</code>, vous devriez voir la logique s'ex&eacute;cuter, et dans la console de <code class="code" id="q04a75_155">product-service</code>, vous devriez voir une ligne de log indiquant qu'il a re&ccedil;u une requ&ecirc;te sur <code class="code" id="q04a75_156">/api/products/1</code>.</p><p id="q04a75_141">F&eacute;licitations, vos deux services ont communiqu&eacute; via Eureka !</p></section><section class="chapter"><h2 id="tape-7-dockerisation-de-order-service" data-toc="tape-7-dockerisation-de-order-service">&Eacute;tape 7 : Dockerisation de <code class="code" id="q04a75_162">order-service</code></h2><p id="q04a75_158">Le processus est identique &agrave; celui des autres services.</p><ol class="list _decimal" id="q04a75_159" type="1"><li class="list__item" id="q04a75_163"><p id="q04a75_165">Cr&eacute;ez le <code class="code" id="q04a75_167">Dockerfile</code> &agrave; la racine de <code class="code" id="q04a75_168">order-service</code>.</p><div class="code-block" data-lang="dockerfile">
# ----- STAGE 1: Build -----
FROM maven:3.8.5-openjdk-17 AS build
WORKDIR /app
COPY pom.xml .
RUN mvn dependency:go-offline
COPY src ./src
RUN mvn package -DskipTests

# ----- STAGE 2: Runtime -----
FROM eclipse-temurin:17-jre-focal
WORKDIR /app
COPY --from=build /app/target/*.jar app.jar
EXPOSE 8082
ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;app.jar&quot;]
</div></li><li class="list__item" id="q04a75_164"><p id="q04a75_169">Construisez l'image :</p></li></ol><div class="code-block" data-lang="bash">
mvn clean package
docker build -t order-service:1.0 .
</div></section><section class="chapter"><h2 id="exercice-7-gestion-d-un-produit-non-trouv" data-toc="exercice-7-gestion-d-un-produit-non-trouv">Exercice 7 : Gestion d'un produit non trouv&eacute;</h2><p id="q04a75_170"><span class="control" id="q04a75_175">Contexte :</span> Dans le <code class="code" id="q04a75_176">OrderController</code>, nous avons un bloc <code class="code" id="q04a75_177">try-catch</code> basique. Si le <code class="code" id="q04a75_178">product-service</code> renvoie une erreur 404 (car le produit n'existe pas), Feign l&egrave;ve une <code class="code" id="q04a75_179">FeignException</code>.</p><p id="q04a75_171"><span class="control" id="q04a75_180">Votre mission :</span></p><ol class="list _decimal" id="q04a75_172" type="1"><li class="list__item" id="q04a75_181"><p id="q04a75_184">Faites un appel &agrave; <code class="code" id="q04a75_185">POST /api/orders</code> avec un <code class="code" id="q04a75_186">productId</code> qui n'existe pas (ex: 999). Observez la r&eacute;ponse.</p></li><li class="list__item" id="q04a75_182"><p id="q04a75_187">Am&eacute;liorez la gestion d'erreur. Actuellement, notre <code class="code" id="q04a75_188">catch(Exception e)</code> est trop g&eacute;n&eacute;rique. Modifiez le <code class="code" id="q04a75_189">catch</code> pour intercepter sp&eacute;cifiquement une <code class="code" id="q04a75_190">FeignException.NotFound</code>.</p></li><li class="list__item" id="q04a75_183"><p id="q04a75_191">&Agrave; l'int&eacute;rieur de ce <code class="code" id="q04a75_192">catch</code> sp&eacute;cifique, retournez une r&eacute;ponse <code class="code" id="q04a75_193">404 Not Found</code> avec un message d'erreur plus clair dans le corps de la r&eacute;ponse, sous forme de JSON. Par exemple : <code class="code" id="q04a75_194">{ &quot;error&quot;: &quot;Product not found&quot;, &quot;productId&quot;: 999 }</code>.</p></li></ol><p id="q04a75_173"><span class="control" id="q04a75_195">Indice :</span> Vous pouvez cr&eacute;er une petite classe ou un <code class="code" id="q04a75_196">Map</code> pour construire le corps de la r&eacute;ponse d'erreur.</p><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="correction-exercice-7" data-toc="correction-exercice-7">Correction exercice 7</h3></div><div class="collapse__content"><p id="q04a75_197">Voici le <code class="code" id="q04a75_203">OrderController</code> modifi&eacute; avec une meilleure gestion d'erreur.</p><div class="code-block" data-lang="java">
// package fr.formation.spring.orderservice.controller;

// ... (imports existants)

import feign.FeignException;

import java.util.Map;

// ...

@RestController
@RequestMapping(&quot;/api/orders&quot;)
public class OrderController {
    // ... (injection de dépendances)

    @PostMapping
    public ResponseEntity&lt;?&gt; createOrder(@RequestBody OrderRequest request) {
        ProductDTO product;
        try {
            product = productServiceClient.findProductById(request.productId);
        } catch (FeignException.NotFound ex) {
            // Catch spécifique pour les erreurs 404 de Feign
            // On construit une réponse d'erreur claire
            Map&lt;String, Object&gt; errorBody = Map.of(
                    &quot;error&quot;, &quot;Product not found&quot;,
                    &quot;productId&quot;, request.productId
            );
            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(errorBody);
        } catch (Exception e) {
            // Catch générique pour les autres erreurs (ex: product-service est down)
            Map&lt;String, Object&gt; errorBody = Map.of(
                    &quot;error&quot;, &quot;An unexpected error occurred with product service&quot;,
                    &quot;message&quot;, e.getMessage()
            );
            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)
                    .body(errorBody);
        }

        // ... (suite de la logique inchangée : stock, création commande)

        // ...
        // Pour que la signature de la méthode compile, il faut que le retour soit
        // compatible avec ResponseEntity&lt;?&gt;
        Order order = new Order();
        // ... (remplir l'objet order) ...
        order.setOrderDate(LocalDate.now());

        OrderItem orderItem = new OrderItem();
        orderItem.setProductId(product.getId());
        orderItem.setQuantity(request.getQuantity());
        orderItem.setPrice(product.getPrice());

        order.setOrderItems(List.of(orderItem));

        Order savedOrder = orderRepository.save(order);
        return ResponseEntity.status(HttpStatus.CREATED).body(savedOrder);
    }

    // ... (OrderRequest DTO)
}
</div><p id="q04a75_199">Maintenant, un appel avec un <code class="code" id="q04a75_204">productId</code> de 999 renverra un code 404 et le corps JSON :</p><div class="code-block" data-lang="json">
{
  &quot;error&quot;: &quot;Product not found&quot;,
  &quot;productId&quot;: 999
}
</div><p id="q04a75_201">C'est beaucoup plus informatif pour le client de l'API.</p></div></div></section></section><section class="chapter"><h2 id="auto-valuation" data-toc="auto-valuation">Auto-&eacute;valuation</h2><ol class="list _decimal" id="q04a75_205" type="1"><li class="list__item" id="q04a75_207"><p id="q04a75_212"><span class="control" id="q04a75_214">(QCM)</span> Quelle annotation est n&eacute;cessaire dans la classe principale pour activer OpenFeign ?</p><ul class="list _bullet" id="q04a75_213"><li class="list__item" id="q04a75_215"><p id="q04a75_219">A) <code class="code" id="q04a75_220">@EnableEurekaClient</code></p></li><li class="list__item" id="q04a75_216"><p id="q04a75_221">B) <code class="code" id="q04a75_222">@EnableFeignClients</code></p></li><li class="list__item" id="q04a75_217"><p id="q04a75_223">C) <code class="code" id="q04a75_224">@EnableDiscoveryClient</code></p></li><li class="list__item" id="q04a75_218"><p id="q04a75_225">D) <code class="code" id="q04a75_226">@EnableCircuitBreaker</code></p></li></ul></li><li class="list__item" id="q04a75_208"><p id="q04a75_227"><span class="control" id="q04a75_228">(Question ouverte)</span> Dans l'annotation <code class="code" id="q04a75_229">@FeignClient(name = &quot;product-service&quot;)</code>, d'o&ugrave; vient la valeur <code class="code" id="q04a75_230">&quot;product-service&quot;</code> et pourquoi est-elle si importante ?</p></li><li class="list__item" id="q04a75_209"><p id="q04a75_231"><span class="control" id="q04a75_233">(QCM)</span> Si je lance 3 instances de <code class="code" id="q04a75_234">product-service</code>, comment Feign+Eureka vont-ils se comporter ?</p><ul class="list _bullet" id="q04a75_232"><li class="list__item" id="q04a75_235"><p id="q04a75_239">A) Ils enverront toujours la requ&ecirc;te &agrave; la premi&egrave;re instance qui s'est enregistr&eacute;e.</p></li><li class="list__item" id="q04a75_236"><p id="q04a75_240">B) Ils enverront une requ&ecirc;te &agrave; chaque instance et retourneront la premi&egrave;re r&eacute;ponse.</p></li><li class="list__item" id="q04a75_237"><p id="q04a75_241">C) Ils feront une r&eacute;partition de charge (load balancing) de type round-robin entre les instances disponibles.</p></li><li class="list__item" id="q04a75_238"><p id="q04a75_242">D) Cela provoquera une erreur.</p></li></ul></li><li class="list__item" id="q04a75_210"><p id="q04a75_243"><span class="control" id="q04a75_244">(Question ouverte)</span> Expliquez pourquoi il est pr&eacute;f&eacute;rable d'utiliser un <code class="code" id="q04a75_245">ProductDTO</code> dans <code class="code" id="q04a75_246">order-service</code> plut&ocirc;t que de partager la classe d'entit&eacute; JPA <code class="code" id="q04a75_247">Product</code> entre les deux services.</p></li><li class="list__item" id="q04a75_211"><p id="q04a75_248"><span class="control" id="q04a75_250">(QCM)</span> Que se passe-t-il si j'appelle <code class="code" id="q04a75_251">order-service</code> alors que <code class="code" id="q04a75_252">product-service</code> est en panne (non enregistr&eacute; dans Eureka) ?</p><ul class="list _bullet" id="q04a75_249"><li class="list__item" id="q04a75_253"><p id="q04a75_257">A) <code class="code" id="q04a75_258">order-service</code> va planter.</p></li><li class="list__item" id="q04a75_254"><p id="q04a75_259">B) L'appel Feign l&egrave;vera une exception, car Eureka ne trouvera aucune instance pour &quot;product-service&quot;.</p></li><li class="list__item" id="q04a75_255"><p id="q04a75_260">C) L'appel va attendre ind&eacute;finiment que <code class="code" id="q04a75_261">product-service</code> revienne.</p></li><li class="list__item" id="q04a75_256"><p id="q04a75_262">D) Eureka va automatiquement d&eacute;marrer une nouvelle instance de <code class="code" id="q04a75_263">product-service</code>.</p></li></ul></li></ol></section><section class="chapter"><h2 id="conclusion" data-toc="conclusion">Conclusion</h2><p id="q04a75_264">Quel accomplissement ! Vous avez construit une cha&icirc;ne de communication compl&egrave;te et dynamique entre deux microservices. Ce TP est la synth&egrave;se de tout ce que nous avons vu jusqu'&agrave; pr&eacute;sent :</p><ul class="list _bullet" id="q04a75_265"><li class="list__item" id="q04a75_268"><p id="q04a75_272">Nous avons cr&eacute;&eacute; <span class="control" id="q04a75_273">deux services autonomes</span> (<code class="code" id="q04a75_274">product-service</code> et <code class="code" id="q04a75_275">order-service</code>).</p></li><li class="list__item" id="q04a75_269"><p id="q04a75_276">Nous les avons mis en bo&icirc;te avec <span class="control" id="q04a75_277">Docker</span>.</p></li><li class="list__item" id="q04a75_270"><p id="q04a75_278">Nous les avons rendus d&eacute;couvrables gr&acirc;ce &agrave; <span class="control" id="q04a75_279">Eureka</span>.</p></li><li class="list__item" id="q04a75_271"><p id="q04a75_280">Et nous les avons fait communiquer &eacute;l&eacute;gamment via <span class="control" id="q04a75_281">OpenFeign</span>, sans la moindre URL en dur.</p></li></ul><p id="q04a75_266">Vous avez touch&eacute; du doigt la puissance et la flexibilit&eacute; de l'&eacute;cosyst&egrave;me Spring Cloud. La capacit&eacute; de <code class="code" id="q04a75_282">order-service</code> &agrave; appeler <code class="code" id="q04a75_283">product-service</code> en connaissant uniquement son nom logique est la cl&eacute; de vo&ucirc;te des architectures distribu&eacute;es.</p><p id="q04a75_267">Cependant, notre configuration commence &agrave; se complexifier. Chaque service a son propre fichier <code class="code" id="q04a75_284">application.properties</code>, et certaines configurations (comme l'URL d'Eureka) sont dupliqu&eacute;es. Que se passe-t-il si nous avons 50 services ? C'est le probl&egrave;me que nous allons r&eacute;soudre dans le prochain module en introduisant la <span class="control" id="q04a75_285">Configuration Centralis&eacute;e</span> avec Spring Cloud Config Server.</p></section><div class="last-modified">16 juillet 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="004-02-tp-3.html" class="navigation-links__prev">TP 3 : &quot;Je suis l&agrave; !&quot; - Enregistrement des services aupr&egrave;s d'Eureka</a><a href="005-00-centralized-configuration.html" class="navigation-links__next">Module 5 : La Configuration Centralis&eacute;e (L'essentiel)</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>