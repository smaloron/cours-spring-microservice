<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-31T13:08:47.309648"><title>Module 11 : Monitoring et M&eacute;triques (Prometheus &amp; Grafana) - Prendre le pouls du syst&egrave;me | Spring Micro Services</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs Pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction-le-tableau-de-bord-du-pilote","level":0,"title":"Introduction : Le tableau de bord du pilote","anchor":"#introduction-le-tableau-de-bord-du-pilote"},{"id":"la-stack-prometheus-grafana-nos-cadrans-et-jauges","level":0,"title":"La Stack Prometheus \u0026 Grafana : Nos Cadrans et Jauges","anchor":"#la-stack-prometheus-grafana-nos-cadrans-et-jauges"},{"id":"micrometer-la-fa-ade-d-instrumentation","level":0,"title":"Micrometer : La Façade d\u0027Instrumentation","anchor":"#micrometer-la-fa-ade-d-instrumentation"},{"id":"types-de-m-triques-surveiller","level":0,"title":"Types de Métriques à Surveiller","anchor":"#types-de-m-triques-surveiller"},{"id":"conclusion-de-la-partie","level":0,"title":"Conclusion de la partie","anchor":"#conclusion-de-la-partie"},{"id":"auto-valuation","level":0,"title":"Auto-évaluation","anchor":"#auto-valuation"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Module 11 : Monitoring et M&eacute;triques (Prometheus &amp; Grafana) - Prendre le pouls du syst&egrave;me | Spring Micro Services"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Spring Micro Services Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/011-00-monitoring.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Module 11 : Monitoring et M&eacute;triques (Prometheus &amp; Grafana) - Prendre le pouls du syst&egrave;me | Spring Micro Services"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/011-00-monitoring.html#webpage",
    "url": "writerside-documentation/011-00-monitoring.html",
    "name": "Module 11 : Monitoring et M&eacute;triques (Prometheus &amp; Grafana) - Prendre le pouls du syst&egrave;me | Spring Micro Services",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Spring Micro Services Help"
}</script><!-- End Schema.org --></head><body data-id="011-00-monitoring" data-main-title="Module 11 : Monitoring et Métriques (Prometheus & Grafana) - Prendre le pouls du système" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Spring Micro Services  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="011-00-monitoring" id="011-00-monitoring.md">Module 11 : Monitoring et Métriques (Prometheus & Grafana) - Prendre le pouls du système</h1><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs P&eacute;dagogiques</h2><p id="puyf4_10">&Agrave; la fin de ce module, vous serez capable de :</p><ul class="list _bullet" id="puyf4_11"><li class="list__item" id="puyf4_12"><p id="puyf4_17">Diff&eacute;rencier le monitoring (m&eacute;triques) du logging.</p></li><li class="list__item" id="puyf4_13"><p id="puyf4_18">Expliquer le r&ocirc;le de Spring Boot Actuator pour exposer des m&eacute;triques.</p></li><li class="list__item" id="puyf4_14"><p id="puyf4_19">D&eacute;crire le mod&egrave;le de collecte de Prometheus (scraping).</p></li><li class="list__item" id="puyf4_15"><p id="puyf4_20">Pr&eacute;senter Grafana comme outil de visualisation et de cr&eacute;ation de tableaux de bord.</p></li><li class="list__item" id="puyf4_16"><p id="puyf4_21">Comprendre le r&ocirc;le de Micrometer comme fa&ccedil;ade d'instrumentation.</p></li></ul></section><section class="chapter"><h2 id="introduction-le-tableau-de-bord-du-pilote" data-toc="introduction-le-tableau-de-bord-du-pilote">Introduction : Le tableau de bord du pilote</h2><p id="puyf4_22">Dans le module pr&eacute;c&eacute;dent, nous avons install&eacute; une &quot;bo&icirc;te noire&quot; (EFK) dans notre voiture. Si un accident se produit, nous pouvons l'analyser pour comprendre ce qui s'est pass&eacute;. C'est essentiel, mais c'est r&eacute;actif.</p><p id="puyf4_23">Maintenant, nous allons &eacute;quiper notre voiture d'un <span class="control" id="puyf4_25">tableau de bord</span>. Nous voulons voir en temps r&eacute;el la vitesse, le r&eacute;gime moteur, la temp&eacute;rature de l'huile, le niveau de carburant... Ce sont des <span class="control" id="puyf4_26">m&eacute;triques</span>. Elles nous permettent de savoir si tout va bien <span class="emphasis" id="puyf4_27">maintenant</span>, et de d&eacute;tecter des probl&egrave;mes <span class="emphasis" id="puyf4_28">avant</span> qu'ils ne provoquent un accident. Par exemple, si la temp&eacute;rature du moteur monte en fl&egrave;che, on peut s'arr&ecirc;ter avant que le moteur ne casse.</p><p id="puyf4_24">Le <span class="control" id="puyf4_29">monitoring</span> est l'activit&eacute; qui consiste &agrave; collecter, agr&eacute;ger et visualiser ces m&eacute;triques. Le <span class="control" id="puyf4_30">logging</span> raconte ce qui <span class="emphasis" id="puyf4_31">s'est pass&eacute;</span>, le <span class="control" id="puyf4_32">monitoring</span> d&eacute;crit ce qui <span class="emphasis" id="puyf4_33">se passe</span>.</p></section><section class="chapter"><h2 id="la-stack-prometheus-grafana-nos-cadrans-et-jauges" data-toc="la-stack-prometheus-grafana-nos-cadrans-et-jauges">La Stack Prometheus &amp; Grafana : Nos Cadrans et Jauges</h2><p id="puyf4_34">Pour mettre en place le monitoring, nous allons utiliser une autre stack tr&egrave;s populaire, souvent en compl&eacute;ment d'EFK.</p><ul class="list _bullet" id="puyf4_35"><li class="list__item" id="puyf4_37"><p id="puyf4_40"><span class="control" id="puyf4_41">Spring Boot Actuator (Le Capteur) :</span> C'est un projet de Spring Boot qui &quot;instrumente&quot; notre application. En ajoutant simplement une d&eacute;pendance, notre service va automatiquement exposer un ensemble de &quot;capteurs&quot; via des endpoints HTTP (par exemple, <code class="code" id="puyf4_42">/actuator/health</code>, <code class="code" id="puyf4_43">/actuator/metrics</code>). Ces capteurs fournissent des informations sur la sant&eacute; de l'application, l'&eacute;tat de la JVM, le nombre de requ&ecirc;tes HTTP re&ccedil;ues, leur temps de r&eacute;ponse, etc.</p></li><li class="list__item" id="puyf4_38"><p id="puyf4_44"><span class="control" id="puyf4_45">Prometheus (La Base de Donn&eacute;es Temporelles) :</span> Prometheus est une base de donn&eacute;es open-source sp&eacute;cifiquement con&ccedil;ue pour stocker des <span class="control" id="puyf4_46">s&eacute;ries temporelles</span> (time series), c'est-&agrave;-dire des m&eacute;triques avec un timestamp. Son mod&egrave;le de fonctionnement est bas&eacute; sur le <span class="control" id="puyf4_47">pull</span> (tirer) : &agrave; intervalle r&eacute;gulier (ex: toutes les 15 secondes), Prometheus va lui-m&ecirc;me contacter les endpoints <code class="code" id="puyf4_48">/actuator/prometheus</code> de tous nos microservices pour &quot;gratter&quot; (to scrape) les derni&egrave;res valeurs des m&eacute;triques et les stocker.</p></li><li class="list__item" id="puyf4_39"><p id="puyf4_49"><span class="control" id="puyf4_50">Grafana (Le Tableau de Bord) :</span> Grafana est l'outil de visualisation. Il se connecte &agrave; une source de donn&eacute;es (comme Prometheus) et permet de cr&eacute;er des tableaux de bord magnifiques et interactifs avec des graphiques, des jauges, des alertes, etc. C'est ici que nous allons visualiser l'&eacute;tat de sant&eacute; de notre syst&egrave;me.</p></li></ul><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="345px" preserveAspectRatio="none" style="width:1075px;height:345px;background:#FFFFFF;" version="1.1" viewBox="0 0 1075 345" width="1075px" zoomAndPan="magnify"><defs/><g><!--cluster Nos Microservices--><g id="cluster_Nos Microservices"><path d="M242,139.03 L384,139.03 A3.75,3.75 0 0 1 386.5,141.53 L393.5,162.0446 L800,162.0446 A2.5,2.5 0 0 1 802.5,164.5446 L802.5,335.54 A2.5,2.5 0 0 1 800,338.04 L242,338.04 A2.5,2.5 0 0 1 239.5,335.54 L239.5,141.53 A2.5,2.5 0 0 1 242,139.03 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="239.5" x2="393.5" y1="162.0446" y2="162.0446"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="141" x="243.5" y="155.1052">Nos Microservices</text></g><!--cluster PS--><g id="cluster_PS"><rect fill="#FFFFFF" height="115.01" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="292" x="271.5" y="191.03"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="123" x="356" y="207.1052">Product Service</text></g><!--cluster OS--><g id="cluster_OS"><rect fill="#FFFFFF" height="115.01" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="167" x="603.5" y="191.03"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="107" x="633.5" y="207.1052">Order Service</text></g><!--entity ActPS--><g id="elem_ActPS"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="100" x="295.5" y="235.03"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="375.5" y="240.03"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="373.5" y="242.03"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="373.5" y="246.03"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="60" x="310.5" y="269.1052">Actuator</text></g><!--entity Metrics--><g id="elem_Metrics"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="90" x="430.5" y="235.03"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="500.5" y="240.03"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="498.5" y="242.03"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="498.5" y="246.03"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="50" x="445.5" y="269.1052">Metrics</text></g><!--entity ActOS--><g id="elem_ActOS"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="100" x="627.5" y="235.03"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="707.5" y="240.03"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="705.5" y="242.03"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="705.5" y="246.03"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="60" x="642.5" y="269.1052">Actuator</text></g><!--entity Prometheus--><g id="elem_Prometheus"><path d="M306.5,22.5 C306.5,12.5 395.5,12.5 395.5,12.5 C395.5,12.5 484.5,12.5 484.5,22.5 L484.5,65.5293 C484.5,75.5293 395.5,75.5293 395.5,75.5293 C395.5,75.5293 306.5,75.5293 306.5,65.5293 L306.5,22.5 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M306.5,22.5 C306.5,32.5 395.5,32.5 395.5,32.5 C395.5,32.5 484.5,32.5 484.5,22.5 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="83" x="316.5" y="50.5752">Prometheus</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="158" x="316.5" y="67.5898">(Stockage &amp; Scraping)</text></g><!--entity Web Browser--><g id="elem_Web Browser"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="132" x="519.5" y="20.5"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="631.5" y="25.5"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="629.5" y="27.5"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="629.5" y="31.5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="92" x="534.5" y="54.5752">Web Browser</text></g><!--entity Grafana\n(Visualisation)--><g id="elem_Grafana\n(Visualisation)"><rect fill="#FFFFFF" height="64.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="140" x="686.5" y="12"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="806.5" y="17"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="804.5" y="19"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="804.5" y="23"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="55" x="701.5" y="46.0752">Grafana</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="100" x="701.5" y="63.0898">(Visualisation)</text></g><!--entity Grafana--><g id="elem_Grafana"><rect fill="#FFFFFF" height="47.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="95" x="29" y="20.5"/><rect fill="#FFFFFF" height="10" style="stroke:#000000;stroke-width:1.0;" width="15" x="104" y="25.5"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="102" y="27.5"/><rect fill="#FFFFFF" height="2" style="stroke:#000000;stroke-width:1.0;" width="4" x="102" y="31.5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="55" x="44" y="54.5752">Grafana</text></g><g id="elem_N1"><path d="M11,237.73 L11,279.3286 L224,279.3286 L224,247.73 L214,237.73 L11,237.73 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M214,237.73 L214,247.73 L224,247.73 L214,237.73 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="192" x="17" y="255.7998">Prometheus 'tire' activement</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="184" x="17" y="271.5991">les m&#233;triques des services.</text></g><!--link ActPS to Metrics--><g id="link_ActPS_Metrics"><path d="M395.77,258.53 C407.19,258.53 412.61,258.53 424.03,258.53 " fill="none" id="ActPS-to-Metrics" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="430.03,258.53,421.03,254.53,425.03,258.53,421.03,262.53,430.03,258.53" style="stroke:#000000;stroke-width:1.0;"/></g><!--link ActOS to Metrics--><g id="link_ActOS_Metrics"><path d="M669.88,234.59 C652.12,183.08 604.67,69.13 542,103.53 C494.77,129.45 481.7268,192.225 477.7568,228.835 " fill="none" id="ActOS-to-Metrics" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="477.11,234.8,482.057,226.2837,477.649,229.8291,474.1036,225.4212,477.11,234.8" style="stroke:#000000;stroke-width:1.0;"/></g><!--link Web Browser to Grafana\n(Visualisation)--><g id="link_Web Browser_Grafana\n(Visualisation)"><path d="M651.96,44.01 C663.4,44.01 668.83,44.01 680.26,44.01 " fill="none" id="Web Browser-to-Grafana\n(Visualisation)" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="686.26,44.01,677.26,40.01,681.26,44.01,677.26,48.01,686.26,44.01" style="stroke:#000000;stroke-width:1.0;"/></g><!--link Grafana to Prometheus--><g id="link_Grafana_Prometheus"><path d="M124.26,44.01 C172.23,44.01 241.3,44.01 300.32,44.01 " fill="none" id="Grafana-to-Prometheus" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="306.32,44.01,297.32,40.01,301.32,44.01,297.32,48.01,306.32,44.01" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="146" x="142.25" y="38.0798">Interroge les donn&#233;es</text></g><!--link Prometheus to PS--><g id="link_Prometheus_PS"><path d="M384.8,75.72 C381.3,91.83 380.86,110.72 392.5,123.03 C403.51,134.67 524.65,120.24 536.5,131.03 C546.845,140.45 553.2488,152.895 557.0247,166.3056 C558.9127,173.0109 560.1437,179.9577 560.8819,186.8884 C560.9742,187.7547 561.0588,188.6208 561.136,189.4861 C561.1746,189.9188 560.7277,184.3708 560.7627,184.803 " fill="none" id="Prometheus-to-PS" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="561.2463,190.7835,564.5079,181.4904,560.8433,185.7998,556.5339,182.1352,561.2463,190.7835" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="325" x="393.5" y="120.0998">1. Scrape /actuator/prometheus (toutes les 15s)</text></g><!--link Prometheus to OS--><g id="link_Prometheus_OS"><path d="M484.87,71.97 C490.81,73.43 496.73,74.8 502.5,76.03 C599.48,96.55 637.26,57.16 723.5,106.03 C738.3875,114.465 748.3094,127.9238 754.8081,143.4228 C758.0575,151.1723 760.4511,159.432 762.1817,167.8287 C763.047,172.0271 763.7466,176.2598 764.3045,180.4801 C764.5835,182.5903 764.8271,184.6973 765.0382,186.7955 C765.1438,187.8446 765.2413,188.8915 765.331,189.9354 C765.3535,190.1964 764.8825,184.4774 764.904,184.738 " fill="none" id="Prometheus-to-OS" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="765.3969,190.7177,768.6441,181.4196,764.9862,185.7346,760.6711,182.0767,765.3969,190.7177" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="325" x="742.92" y="120.0998">1. Scrape /actuator/prometheus (toutes les 15s)</text></g><!--link Prometheus to N1--><g id="link_Prometheus_N1"><path d="M353.16,76.01 C331.1,92.27 303.74,112.58 279.5,131.03 C230.8,168.09 174.65,212.27 142.88,237.4 " fill="none" id="Prometheus-N1" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--SRC=[dPBFJW8n4CRlVOfn3m87bc3YXOE9Nem7M99Dz00SXkw83RljsivYZE61U0vUp66NFw8UZ9FqqFOttzVvqWj-eOAWpD5O5PR6bkYn0EsAqbcodF9xJb0L-PLI9UebBWYYaGimDDgxG7vbD8K8FXH8UTACTY4TqTYxhD8CQOD4W076wPxRrT42eblD5RBpDIIRSNgawXrqRs0o9FP6XrbzjVvkb_YC_9bPyaUpvCmi-TLihLI6Z7CCpMG5IMnLcDfsogu9vH9IxR4qTj5fPZrIIasUQ0vtthr9NhDQ_zxZCreKWKSJAinDG3RETcRgSDLm9vKP3E31Cddln2sd09cpThiXqJzHqCsaJH8RG3zkNaJGm_t8lV84jjbLB2exfVvrwFmGIVuZegpZiuYWnSPJ2wJRhEIdMPxQ7LriDvBmQxMRGzRX8yLrTgF-rzV4iHny0W00]--></g></svg></div></section><section class="chapter"><h2 id="micrometer-la-fa-ade-d-instrumentation" data-toc="micrometer-la-fa-ade-d-instrumentation">Micrometer : La Fa&ccedil;ade d'Instrumentation</h2><p id="puyf4_51">Comment Spring Boot Actuator fait-il pour exposer des m&eacute;triques dans un format que Prometheus comprend ? Gr&acirc;ce &agrave; <span class="control" id="puyf4_56">Micrometer</span>.</p><aside class="prompt" data-type="tip" data-title="" id="puyf4_52"><p id="puyf4_57"><span class="control" id="puyf4_58">D&eacute;finition :</span> <span class="control" id="puyf4_59">Micrometer</span> est une fa&ccedil;ade de collecte de m&eacute;triques pour les applications JVM. C'est l'&eacute;quivalent de SLF4J (la fa&ccedil;ade de logging), mais pour les m&eacute;triques.</p></aside><p id="puyf4_53">Micrometer fournit une API simple pour enregistrer des m&eacute;triques dans votre code (<code class="code" id="puyf4_60">Counter</code>, <code class="code" id="puyf4_61">Gauge</code>, <code class="code" id="puyf4_62">Timer</code>...). Ensuite, en fonction des d&eacute;pendances que vous ajoutez &agrave; votre projet, il peut &quot;exporter&quot; ces m&eacute;triques dans des dizaines de formats diff&eacute;rents : Prometheus, Datadog, InfluxDB, etc.</p><p id="puyf4_54">Lorsque nous ajoutons la d&eacute;pendance <code class="code" id="puyf4_63">micrometer-registry-prometheus</code>, nous disons &agrave; Micrometer : &quot;Prends toutes les m&eacute;triques et expose-les sur un endpoint <code class="code" id="puyf4_64">/actuator/prometheus</code> dans le format textuel que Prometheus adore.&quot;</p><p id="puyf4_55">C'est extr&ecirc;mement puissant, car si un jour on d&eacute;cide de changer de syst&egrave;me de monitoring, il suffit de changer une d&eacute;pendance (<code class="code" id="puyf4_65">micrometer-registry-datadog</code>) sans avoir &agrave; modifier une seule ligne de notre code d'instrumentation.</p></section><section class="chapter"><h2 id="types-de-m-triques-surveiller" data-toc="types-de-m-triques-surveiller">Types de M&eacute;triques &agrave; Surveiller</h2><p id="puyf4_66">On peut classer les m&eacute;triques en deux grandes cat&eacute;gories :</p><ol class="list _decimal" id="puyf4_67" type="1"><li class="list__item" id="puyf4_70"><p id="puyf4_72"><span class="control" id="puyf4_74">M&eacute;triques Techniques (ou Syst&egrave;me) :</span> Elles d&eacute;crivent la sant&eacute; de l'infrastructure. Spring Boot Actuator nous en fournit beaucoup par d&eacute;faut :</p><ul class="list _bullet" id="puyf4_73"><li class="list__item" id="puyf4_75"><p id="puyf4_79"><span class="control" id="puyf4_80">JVM :</span> Utilisation de la m&eacute;moire (heap, non-heap), nombre de threads, activit&eacute; du Garbage Collector.</p></li><li class="list__item" id="puyf4_76"><p id="puyf4_81"><span class="control" id="puyf4_82">CPU :</span> Utilisation du processeur.</p></li><li class="list__item" id="puyf4_77"><p id="puyf4_83"><span class="control" id="puyf4_84">Requ&ecirc;tes HTTP :</span> Nombre de requ&ecirc;tes par seconde, temps de latence (moyenne, p95, p99), nombre d'erreurs 4xx/5xx.</p></li><li class="list__item" id="puyf4_78"><p id="puyf4_85"><span class="control" id="puyf4_86">Pool de connexions DB :</span> Nombre de connexions actives, en attente.</p></li></ul></li><li class="list__item" id="puyf4_71"><p id="puyf4_87"><span class="control" id="puyf4_89">M&eacute;triques M&eacute;tier (ou Business) :</span> Elles d&eacute;crivent la performance de l'application du point de vue du m&eacute;tier. Celles-ci, c'est &agrave; nous de les cr&eacute;er avec l'API Micrometer.</p><ul class="list _bullet" id="puyf4_88"><li class="list__item" id="puyf4_90"><p id="puyf4_94">Nombre d'utilisateurs inscrits par heure.</p></li><li class="list__item" id="puyf4_91"><p id="puyf4_95">Nombre de commandes pass&eacute;es.</p></li><li class="list__item" id="puyf4_92"><p id="puyf4_96">Chiffre d'affaires total.</p></li><li class="list__item" id="puyf4_93"><p id="puyf4_97">Taux d'&eacute;chec de paiement.</p></li></ul></li></ol><p id="puyf4_68">Un bon tableau de bord combine ces deux types de m&eacute;triques pour avoir une vision compl&egrave;te.</p></section><section class="chapter"><h2 id="conclusion-de-la-partie" data-toc="conclusion-de-la-partie">Conclusion de la partie</h2><p id="puyf4_98">Vous avez maintenant ajout&eacute; le deuxi&egrave;me pilier de l'observabilit&eacute; &agrave; vos comp&eacute;tences. Vous savez faire la diff&eacute;rence cruciale entre les <span class="control" id="puyf4_104">logs</span> (&eacute;v&eacute;nements discrets) et les <span class="control" id="puyf4_105">m&eacute;triques</span> (mesures continues).</p><p id="puyf4_99">Vous avez d&eacute;couvert la stack de monitoring standard de l'industrie cloud-native :</p><ul class="list _bullet" id="puyf4_100"><li class="list__item" id="puyf4_106"><p id="puyf4_109"><span class="control" id="puyf4_110">Spring Boot Actuator</span> pour exposer les donn&eacute;es de sant&eacute; de vos services.</p></li><li class="list__item" id="puyf4_107"><p id="puyf4_111"><span class="control" id="puyf4_112">Prometheus</span> pour collecter et stocker ces donn&eacute;es de mani&egrave;re efficace.</p></li><li class="list__item" id="puyf4_108"><p id="puyf4_113"><span class="control" id="puyf4_114">Grafana</span> pour les visualiser et cr&eacute;er des alertes.</p></li></ul><p id="puyf4_101">Vous avez &eacute;galement compris le r&ocirc;le central de <span class="control" id="puyf4_115">Micrometer</span> comme fa&ccedil;ade universelle, qui d&eacute;couple votre code de la technologie de monitoring sous-jacente.</p><p id="puyf4_102">Dans le TP suivant, nous allons ajouter Prometheus et Grafana &agrave; notre <code class="code" id="puyf4_116">docker-compose.yml</code>, configurer nos services pour qu'ils exposent leurs m&eacute;triques, et enfin, construire notre premier tableau de bord dans Grafana pour visualiser en temps r&eacute;el la sant&eacute; de notre &eacute;cosyst&egrave;me &quot;GestBook&quot;.</p></section><section class="chapter"><h2 id="auto-valuation" data-toc="auto-valuation">Auto-&eacute;valuation</h2><ol class="list _decimal" id="puyf4_117" type="1"><li class="list__item" id="puyf4_118"><p id="puyf4_123"><span class="control" id="puyf4_124">(Question ouverte)</span> Expliquez avec vos propres mots la diff&eacute;rence entre logging et monitoring.</p></li><li class="list__item" id="puyf4_119"><p id="puyf4_125"><span class="control" id="puyf4_127">(QCM)</span> Quel est le mod&egrave;le de collecte de donn&eacute;es utilis&eacute; par Prometheus ?</p><ul class="list _bullet" id="puyf4_126"><li class="list__item" id="puyf4_128"><p id="puyf4_132">A) Push : les services envoient leurs m&eacute;triques &agrave; Prometheus.</p></li><li class="list__item" id="puyf4_129"><p id="puyf4_133">B) Pull : Prometheus contacte les services pour r&eacute;cup&eacute;rer leurs m&eacute;triques.</p></li><li class="list__item" id="puyf4_130"><p id="puyf4_134">C) Streaming : les services maintiennent une connexion ouverte avec Prometheus.</p></li><li class="list__item" id="puyf4_131"><p id="puyf4_135">D) Manuel : un administrateur doit copier/coller les m&eacute;triques.</p></li></ul></li><li class="list__item" id="puyf4_120"><p id="puyf4_136"><span class="control" id="puyf4_138">(QCM)</span> Quel composant est responsable de la cr&eacute;ation de tableaux de bord et de la visualisation des m&eacute;triques ?</p><ul class="list _bullet" id="puyf4_137"><li class="list__item" id="puyf4_139"><p id="puyf4_143">A) Prometheus</p></li><li class="list__item" id="puyf4_140"><p id="puyf4_144">B) Actuator</p></li><li class="list__item" id="puyf4_141"><p id="puyf4_145">C) Grafana</p></li><li class="list__item" id="puyf4_142"><p id="puyf4_146">D) Micrometer</p></li></ul></li><li class="list__item" id="puyf4_121"><p id="puyf4_147"><span class="control" id="puyf4_148">(Question ouverte)</span> Quel est le r&ocirc;le de Micrometer et pourquoi est-il comparable &agrave; SLF4J ?</p></li><li class="list__item" id="puyf4_122"><p id="puyf4_149"><span class="control" id="puyf4_151">(QCM)</span> Le nombre de commandes cr&eacute;&eacute;es par minute est un exemple de :</p><ul class="list _bullet" id="puyf4_150"><li class="list__item" id="puyf4_152"><p id="puyf4_156">A) M&eacute;trique technique</p></li><li class="list__item" id="puyf4_153"><p id="puyf4_157">B) Log d'erreur</p></li><li class="list__item" id="puyf4_154"><p id="puyf4_158">C) M&eacute;trique m&eacute;tier</p></li><li class="list__item" id="puyf4_155"><p id="puyf4_159">D) Trace distribu&eacute;e</p></li></ul></li></ol></section><div class="last-modified">17 juillet 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="010-01-tp-10.html" class="navigation-links__prev">TP 10 : Mise en Place de la Centralisation des Logs avec EFK</a><a href="011-01-tp-11.html" class="navigation-links__next">TP 11 : Monitoring de l'Architecture avec Prometheus et Grafana</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>