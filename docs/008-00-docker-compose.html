<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-08-01T06:31:07.126481"><title>Module 8 : Orchestration avec Docker Compose (L'essentiel) | Spring Micro Services</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs Pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction-le-chef-d-orchestre","level":0,"title":"Introduction : Le Chef d\u0027Orchestre","anchor":"#introduction-le-chef-d-orchestre"},{"id":"le-probl-me-l-enfer-des-commandes-docker-run","level":0,"title":"Le Problème : L\u0027enfer des commandes docker run","anchor":"#le-probl-me-l-enfer-des-commandes-docker-run"},{"id":"la-solution-docker-compose","level":0,"title":"La Solution : Docker Compose","anchor":"#la-solution-docker-compose"},{"id":"conclusion-de-la-partie","level":0,"title":"Conclusion de la partie","anchor":"#conclusion-de-la-partie"},{"id":"auto-valuation","level":0,"title":"Auto-évaluation","anchor":"#auto-valuation"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Module 8 : Orchestration avec Docker Compose (L'essentiel) | Spring Micro Services"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Spring Micro Services Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/008-00-docker-compose.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Module 8 : Orchestration avec Docker Compose (L'essentiel) | Spring Micro Services"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/008-00-docker-compose.html#webpage",
    "url": "writerside-documentation/008-00-docker-compose.html",
    "name": "Module 8 : Orchestration avec Docker Compose (L'essentiel) | Spring Micro Services",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Spring Micro Services Help"
}</script><!-- End Schema.org --></head><body data-id="008-00-docker-compose" data-main-title="Module 8 : Orchestration avec Docker Compose (L'essentiel)" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Spring Micro Services  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="008-00-docker-compose" id="008-00-docker-compose.md">Module 8 : Orchestration avec Docker Compose (L'essentiel)</h1><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs P&eacute;dagogiques</h2><p id="z2bghj0_9">&Agrave; la fin de cette partie, vous serez capable de :</p><ul class="list _bullet" id="z2bghj0_10"><li class="list__item" id="z2bghj0_11"><p id="z2bghj0_15">Expliquer le probl&egrave;me li&eacute; au lancement manuel de multiples conteneurs.</p></li><li class="list__item" id="z2bghj0_12"><p id="z2bghj0_16">Pr&eacute;senter Docker Compose comme solution d'orchestration locale.</p></li><li class="list__item" id="z2bghj0_13"><p id="z2bghj0_17">D&eacute;crire la structure et les concepts de base d'un fichier <code class="code" id="z2bghj0_18">docker-compose.yml</code> (services, networks, depends_on).</p></li><li class="list__item" id="z2bghj0_14"><p id="z2bghj0_19">Comprendre comment Docker Compose facilite la communication entre conteneurs.</p></li></ul></section><section class="chapter"><h2 id="introduction-le-chef-d-orchestre" data-toc="introduction-le-chef-d-orchestre">Introduction : Le Chef d'Orchestre</h2><p id="z2bghj0_20">Jusqu'&agrave; pr&eacute;sent, pour lancer notre architecture, nous avons agi comme des machinistes de th&eacute;&acirc;tre :</p><ol class="list _decimal" id="z2bghj0_21" type="1"><li class="list__item" id="z2bghj0_25"><p id="z2bghj0_28">On lance le conteneur <code class="code" id="z2bghj0_29">eureka-server</code> avec une commande <code class="code" id="z2bghj0_30">docker run...</code>.</p></li><li class="list__item" id="z2bghj0_26"><p id="z2bghj0_31">On lance le conteneur <code class="code" id="z2bghj0_32">config-server</code> avec une autre commande <code class="code" id="z2bghj0_33">docker run...</code>.</p></li><li class="list__item" id="z2bghj0_27"><p id="z2bghj0_34">On lance <code class="code" id="z2bghj0_35">product-service</code>, puis <code class="code" id="z2bghj0_36">order-service</code>, puis <code class="code" id="z2bghj0_37">api-gateway</code>...</p></li></ol><p id="z2bghj0_22">C'est fastidieux, source d'erreurs et difficile &agrave; maintenir. On a d&ucirc; faire des acrobaties avec <code class="code" id="z2bghj0_38">localhost</code> et les noms d'h&ocirc;tes. Si on oublie un conteneur ou si on le lance dans le mauvais ordre, rien ne fonctionne.</p><p id="z2bghj0_23">Imaginez un orchestre symphonique. Chaque musicien (<code class="code" id="z2bghj0_39">conteneur</code>) sait jouer sa partition (<code class="code" id="z2bghj0_40">son application</code>). Mais pour qu'ils jouent ensemble et cr&eacute;ent une symphonie harmonieuse, il faut un <span class="control" id="z2bghj0_41">chef d'orchestre</span>. Ce chef d'orchestre leur dit quand commencer, s'assure qu'ils sont tous l&agrave;, et leur permet de s'&eacute;couter les uns les autres.</p><p id="z2bghj0_24">Pour notre d&eacute;veloppement local, ce chef d'orchestre, c'est <span class="control" id="z2bghj0_42">Docker Compose</span>. C'est un outil qui nous permet de d&eacute;crire toute notre application multi-conteneurs dans un seul fichier et de la lancer (ou de l'arr&ecirc;ter) avec une seule commande.</p></section><section class="chapter"><h2 id="le-probl-me-l-enfer-des-commandes-docker-run" data-toc="le-probl-me-l-enfer-des-commandes-docker-run">Le Probl&egrave;me : L'enfer des commandes <code class="code" id="z2bghj0_47">docker run</code></h2><p id="z2bghj0_44">Lancer nos 5 services manuellement pose plusieurs probl&egrave;mes :</p><ul class="list _bullet" id="z2bghj0_45"><li class="list__item" id="z2bghj0_48"><p id="z2bghj0_52"><span class="control" id="z2bghj0_53">Commandes complexes :</span> Chaque <code class="code" id="z2bghj0_54">docker run</code> peut avoir de nombreux arguments (<code class="code" id="z2bghj0_55">-p</code>, <code class="code" id="z2bghj0_56">-e</code>, <code class="code" id="z2bghj0_57">--name</code>, volumes, etc.). Il est facile de se tromper.</p></li><li class="list__item" id="z2bghj0_49"><p id="z2bghj0_58"><span class="control" id="z2bghj0_59">Gestion du r&eacute;seau :</span> Par d&eacute;faut, chaque conteneur est isol&eacute;. Pour qu'ils communiquent, il faut les attacher manuellement &agrave; un r&eacute;seau Docker partag&eacute; (<code class="code" id="z2bghj0_60">docker network create ...</code>, <code class="code" id="z2bghj0_61">docker run --network=...</code>).</p></li><li class="list__item" id="z2bghj0_50"><p id="z2bghj0_62"><span class="control" id="z2bghj0_63">Ordre de d&eacute;marrage :</span> Le <code class="code" id="z2bghj0_64">config-server</code> et <code class="code" id="z2bghj0_65">eureka-server</code> doivent d&eacute;marrer avant les autres services. G&eacute;rer cet ordre manuellement est p&eacute;nible.</p></li><li class="list__item" id="z2bghj0_51"><p id="z2bghj0_66"><span class="control" id="z2bghj0_67">Nettoyage :</span> Pour tout arr&ecirc;ter, il faut faire <code class="code" id="z2bghj0_68">docker stop</code> et <code class="code" id="z2bghj0_69">docker rm</code> pour chaque conteneur.</p></li></ul><p id="z2bghj0_46">Bref, ce n'est pas une solution viable, m&ecirc;me pour le d&eacute;veloppement.</p></section><section class="chapter"><h2 id="la-solution-docker-compose" data-toc="la-solution-docker-compose">La Solution : Docker Compose</h2><p id="z2bghj0_70">Docker Compose est un outil inclus avec Docker Desktop qui lit un fichier de configuration au format <span class="control" id="z2bghj0_74">YAML</span>, g&eacute;n&eacute;ralement nomm&eacute; <code class="code" id="z2bghj0_75">docker-compose.yml</code>, pour g&eacute;rer le cycle de vie d'une application multi-conteneurs.</p><aside class="prompt" data-type="tip" data-title="" id="z2bghj0_71"><p id="z2bghj0_76"><span class="control" id="z2bghj0_77">D&eacute;finition :</span> <span class="control" id="z2bghj0_78">Docker Compose</span> est un outil pour d&eacute;finir et ex&eacute;cuter des applications Docker multi-conteneurs. Il utilise un fichier YAML pour configurer les services de l'application, puis, &agrave; partir d'une seule commande, il cr&eacute;e et d&eacute;marre tous les services &agrave; partir de votre configuration.</p></aside><section class="chapter"><h3 id="le-fichier-docker-compose-yml-notre-partition" data-toc="le-fichier-docker-compose-yml-notre-partition">Le Fichier <code class="code" id="z2bghj0_89">docker-compose.yml</code>: Notre Partition</h3><p id="z2bghj0_80">Ce fichier est le c&oelig;ur de Docker Compose. Il d&eacute;crit tous les composants de notre syst&egrave;me. Voyons ses concepts cl&eacute;s.</p><p id="z2bghj0_81"><span class="control" id="z2bghj0_90">1. <code class="code" id="z2bghj0_91">services</code></span> C'est la section principale o&ugrave; l'on d&eacute;finit chaque conteneur que l'on veut lancer. Chaque service est un &quot;bloc&quot; de configuration.</p><p id="z2bghj0_82"><span class="control" id="z2bghj0_92">2. <code class="code" id="z2bghj0_95">image</code></span> Pour chaque service, on sp&eacute;cifie l'image Docker &agrave; utiliser (ex: <code class="code" id="z2bghj0_93">product-service:1.0</code>). Si l'image n'est pas disponible localement, Docker Compose essaiera de la r&eacute;cup&eacute;rer depuis Docker Hub. Si on veut la construire &agrave; partir d'un Dockerfile, on peut utiliser la directive <code class="code" id="z2bghj0_94">build: .</code>.</p><p id="z2bghj0_83"><span class="control" id="z2bghj0_96">3. <code class="code" id="z2bghj0_100">ports</code></span> C'est l'&eacute;quivalent du <code class="code" id="z2bghj0_97">-p</code> de <code class="code" id="z2bghj0_98">docker run</code>. On mappe un port de la machine h&ocirc;te vers un port du conteneur (ex: <code class="code" id="z2bghj0_99">8080:8080</code>).</p><p id="z2bghj0_84"><span class="control" id="z2bghj0_101">4. <code class="code" id="z2bghj0_103">environment</code></span> C'est l'&eacute;quivalent du <code class="code" id="z2bghj0_102">-e</code>. On peut y d&eacute;finir des variables d'environnement pour configurer le conteneur.</p><p id="z2bghj0_85"><span class="control" id="z2bghj0_104">5. <code class="code" id="z2bghj0_107">networks</code></span> Docker Compose cr&eacute;e automatiquement un <span class="control" id="z2bghj0_105">r&eacute;seau priv&eacute;</span> par d&eacute;faut pour tous les services d&eacute;finis dans le fichier. C'est magique ! &Agrave; l'int&eacute;rieur de ce r&eacute;seau, chaque service peut joindre les autres en utilisant simplement son <span class="control" id="z2bghj0_106">nom de service</span> comme nom d'h&ocirc;te.</p><ul class="list _bullet" id="z2bghj0_86"><li class="list__item" id="z2bghj0_108"><p id="z2bghj0_109">Exemple : Depuis le conteneur <code class="code" id="z2bghj0_110">api-gateway</code>, l'URL <code class="code" id="z2bghj0_111">http://product-service:8081</code> fonctionnera, car Docker Compose g&egrave;re la r&eacute;solution DNS interne.</p></li></ul><p id="z2bghj0_87"><span class="control" id="z2bghj0_112">6. <code class="code" id="z2bghj0_117">depends_on</code></span> Cette directive permet de d&eacute;finir un ordre de d&eacute;marrage simple. Si <code class="code" id="z2bghj0_113">order-service</code> a <code class="code" id="z2bghj0_114">depends_on: [eureka-server]</code>, Docker Compose d&eacute;marrera d'abord le conteneur <code class="code" id="z2bghj0_115">eureka-server</code> avant de d&eacute;marrer <code class="code" id="z2bghj0_116">order-service</code>.</p><aside class="prompt" data-type="warning" data-title="" id="z2bghj0_88"><p><b id="z2bghj0_118">`depends_on` ne garantit que le d&eacute;marrage !</b></p><p id="z2bghj0_119"><code class="code" id="z2bghj0_120">depends_on</code> attend que le conteneur d&eacute;pendant soit <b id="z2bghj0_121">lanc&eacute;</b>, mais pas que l'application &agrave; l'int&eacute;rieur soit <b id="z2bghj0_122">pr&ecirc;te</b> &agrave; accepter des connexions. Un conteneur Eureka peut &ecirc;tre &quot;lanc&eacute;&quot;, mais l'application Java &agrave; l'int&eacute;rieur peut prendre 10-20 secondes pour &ecirc;tre pleinement op&eacute;rationnelle. Nos clients Spring (Config, Eureka) sont con&ccedil;us pour r&eacute;essayer de se connecter, ce qui r&eacute;sout g&eacute;n&eacute;ralement ce probl&egrave;me. Pour des cas plus complexes, des solutions comme des &quot;wait-for-it scripts&quot; ou des &quot;healthchecks&quot; peuvent &ecirc;tre n&eacute;cessaires.</p></aside></section><section class="chapter"><h3 id="exemple-de-structure-pour-notre-projet" data-toc="exemple-de-structure-pour-notre-projet">Exemple de structure pour notre projet</h3><p id="z2bghj0_123">Voici &agrave; quoi pourrait ressembler un extrait de notre futur <code class="code" id="z2bghj0_131">docker-compose.yml</code>:</p><div class="code-block" data-lang="yaml">
# docker-compose.yml
version: '3.8' # Spécifie la version de la syntaxe du fichier

services:
  # Définition du service Eureka
  eureka-server:
    image: eureka-server:1.0 # L'image que nous avons construite
    ports:
      - &quot;8761:8761&quot; # Mappe le port pour qu'on puisse y accéder de l'extérieur

  # Définition du service Produit
  product-service:
    image: product-service:1.1
    ports:
      - &quot;8081:8081&quot;
    environment:
      # On pourrait surcharger des configurations ici si besoin
      - WELCOME_MESSAGE=&quot;Hello from Docker Compose!&quot;
    depends_on:
      - eureka-server # Ne démarre pas avant qu'Eureka soit lancé
      - config-server # Dépend aussi du config server

  # ... et ainsi de suite pour tous les autres services
  config-server:
    # ...
  order-service:
    # ...
  api-gateway:
    # ...

</div><p id="z2bghj0_125">Avec un tel fichier, il suffit de se placer dans le m&ecirc;me r&eacute;pertoire et de taper :</p><ul class="list _bullet" id="z2bghj0_126"><li class="list__item" id="z2bghj0_132"><p id="z2bghj0_135"><code class="code" id="z2bghj0_136">docker-compose up</code> pour tout construire et lancer en avant-plan.</p></li><li class="list__item" id="z2bghj0_133"><p id="z2bghj0_137"><code class="code" id="z2bghj0_138">docker-compose up -d</code> pour tout lancer en arri&egrave;re-plan.</p></li><li class="list__item" id="z2bghj0_134"><p id="z2bghj0_139"><code class="code" id="z2bghj0_140">docker-compose down</code> pour arr&ecirc;ter et supprimer tous les conteneurs et le r&eacute;seau.</p></li></ul><p id="z2bghj0_127">C'est simple, reproductible et puissant.</p><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="690px" preserveAspectRatio="none" style="width:1091px;height:690px;background:#FFFFFF;" version="1.1" viewBox="0 0 1091 690" width="1091px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="455" x="313.585" y="37.1182">Fonctionnement de Docker Compose</text><!--cluster host--><g id="cluster_host"><rect fill="#FFFFFF" height="415.54" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="346" x="313.44" y="268.7573"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="106" x="433.44" y="284.8325">Machine H&#244;te</text></g><!--cluster project--><g id="cluster_project"><path d="M355.94,420.7673 L412.94,420.7673 A3.75,3.75 0 0 1 415.44,423.2673 L422.44,443.782 L608.94,443.782 A2.5,2.5 0 0 1 611.44,446.282 L611.44,641.7973 A2.5,2.5 0 0 1 608.94,644.2973 L355.94,644.2973 A2.5,2.5 0 0 1 353.44,641.7973 L353.44,423.2673 A2.5,2.5 0 0 1 355.94,420.7673 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="353.44" x2="422.44" y1="443.782" y2="443.782"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="56" x="357.44" y="436.8425">Projets</text></g><!--entity YML--><g id="elem_YML"><path d="M436.44,315.2573 L436.44,347.272 A2.5,2.5 0 0 0 438.94,349.772 L597.94,349.772 A2.5,2.5 0 0 0 600.44,347.272 L600.44,322.7573 L590.44,312.7573 L438.94,312.7573 A2.5,2.5 0 0 0 436.44,315.2573 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M590.44,312.7573 L590.44,320.2573 A2.5,2.5 0 0 0 592.94,322.7573 L600.44,322.7573 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="144" x="446.44" y="336.8325">docker-compose.yml</text></g><!--entity f1--><g id="elem_f1"><path d="M376.94,585.7873 L376.94,617.802 A2.5,2.5 0 0 0 379.44,620.302 L577.44,620.302 A2.5,2.5 0 0 0 579.94,617.802 L579.94,593.2873 L569.94,583.2873 L379.44,583.2873 A2.5,2.5 0 0 0 376.94,585.7873 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M569.94,583.2873 L569.94,590.7873 A2.5,2.5 0 0 0 572.44,593.2873 L579.94,593.2873 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="183" x="386.94" y="607.3625">product-service/Dockerfile</text></g><!--entity f2--><g id="elem_f2"><path d="M382.44,467.2673 L382.44,499.282 A2.5,2.5 0 0 0 384.94,501.782 L565.94,501.782 A2.5,2.5 0 0 0 568.44,499.282 L568.44,474.7673 L558.44,464.7673 L384.94,464.7673 A2.5,2.5 0 0 0 382.44,467.2673 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M558.44,464.7673 L558.44,472.2673 A2.5,2.5 0 0 0 560.94,474.7673 L568.44,474.7673 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="166" x="392.44" y="488.8425">order-service/Dockerfile</text></g><!--entity User--><g id="elem_User"><ellipse cx="707.44" cy="453.2673" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1.0;"/><path d="M707.44,461.2673 L707.44,488.2673 M694.44,469.2673 L720.44,469.2673 M707.44,488.2673 L694.44,503.2673 M707.44,488.2673 L720.44,503.2673 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="31" x="691.94" y="519.3425">User</text></g><!--entity Docker--><g id="elem_Docker"><ellipse cx="518.44" cy="66.7373" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1.0;"/><path d="M518.44,74.7373 L518.44,101.7373 M505.44,82.7373 L531.44,82.7373 M518.44,101.7373 L505.44,116.7373 M518.44,101.7373 L531.44,116.7373 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="48" x="494.44" y="132.8125">Docker</text></g><!--reverse link f2 to f1--><!--link YML to project--><!--reverse link host to User--><!--reverse link YML to User--><g id="link_YML_User"><path d="M515.3566,356.0009 C514.2666,370.7109 515.95,385.0773 528.44,396.7673 C543.26,410.6373 600.78,396.7673 619.44,404.7673 C649.01,417.4373 675.6,443.9973 691.62,462.4673 " fill="none" id="YML-backto-User" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="515.8,350.0173,511.1459,358.6971,515.4305,355.0036,519.124,359.2883,515.8,350.0173" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="131" x="529.44" y="393.8371">docker-compose up</text></g><!--reverse link Docker to YML--><g id="link_Docker_YML"><path d="M488.1821,100.1922 C406.6821,107.2122 151.15,133.8573 101.44,196.7573 C11,311.1873 290.39,329.0773 436.03,330.8673 " fill="none" id="Docker-backto-YML" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="494.16,99.6773,484.8499,96.4644,489.1784,100.1064,485.5365,104.4349,494.16,99.6773" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="218" x="102.44" y="210.8271">Cr&#233;e un r&#233;seau 'my-app_default'</text></g><!--reverse link Docker to YML--><g id="link_Docker_YML"><path d="M488.6016,111.006 C458.0916,125.806 412.73,153.1673 391.44,196.7573 C367.36,246.0473 432.54,289.2173 478.19,312.3373 " fill="none" id="Docker-backto-YML-1" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="494,108.3873,484.1566,108.7164,489.5014,110.5695,487.6482,115.9142,494,108.3873" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="236" x="392.44" y="210.8271">Lance un conteneur 'eureka-server'</text></g><!--reverse link Docker to YML--><g id="link_Docker_YML"><path d="M548.2452,109.9488 C587.6552,127.4188 653.68,164.4273 633.44,213.7573 C623.65,237.6173 569.93,286.2073 539.5,312.4673 " fill="none" id="Docker-backto-YML-2" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="542.76,107.5173,549.3668,114.8214,547.331,109.5436,552.6089,107.5078,542.76,107.5173" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="416" x="637.97" y="210.8271">Lance un conteneur 'product-service' et connecte-le au r&#233;seau</text></g><!--reverse link Docker to YML--><g id="link_Docker_YML"><path d="M548.718,98.3804 C645.458,100.8504 995.42,115.2673 1063.44,196.7573 C1068.28,202.5573 1068.55,208.1873 1063.44,213.7573 C1028.81,251.4473 651.4,232.3873 604.44,252.7573 C574.2,265.8673 547.41,293.9873 532.06,312.5073 " fill="none" id="Docker-backto-YML-3" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="542.72,98.2273,551.615,102.4557,547.7184,98.3549,551.8192,94.4583,542.72,98.2273" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="15" x="1068.17" y="210.8271">...</text></g><!--SRC=[bPAzJiCm58LtFyKbIwOObR53boB4q4ei30WXPDctn3IvZfnhf0hrWTXvWxuOrqb_r0e6CZYEptTERevonJMs25rZF2dst20KTu4i-q0a2Z4uXDjWrnXX7jekz5We5T6oeRTCBusjFI7SxxuP2p0zrA5d-5GWryfdn0tsoevslMcRWNjQBaOeD4xIYuSOtf7xGUlotlAOSagIOvSiLpt63s_nUXmiQuDhDRdWGvJaF-cR8tsoJQ1whhrpI2-fcXsOhJfIClK9SOBiHrLRfOpb4E5HtgTKNi-pSY_xu_oOWwPmtWsaJgaiwAJrxD3x58fvt7s9IY3t7as2ijrKfkjU7QvCQhWiVhKj3Dd1PWCn4gO8fIouDaCf6F_Xk-Y-1EGiatmxLbAs3BKVxlTChRNyEJy0]--></g></svg></div><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="449px" preserveAspectRatio="none" style="width:362px;height:449px;background:#FFFFFF;" version="1.1" viewBox="0 0 362 449" width="362px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="214" x="69.9901" y="37.1182">Le r&#233;seau docker</text><!--cluster R?seau Docker 'my-app_default'--><g id="cluster_R&#233;seau Docker 'my-app_default'"><path d="M42.5831,77.5949 C47.72,67.1048 57.5549,69.145 62.8718,77.4 C69.1737,66.5684 78.8067,66.555 85.2176,77.2872 C90.0725,62.0099 100.9521,61.147 110.7632,72.54 C117.3928,63.2885 125.3105,64.4662 131.016,73.56 C139.2191,62.9424 146.7717,62.2317 154.9753,73.5594 C161.6562,63.4912 169.4236,61.043 177.1363,72.4969 C184.6613,61.5814 196.363,58.7373 203.3374,73.0683 C211.2615,63.4209 218.5328,63.0215 225.9263,73.6591 C232.6565,63.2063 243.1349,65.77 247.2298,76.3307 C253.2531,66.6956 262.4289,66.518 268.8677,75.8568 C278.1777,63.5892 287.2012,64.103 295.829,76.5995 C306.7505,68.2627 315.5844,69.1786 321.2702,82.6948 C322.4489,81.5786 323.392,81.9274 323.7952,83.4397 C336.638,91.3173 337.6222,100.6839 324.8846,109.6259 C336.1586,115.3451 336.5249,124.7486 325.5858,131.1902 C336.9595,138.1402 337.1467,146.9863 328.0145,155.9479 C337.9447,162.0031 337.7858,173.5227 328.2709,179.787 C339.6319,186.7611 338.4793,198.4779 327.6253,204.8804 C340.5301,211.4666 338.1768,222.9449 327.4605,229.3722 C339.7204,236.3172 338.6094,246.8529 327.1133,253.4554 C337.5769,257.2129 339.328,266.1855 330.202,273.0335 C342.1933,282.4311 342.3719,290.6624 329.2989,299.1948 C340.2199,307.512 340.2116,318.054 327.1436,324.3128 C337.3379,332.5174 335.5388,340.0074 324.3378,345.3597 C335.9625,351.9743 336.4472,360.9954 326.495,369.5353 C336.5603,377.7692 337.4841,387.891 323.7401,393.3734 C336.5977,408.5398 329.7505,416.7081 314.2702,422.7348 C315.7676,421.6802 316.7636,422.362 317.0909,423.973 C310.6917,436.579 301.1616,435.6996 292.9319,425.9512 C286.8324,435.4201 279.7765,437.329 271.5183,428.4738 C262.7105,440.9041 254.5624,439.3494 245.6666,428.5719 C237.9529,438.7398 231.2539,439.1283 224.4189,427.707 C217.5265,440.9613 210.1743,439.4851 201.3052,429.6891 C195.3326,441.7987 184.9163,442.784 177.3653,431.2901 C169.6297,441.0436 157.8799,439.9595 154.191,427.1364 C147.3877,435.7695 140.7855,436.8473 134.4987,426.5977 C125.9226,438.8805 117.8552,440.6223 108.7074,427.1708 C104.2669,438.2208 95.1404,436.6078 89.2208,428.6905 C79.8481,439.12 72.7597,438.8298 65.7923,426.2424 C49.3342,439.0082 39.3094,433.0181 32.2702,415.7348 C33.9685,415.5665 34.7892,416.433 34.3684,418.1249 C24.6521,411.526 21.7611,404.6666 32.4952,396.3115 C20.4584,389.3649 18.8607,377.8052 31.572,369.9906 C22.4889,364.4856 21.4271,355.293 30.128,348.5881 C18.4976,342.9913 14.9676,333.018 27.2235,324.5365 C15.0167,318.2395 14.7751,305.9916 26.1334,298.7003 C17.382,292.725 14.6665,283.5841 25.8279,277.3242 C13.1481,268.8426 11,259.8118 24.5613,250.109 C16.0775,243.2113 15.3894,231.9711 27.0996,227.323 C14.5295,219.3364 18.229,210.7076 28.15,203.7219 C16.1212,194.1832 19.511,186.8772 30.4366,179.506 C19.8418,173.3208 16.5592,164.439 28.5104,156.3762 C18.9642,146.3628 20.7522,136.844 33.1661,130.8334 C22.6331,124.2895 22.1353,115.6396 31.5065,107.6696 C17.9088,94.1173 22.1252,81.7825 39.2702,75.6948 C41.1429,74.8312 42.4793,75.3745 42.5831,77.5949 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="256" x="48.7702" y="94.77">R&#233;seau Docker 'my-app_default'</text></g><!--entity eureka--><g id="elem_eureka"><polygon fill="#FFFFFF" points="40.2702,377.7248,50.2702,367.7248,188.2702,367.7248,188.2702,404.7394,178.2702,414.7394,40.2702,414.7394,40.2702,377.7248" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="178.2702" x2="188.2702" y1="377.7248" y2="367.7248"/><line style="stroke:#000000;stroke-width:1.0;" x1="40.2702" x2="178.2702" y1="377.7248" y2="377.7248"/><line style="stroke:#000000;stroke-width:1.0;" x1="178.2702" x2="178.2702" y1="377.7248" y2="414.7394"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="108" x="55.2702" y="401.8">[eureka-server]</text></g><!--entity product--><g id="elem_product"><polygon fill="#FFFFFF" points="40.2702,237.7048,50.2702,227.7048,200.2702,227.7048,200.2702,264.7194,190.2702,274.7194,40.2702,274.7194,40.2702,237.7048" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="190.2702" x2="200.2702" y1="237.7048" y2="227.7048"/><line style="stroke:#000000;stroke-width:1.0;" x1="40.2702" x2="190.2702" y1="237.7048" y2="237.7048"/><line style="stroke:#000000;stroke-width:1.0;" x1="190.2702" x2="190.2702" y1="237.7048" y2="274.7194"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="120" x="55.2702" y="261.78">[product-service]</text></g><!--entity order--><g id="elem_order"><polygon fill="#FFFFFF" points="41.7702,113.6948,51.7702,103.6948,184.7702,103.6948,184.7702,140.7094,174.7702,150.7094,41.7702,150.7094,41.7702,113.6948" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="174.7702" x2="184.7702" y1="113.6948" y2="103.6948"/><line style="stroke:#000000;stroke-width:1.0;" x1="41.7702" x2="174.7702" y1="113.6948" y2="113.6948"/><line style="stroke:#000000;stroke-width:1.0;" x1="174.7702" x2="174.7702" y1="113.6948" y2="150.7094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="103" x="56.7702" y="137.77">[order-service]</text></g><!--link product to eureka--><g id="link_product_eureka"><path d="M119.02,280.9991 C117.91,306.5691 116.6303,335.8204 115.5203,361.4104 " fill="none" id="product-eureka" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="119.2802,275.0048,114.8937,283.8228,119.0634,280.0001,122.8862,284.1698,119.2802,275.0048" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="115.2602,367.4048,119.6465,358.5866,115.4769,362.4095,111.654,358.2399,115.2602,367.4048" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="236" x="118.9802" y="318.7946">Communication via nom de service</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="189" x="142.4802" y="334.5939">(http://eureka-server:8761)</text></g><!--link order to product--><g id="link_order_product"><path d="M114.9334,157.135 C116.1834,178.955 117.3665,199.5946 118.6165,221.3746 " fill="none" id="order-product" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="114.5902,151.1448,111.1115,160.3588,114.8762,156.1366,119.0984,159.9013,114.5902,151.1448" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="118.9602,227.3648,122.438,218.1504,118.6738,222.373,114.4511,218.6088,118.9602,227.3648" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="198" x="118.1902" y="194.7746">(http://product-service:8081)</text></g><!--SRC=[NOuz2W8n44Rxd69CenQBskWIn4PBAriL2Sc8OJS_P1D1n0Dv3Yzco4PGf_pcVMzc42we4LpBbI51XHQ1RX7ywzaXZo2jQD1JaaQqDagWkxBPv0qCzQtYpfqaddbimv32dK0QOsKoxJ5wR7ZLeR-YFrBW7VJHD-IybL64J2c1FLR2RyvwYVwNoX79K2d0igfMvGWmM5kjer621sKDN1LFCWr9LpG7Cxg4uDXaylCggnVpsJXxyudU-Zd1u5FwUvtLqphL7kGD]--></g></svg></div></section></section><section class="chapter"><h2 id="conclusion-de-la-partie" data-toc="conclusion-de-la-partie">Conclusion de la partie</h2><p id="z2bghj0_141">Vous avez d&eacute;couvert la solution au chaos du lancement manuel de conteneurs. <span class="control" id="z2bghj0_147">Docker Compose</span> est votre meilleur ami pour l'orchestration locale. Il vous permet de d&eacute;crire l'ensemble de votre application dans un fichier <span class="control" id="z2bghj0_148"><code class="code" id="z2bghj0_149">docker-compose.yml</code></span> unique et d&eacute;claratif.</p><p id="z2bghj0_142">Vous avez compris ses concepts cl&eacute;s :</p><ul class="list _bullet" id="z2bghj0_143"><li class="list__item" id="z2bghj0_150"><p id="z2bghj0_153">La d&eacute;finition des <span class="control" id="z2bghj0_154"><code class="code" id="z2bghj0_155">services</code></span>.</p></li><li class="list__item" id="z2bghj0_151"><p id="z2bghj0_156">La cr&eacute;ation automatique d'un <span class="control" id="z2bghj0_157">r&eacute;seau priv&eacute;</span> qui permet la communication par nom de service.</p></li><li class="list__item" id="z2bghj0_152"><p id="z2bghj0_158">La gestion de l'ordre de d&eacute;marrage avec <span class="control" id="z2bghj0_159"><code class="code" id="z2bghj0_160">depends_on</code></span>.</p></li></ul><p id="z2bghj0_144">Gr&acirc;ce &agrave; Docker Compose, n'importe quel d&eacute;veloppeur rejoignant votre projet pourra lancer l'int&eacute;gralit&eacute; de l'environnement avec une seule commande, garantissant une exp&eacute;rience de d&eacute;veloppement coh&eacute;rente et sans friction.</p><p id="z2bghj0_145">Dans le TP final de ce module, nous allons &eacute;crire le <code class="code" id="z2bghj0_161">docker-compose.yml</code> complet pour notre &eacute;cosyst&egrave;me &quot;GestBook&quot;. Nous rassemblerons toutes les pi&egrave;ces du puzzle (Config Server, Eureka, nos services m&eacute;tier, l'API Gateway) et lancerons toute la pile d'un seul coup. Ce sera l'aboutissement de tout notre travail d'assemblage.</p></section><section class="chapter"><h2 id="auto-valuation" data-toc="auto-valuation">Auto-&eacute;valuation</h2><p id="z2bghj0_162">Prenez un moment pour r&eacute;pondre &agrave; ces questions. Les corrections se trouvent &agrave; la toute fin du support de cours.</p><ol class="list _decimal" id="z2bghj0_163" type="1"><li class="list__item" id="z2bghj0_164"><p id="z2bghj0_169"><span class="control" id="z2bghj0_170">(Question ouverte)</span> Quel est, selon vous, le plus grand avantage de Docker Compose pour un d&eacute;veloppeur travaillant en &eacute;quipe ?</p></li><li class="list__item" id="z2bghj0_165"><p id="z2bghj0_171"><span class="control" id="z2bghj0_173">(QCM)</span> Quelle commande permet de lancer tous les services d&eacute;finis dans <code class="code" id="z2bghj0_174">docker-compose.yml</code> en arri&egrave;re-plan ?</p><ul class="list _bullet" id="z2bghj0_172"><li class="list__item" id="z2bghj0_175"><p id="z2bghj0_179">A) <code class="code" id="z2bghj0_180">docker-compose run</code></p></li><li class="list__item" id="z2bghj0_176"><p id="z2bghj0_181">B) <code class="code" id="z2bghj0_182">docker-compose start -d</code></p></li><li class="list__item" id="z2bghj0_177"><p id="z2bghj0_183">C) <code class="code" id="z2bghj0_184">docker-compose up -d</code></p></li><li class="list__item" id="z2bghj0_178"><p id="z2bghj0_185">D) <code class="code" id="z2bghj0_186">docker-compose exec -d</code></p></li></ul></li><li class="list__item" id="z2bghj0_166"><p id="z2bghj0_187"><span class="control" id="z2bghj0_189">(QCM)</span> Dans un <code class="code" id="z2bghj0_190">docker-compose.yml</code>, si <code class="code" id="z2bghj0_191">order-service</code> veut appeler <code class="code" id="z2bghj0_192">product-service</code> qui &eacute;coute sur le port 8081, quelle URL doit-il utiliser ?</p><ul class="list _bullet" id="z2bghj0_188"><li class="list__item" id="z2bghj0_193"><p id="z2bghj0_197">A) <code class="code" id="z2bghj0_198">http://localhost:8081</code></p></li><li class="list__item" id="z2bghj0_194"><p id="z2bghj0_199">B) <code class="code" id="z2bghj0_200">http://product-service:8081</code></p></li><li class="list__item" id="z2bghj0_195"><p id="z2bghj0_201">C) <code class="code" id="z2bghj0_202">http://host.docker.internal:8081</code></p></li><li class="list__item" id="z2bghj0_196"><p id="z2bghj0_203">D) Il ne peut pas l'appeler directement.</p></li></ul></li><li class="list__item" id="z2bghj0_167"><p id="z2bghj0_204"><span class="control" id="z2bghj0_205">(Question ouverte)</span> Expliquez la limitation de la directive <code class="code" id="z2bghj0_206">depends_on</code>.</p></li><li class="list__item" id="z2bghj0_168"><p id="z2bghj0_207"><span class="control" id="z2bghj0_209">(QCM)</span> Pour arr&ecirc;ter et supprimer tous les conteneurs, r&eacute;seaux et volumes (par d&eacute;faut) cr&eacute;&eacute;s par <code class="code" id="z2bghj0_210">docker-compose up</code>, quelle commande faut-il utiliser ?</p><ul class="list _bullet" id="z2bghj0_208"><li class="list__item" id="z2bghj0_211"><p id="z2bghj0_215">A) <code class="code" id="z2bghj0_216">docker-compose stop</code></p></li><li class="list__item" id="z2bghj0_212"><p id="z2bghj0_217">B) <code class="code" id="z2bghj0_218">docker-compose rm -f</code></p></li><li class="list__item" id="z2bghj0_213"><p id="z2bghj0_219">C) <code class="code" id="z2bghj0_220">docker-compose kill</code></p></li><li class="list__item" id="z2bghj0_214"><p id="z2bghj0_221">D) <code class="code" id="z2bghj0_222">docker-compose down</code></p></li></ul></li></ol></section><div class="last-modified">17 juillet 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="007-01-tp-7.html" class="navigation-links__prev">TP 7 : Le Grand Portail - Mise en place de l'API Gateway</a><a href="008-01-tp-8.html" class="navigation-links__next">... autres services</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>