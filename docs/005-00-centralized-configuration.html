<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-27T21:24:56.99977"><title>Module 5 : La Configuration Centralis&eacute;e (L'essentiel) | Spring Micro Services</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs Pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction-le-casse-t-te-des-post-it","level":0,"title":"Introduction : Le casse-tête des Post-it","anchor":"#introduction-le-casse-t-te-des-post-it"},{"id":"le-probl-me-g-rer-la-configuration-de-n-services","level":0,"title":"Le Problème : Gérer la configuration de N services","anchor":"#le-probl-me-g-rer-la-configuration-de-n-services"},{"id":"la-solution-le-pattern-externalized-configuration","level":0,"title":"La Solution : Le Pattern \"Externalized Configuration\"","anchor":"#la-solution-le-pattern-externalized-configuration"},{"id":"notre-outil-spring-cloud-config-server","level":0,"title":"Notre Outil : Spring Cloud Config Server","anchor":"#notre-outil-spring-cloud-config-server"},{"id":"conclusion-de-la-partie","level":0,"title":"Conclusion de la partie","anchor":"#conclusion-de-la-partie"},{"id":"auto-valuation","level":0,"title":"Auto-évaluation","anchor":"#auto-valuation"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Module 5 : La Configuration Centralis&eacute;e (L'essentiel) | Spring Micro Services"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Spring Micro Services Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/005-00-centralized-configuration.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Module 5 : La Configuration Centralis&eacute;e (L'essentiel) | Spring Micro Services"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/005-00-centralized-configuration.html#webpage",
    "url": "writerside-documentation/005-00-centralized-configuration.html",
    "name": "Module 5 : La Configuration Centralis&eacute;e (L'essentiel) | Spring Micro Services",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Spring Micro Services Help"
}</script><!-- End Schema.org --></head><body data-id="005-00-centralized-configuration" data-main-title="Module 5 : La Configuration Centralisée (L'essentiel)" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Spring Micro Services  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="005-00-centralized-configuration" id="005-00-centralized-configuration.md">Module 5 : La Configuration Centralisée (L'essentiel)</h1><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs P&eacute;dagogiques</h2><p id="z2giyk_10">&Agrave; la fin de cette partie, vous serez capable de :</p><ul class="list _bullet" id="z2giyk_11"><li class="list__item" id="z2giyk_12"><p id="z2giyk_16">Expliquer les probl&egrave;mes li&eacute;s &agrave; la gestion de la configuration dans de multiples services.</p></li><li class="list__item" id="z2giyk_13"><p id="z2giyk_17">D&eacute;crire le pattern &quot;Externalized Configuration&quot; (Configuration Externalis&eacute;e).</p></li><li class="list__item" id="z2giyk_14"><p id="z2giyk_18">Pr&eacute;senter l'architecture et le r&ocirc;le de Spring Cloud Config Server.</p></li><li class="list__item" id="z2giyk_15"><p id="z2giyk_19">Expliquer comment un microservice devient un client du Config Server gr&acirc;ce &agrave; <code class="code" id="z2giyk_20">bootstrap.properties</code>.</p></li></ul></section><section class="chapter"><h2 id="introduction-le-casse-t-te-des-post-it" data-toc="introduction-le-casse-t-te-des-post-it">Introduction : Le casse-t&ecirc;te des Post-it</h2><p id="z2giyk_21">Imaginez que notre &eacute;cosyst&egrave;me de microservices est un petit village en pleine croissance. Nous avons la mairie (<code class="code" id="z2giyk_24">eureka-server</code>), la librairie (<code class="code" id="z2giyk_25">product-service</code>) et le bureau de poste (<code class="code" id="z2giyk_26">order-service</code>). Pour l'instant, pour donner une instruction &agrave; chaque b&acirc;timent (comme &quot;Voici l'adresse de la mairie&quot;), nous collons un Post-it (<code class="code" id="z2giyk_27">application.properties</code>) sur sa porte.</p><p id="z2giyk_22">Au d&eacute;but, avec deux ou trois b&acirc;timents, c'est g&eacute;rable. Mais si notre village grandit &agrave; 10, 20, 50 b&acirc;timents ? Changer l'adresse de la mairie devient un travail de titan : il faut courir &agrave; chaque porte pour remplacer le Post-it. Et si on se trompe sur un seul, c'est le chaos !</p><p id="z2giyk_23">Ne serait-il pas plus simple d'avoir un grand panneau d'affichage central au milieu du village, o&ugrave; toutes les informations officielles sont affich&eacute;es ? Chaque commer&ccedil;ant viendrait simplement lire ce qui le concerne le matin en ouvrant. C'est exactement ce que nous allons construire avec <span class="control" id="z2giyk_28">Spring Cloud Config Server</span>.</p></section><section class="chapter"><h2 id="le-probl-me-g-rer-la-configuration-de-n-services" data-toc="le-probl-me-g-rer-la-configuration-de-n-services">Le Probl&egrave;me : G&eacute;rer la configuration de N services</h2><p id="z2giyk_29">&Agrave; mesure que le nombre de services augmente, la gestion des fichiers <code class="code" id="z2giyk_31">application.properties</code> individuels devient un probl&egrave;me majeur.</p><ul class="list _bullet" id="z2giyk_30"><li class="list__item" id="z2giyk_32"><p id="z2giyk_36"><span class="control" id="z2giyk_38">Duplication :</span> Des propri&eacute;t&eacute;s comme l'adresse du serveur Eureka sont copi&eacute;es-coll&eacute;es dans chaque service. Un changement n&eacute;cessite de modifier N fichiers.</p><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="289px" preserveAspectRatio="none" style="width:724px;height:289px;background:#FFFFFF;" version="1.1" viewBox="0 0 724 289" width="724px" zoomAndPan="magnify"><defs/><g><!--cluster product-service--><g id="cluster_product-service"><path d="M13.5,11 L137.5,11 A3.75,3.75 0 0 1 140,13.5 L147,34.0146 L486.5,34.0146 A2.5,2.5 0 0 1 489,36.5146 L489,238.51 A2.5,2.5 0 0 1 486.5,241.01 L13.5,241.01 A2.5,2.5 0 0 1 11,238.51 L11,13.5 A2.5,2.5 0 0 1 13.5,11 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="11" x2="147" y1="34.0146" y2="34.0146"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="123" x="15" y="27.0752">product-service</text></g><!--cluster P_PROPS--><g id="cluster_P_PROPS"><path d="M43,65.5 L43,206.51 A2.5,2.5 0 0 0 45.5,209.01 L454.5,209.01 A2.5,2.5 0 0 0 457,206.51 L457,73 L447,63 L45.5,63 A2.5,2.5 0 0 0 43,65.5 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M447,63 L447,70.5 A2.5,2.5 0 0 0 449.5,73 L457,73 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="173" x="163.5" y="79.0752">application.properties</text></g><!--cluster order-service--><g id="cluster_order-service"><path d="M515.5,91.5 L621.5,91.5 A3.75,3.75 0 0 1 624,94 L631,114.5146 L714.5,114.5146 A2.5,2.5 0 0 1 717,117.0146 L717,178.01 A2.5,2.5 0 0 1 714.5,180.51 L515.5,180.51 A2.5,2.5 0 0 1 513,178.01 L513,94 A2.5,2.5 0 0 1 515.5,91.5 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="513" x2="631" y1="114.5146" y2="114.5146"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="105" x="517" y="107.5752">order-service</text></g><!--entity eureka.client.serviceUrl=http://host:8761/eureka--><g id="elem_eureka.client.serviceUrl=http://host:8761/eureka"><ellipse cx="240" cy="116" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1.0;"/><path d="M240,124 L240,151 M227,132 L253,132 M240,151 L227,166 M240,151 L253,166 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="347" x="66.5" y="182.0752">eureka.client.serviceUrl=http://host:8761/eureka</text></g><!--entity O_PROPS--><g id="elem_O_PROPS"><path d="M529,130 L529,162.0146 A2.5,2.5 0 0 0 531.5,164.5146 L698.5,164.5146 A2.5,2.5 0 0 0 701,162.0146 L701,137.5 L691,127.5 L531.5,127.5 A2.5,2.5 0 0 0 529,130 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M691,127.5 L691,135 A2.5,2.5 0 0 0 693.5,137.5 L701,137.5 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="152" x="539" y="151.5752">application.properties</text></g><g id="elem_N1"><path d="M479.5,257.01 L479.5,282.8093 L584.5,282.8093 L584.5,267.01 L574.5,257.01 L479.5,257.01 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M574.5,257.01 L574.5,267.01 L584.5,267.01 L574.5,257.01 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="84" x="485.5" y="275.0798">Duplication !</text></g><!--link P_PROPS to N1--><g id="link_P_PROPS_N1"><path d="M457.1807,162.0859 C457.2444,162.2003 457.3083,162.3152 457.3726,162.4307 C457.5012,162.6615 457.6311,162.8945 457.7622,163.1295 C458.8115,165.0097 459.9426,167.0216 461.1487,169.1471 C463.561,173.3981 466.2734,178.1038 469.2313,183.12 C481.0625,203.185 496.82,228.22 513,249.01 C514.99,251.57 517.27,254.18 519.54,256.62 " fill="none" id="P_PROPS-N1" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--link O_PROPS to N1--><g id="link_O_PROPS_N1"><path d="M602.75,164.99 C585.62,190.16 554.94,235.21 540.27,256.77 " fill="none" id="O_PROPS-N1" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--SRC=[hO-z3i8m38JtF4MQdLHT05LYOwOLY1b5gQ5MGn8bBWlgkvEMyhCYSTl9Pt_dZ5gu0lT6eMLUwKvTW0iVNDDhMaG8DzGW-9tnf3EQD5JU6zIAq5cPWXu28KJ1LUJrgTvNzM6EZnBG1-YKr0R1afmF7eFPj4I-pFFMHIhNgsMHFvDYMXtOy6dZGWFXvoxLFxjOHucsxTyqdasGNS5UFqivkkhRFG00]--></g></svg></div></li><li class="list__item" id="z2giyk_33"><p id="z2giyk_39"><span class="control" id="z2giyk_40">Inconsistance :</span> Le risque d'erreur humaine en mettant &agrave; jour une propri&eacute;t&eacute; dans un service mais pas dans un autre est &eacute;norme.</p></li><li class="list__item" id="z2giyk_34"><p id="z2giyk_41"><span class="control" id="z2giyk_42">S&eacute;curit&eacute; :</span> Les informations sensibles (mots de passe de base de donn&eacute;es, cl&eacute;s d'API) sont stock&eacute;es dans le code source ou dans les images Docker. C'est une mauvaise pratique de s&eacute;curit&eacute;.</p></li><li class="list__item" id="z2giyk_35"><p id="z2giyk_43"><span class="control" id="z2giyk_44">Manque de visibilit&eacute; :</span> Il n'y a pas d'endroit unique pour voir la configuration de tout le syst&egrave;me.</p></li></ul></section><section class="chapter"><h2 id="la-solution-le-pattern-externalized-configuration" data-toc="la-solution-le-pattern-externalized-configuration">La Solution : Le Pattern &quot;Externalized Configuration&quot;</h2><p id="z2giyk_45">Ce pattern propose de d&eacute;coupler la configuration du code de l'application. La configuration ne vit plus &agrave; l'int&eacute;rieur de l'artefact d&eacute;ployable (le <code class="code" id="z2giyk_47">.jar</code>), mais est r&eacute;cup&eacute;r&eacute;e depuis une source externe au d&eacute;marrage.</p><aside class="prompt" data-type="tip" data-title="" id="z2giyk_46"><p id="z2giyk_48"><span class="control" id="z2giyk_49">D&eacute;finition :</span> La <span class="control" id="z2giyk_50">Configuration Externalis&eacute;e</span> consiste &agrave; stocker les param&egrave;tres de configuration en dehors du code de l'application, permettant de la modifier sans avoir &agrave; recompiler ou &agrave; red&eacute;ployer l'application.</p></aside></section><section class="chapter"><h2 id="notre-outil-spring-cloud-config-server" data-toc="notre-outil-spring-cloud-config-server">Notre Outil : Spring Cloud Config Server</h2><p id="z2giyk_51">Spring Cloud Config Server est l'impl&eacute;mentation de ce pattern par Spring. C'est un microservice &agrave; part enti&egrave;re dont le r&ocirc;le est de servir des configurations aux autres services.</p><section class="chapter"><h3 id="architecture-et-fonctionnement" data-toc="architecture-et-fonctionnement">Architecture et Fonctionnement</h3><p id="z2giyk_55">L'architecture est simple et tr&egrave;s puissante. Elle s'appuie g&eacute;n&eacute;ralement sur un d&eacute;p&ocirc;t Git comme source de v&eacute;rit&eacute; pour la configuration.</p><ol class="list _decimal" id="z2giyk_56" type="1"><li class="list__item" id="z2giyk_58"><p id="z2giyk_61"><span class="control" id="z2giyk_62">Le D&eacute;p&ocirc;t Git :</span> Vous cr&eacute;ez un d&eacute;p&ocirc;t Git d&eacute;di&eacute; qui ne contient que des fichiers de configuration (<code class="code" id="z2giyk_63">.properties</code> ou <code class="code" id="z2giyk_64">.yml</code>). C'est votre &quot;panneau d'affichage central&quot;. L'avantage de Git est immense : la configuration est versionn&eacute;e, on peut voir qui a chang&eacute; quoi, et on peut revenir en arri&egrave;re.</p></li><li class="list__item" id="z2giyk_59"><p id="z2giyk_65"><span class="control" id="z2giyk_66">Le Config Server :</span> C'est un service Spring Boot qui est li&eacute; &agrave; ce d&eacute;p&ocirc;t Git. Son unique API permet aux autres services de demander leur configuration.</p></li><li class="list__item" id="z2giyk_60"><p id="z2giyk_67"><span class="control" id="z2giyk_68">Les Clients (nos microservices) :</span> Au d&eacute;marrage, chaque microservice contacte le Config Server en disant : &quot;Je suis <code class="code" id="z2giyk_69">product-service</code>, donne-moi ma configuration&quot;. Le Config Server va alors chercher le fichier <code class="code" id="z2giyk_70">product-service.properties</code> dans le d&eacute;p&ocirc;t Git et le renvoie au client.</p></li></ol><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="611px" preserveAspectRatio="none" style="width:914px;height:611px;background:#FFFFFF;" version="1.1" viewBox="0 0 914 611" width="914px" zoomAndPan="magnify"><defs/><g><!--cluster GitRepo--><g id="cluster_GitRepo"><path d="M11,185.02 C11,175.02 250,175.02 250,175.02 C250,175.02 489,175.02 489,185.02 L489,432.05 C489,442.05 250,442.05 250,442.05 C250,442.05 11,442.05 11,432.05 L11,185.02 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M11,185.02 C11,195.02 250,195.02 250,195.02 C250,195.02 489,195.02 489,185.02 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="74" x="213" y="211.0952">D&#233;p&#244;t Git</text><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="144" x="178" y="228.1098">(Source de v&#233;rit&#233;)</text></g><!--cluster Microservices--><g id="cluster_Microservices"><path d="M423.5,515.05 L530.5,515.05 A3.75,3.75 0 0 1 533,517.55 L540,538.0646 L725.5,538.0646 A2.5,2.5 0 0 1 728,540.5646 L728,601.56 A2.5,2.5 0 0 1 725.5,604.06 L423.5,604.06 A2.5,2.5 0 0 1 421,601.56 L421,517.55 A2.5,2.5 0 0 1 423.5,515.05 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="421" x2="540" y1="538.0646" y2="538.0646"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="106" x="425" y="531.1252">Microservices</text></g><!--entity application.properties--><g id="elem_application.properties"><path d="M35,253.52 L35,285.5346 A2.5,2.5 0 0 0 37.5,288.0346 L204.5,288.0346 A2.5,2.5 0 0 0 207,285.5346 L207,261.02 L197,251.02 L37.5,251.02 A2.5,2.5 0 0 0 35,253.52 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M197,251.02 L197,258.52 A2.5,2.5 0 0 0 199.5,261.02 L207,261.02 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="152" x="45" y="275.0952">application.properties</text></g><!--entity product-service.properties--><g id="elem_product-service.properties"><path d="M242,253.52 L242,285.5346 A2.5,2.5 0 0 0 244.5,288.0346 L443.5,288.0346 A2.5,2.5 0 0 0 446,285.5346 L446,261.02 L436,251.02 L244.5,251.02 A2.5,2.5 0 0 0 242,253.52 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M436,251.02 L436,258.52 A2.5,2.5 0 0 0 438.5,261.02 L446,261.02 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="184" x="252" y="275.0952">product-service.properties</text></g><!--entity order-service.properties--><g id="elem_order-service.properties"><path d="M34.5,383.53 L34.5,415.5446 A2.5,2.5 0 0 0 37,418.0446 L219,418.0446 A2.5,2.5 0 0 0 221.5,415.5446 L221.5,391.03 L211.5,381.03 L37,381.03 A2.5,2.5 0 0 0 34.5,383.53 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M211.5,381.03 L211.5,388.53 A2.5,2.5 0 0 0 214,391.03 L221.5,391.03 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="167" x="44.5" y="405.1052">order-service.properties</text></g><!--entity ProductSvc--><g id="elem_ProductSvc"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="128" x="584" y="551.05"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="108" x="594" y="575.1252">product-service</text></g><!--entity OrderSvc--><g id="elem_OrderSvc"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="111" x="437.5" y="551.05"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="91" x="447.5" y="575.1252">order-service</text></g><!--entity Developer--><g id="elem_Developer"><ellipse cx="481" cy="19" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1.0;"/><path d="M481,27 L481,54 M468,35 L494,35 M481,54 L468,69 M481,54 L494,69 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="70" x="446" y="85.0752">Developer</text></g><!--entity ConfigServer--><g id="elem_ConfigServer"><rect fill="#FFFFFF" height="37.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="116" x="513" y="381.03"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="96" x="523" y="405.1052">Config Server</text></g><!--link Developer to GitRepo--><g id="link_Developer_GitRepo"><path d="M481,88.32 C481,103.7425 481,122.4875 481,141.9858 C481,151.7349 481,161.6724 481,171.477 C481,172.0898 481,172.7021 481,173.3137 C481,173.6196 481,167.9253 481,168.2308 " fill="none" id="Developer-to-GitRepo" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="481,174.2308,485,165.2308,481,169.2308,477,165.2308,481,174.2308" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="93" x="486" y="132.0898">1. Pousse une</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101" x="482" y="147.8891">nouvelle config</text></g><!--reverse link GitRepo to ConfigServer--><g id="link_GitRepo_ConfigServer"><path d="M492.5951,287.016 C492.9214,287.4801 490.2884,283.7347 490.6297,284.2202 C496.09,291.9872 503.4288,302.4256 511.46,313.8487 C527.5225,336.695 546.355,363.48 558.47,380.71 " fill="none" id="GitRepo-backto-ConfigServer" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="489.1445,282.1075,491.0482,291.7706,492.02,286.1979,497.5928,287.1698,489.1445,282.1075" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="112" x="537.71" y="332.0998">2. Lit les fichiers</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="108" x="539.71" y="347.8991">de configuration</text></g><!--link ProductSvc to ConfigServer--><g id="link_ProductSvc_ConfigServer"><path d="M712.24,561.17 C790.49,549.57 907.03,522.34 862,466.05 C833.41,430.31 711.5514,413.2746 635.1514,405.7946 " fill="none" id="ProductSvc-to-ConfigServer" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="629.18,405.21,637.7474,410.0679,634.1562,405.6972,638.5269,402.106,629.18,405.21" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="13" x="873.02" y="488.1198">3.</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="104" x="683.7934" y="386.8183">Bonjour, je suis</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="198" x="636.7934" y="402.6176">'product-service', ma config ?</text></g><!--link ConfigServer to ProductSvc--><g id="link_ConfigServer_ProductSvc"><path d="M596.29,418.51 C610.77,430.28 627.84,446.98 637,466.05 C650.18,493.47 651.0316,523.6786 649.8916,544.9186 " fill="none" id="ConfigServer-to-ProductSvc" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="649.57,550.91,654.0466,542.1373,649.838,545.9172,646.0581,541.7086,649.57,550.91" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="166" x="656.35" y="480.1198">4. Renvoie le contenu de</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="183" x="647.85" y="495.9191">'product-service.properties'</text></g><!--reverse link ConfigServer to OrderSvc--><g id="link_ConfigServer_OrderSvc"><path d="M538.3693,421.5771 C516.9993,434.6271 491.29,448.5 462,458.05 C450.26,461.87 415.08,456.7 407,466.05 C381.62,495.38 425.95,530.07 459.84,550.64 " fill="none" id="ConfigServer-backto-OrderSvc" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="543.49,418.45,533.7243,419.7268,539.2228,421.0559,537.8937,426.5544,543.49,418.45" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="13" x="408" y="488.1198">3.</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="104" x="373.3472" y="439.1131">Bonjour, je suis</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="184" x="333.3472" y="454.9124">'order-service', ma config ?</text></g><!--link ConfigServer to OrderSvc--><g id="link_ConfigServer_OrderSvc"><path d="M516,418.51 C493.89,428.75 470.68,444.04 458,466.05 C442.13,493.58 458.9044,524.6144 474.5544,545.7944 " fill="none" id="ConfigServer-to-OrderSvc" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="478.12,550.62,475.9886,541.0045,475.1486,546.5987,469.5545,545.7587,478.12,550.62" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="166" x="460.5" y="480.1198">4. Renvoie le contenu de</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="169" x="459" y="495.9191">'order-service.properties'</text></g><!--SRC=[ZPAzJiCm54PtFyKbIq1g8b6OEe04bLX0LCtQnJYtgTl4jlmJ2I4Ug3jla1V3ITgGX5AnNdy-Flxi2xl10a7bb0jYTbmegca1J1PA2XGsiUyvWYloAI6KMQbXZYNcKg4c9AMMlb634CohlQg-B3nnknANYNIQ8QG8PRNNt5Rxgm2egLUNg2Hy480rzzo0AfLpHYsN8bQwfbgE9kZM_Inrp4O6TSaPdin8dQ8-cVWaH2EpL6Hrxb6ADSyWyK7KZKyxQGU4ACfsDFF15ywqFF1CqDW2z40ZgGQrQ6T9oSRfWLwJVQqdTTBxTMr25Drr1StWEeQ5TCPtwmIkX93EvpoEDSgaRmwH6soTnl3CBUHeV45imr6RbKYFMvrksYRanxWvUa2SmKqCmOCKM_-I4zWY6CSz9HnTFPn0GGzWk0z6MfxQEsG6jp4iKPII8xGtiIYS_oM_kRrN30avzWLH_c_HGUldDLCFxOuuQ_dNJmk_0G00]--></g></svg></div></section><section class="chapter"><h3 id="c-t-client-le-r-le-du-bootstrap-properties" data-toc="c-t-client-le-r-le-du-bootstrap-properties">C&ocirc;t&eacute; Client : Le r&ocirc;le du <code class="code" id="z2giyk_78">bootstrap.properties</code></h3><p id="z2giyk_72">Ici se pose une question int&eacute;ressante : comment notre <code class="code" id="z2giyk_79">product-service</code> peut-il conna&icirc;tre l'adresse du Config Server, alors que cette adresse est elle-m&ecirc;me une information de configuration ? C'est le probl&egrave;me de l'&oelig;uf et de la poule.</p><p id="z2giyk_73">La solution de Spring Cloud est un m&eacute;canisme de d&eacute;marrage en deux temps, via un fichier sp&eacute;cial : <code class="code" id="z2giyk_80">bootstrap.properties</code> (ou <code class="code" id="z2giyk_81">bootstrap.yml</code>).</p><ol class="list _decimal" id="z2giyk_74" type="1"><li class="list__item" id="z2giyk_82"><p id="z2giyk_86">Au d&eacute;marrage, une application Spring Cloud cliente cherche d'abord un fichier <code class="code" id="z2giyk_87">bootstrap.properties</code>.</p></li><li class="list__item" id="z2giyk_83"><p id="z2giyk_88">Ce fichier est charg&eacute; <span class="control" id="z2giyk_89">avant</span> <code class="code" id="z2giyk_90">application.properties</code>. Il contient le strict minimum pour contacter le Config Server : le nom de l'application et l'URL du Config Server.</p></li><li class="list__item" id="z2giyk_84"><p id="z2giyk_91">Le service contacte le Config Server, r&eacute;cup&egrave;re sa configuration distante et la charge en m&eacute;moire.</p></li><li class="list__item" id="z2giyk_85"><p id="z2giyk_92">Seulement apr&egrave;s, le fichier <code class="code" id="z2giyk_93">application.properties</code> local est charg&eacute;. Ses propri&eacute;t&eacute;s peuvent surcharger celles re&ccedil;ues du serveur, ce qui est utile pour les tests locaux.</p></li></ol><aside class="prompt" data-type="warning" data-title="" id="z2giyk_75"><p><b id="z2giyk_94">D&eacute;pendance de Bootstrap Requise !</b> Depuis Spring Boot 2.4, le m&eacute;canisme de `bootstrap` n'est plus activ&eacute; par d&eacute;faut. Pour que le fichier <code class="code" id="z2giyk_95">bootstrap.properties</code> soit pris en compte, vous devez ajouter explicitement la d&eacute;pendance suivante au <code class="code" id="z2giyk_96">pom.xml</code> de vos services clients : <code class="code" id="z2giyk_97">&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt; &lt;/dependency&gt;</code></p></aside><p id="z2giyk_76">Exemple de fichier <code class="code" id="z2giyk_98">bootstrap.properties</code> pour <code class="code" id="z2giyk_99">product-service</code>:</p><div class="code-block" data-lang="properties">
# Nom de l'application, pour que le Config Server sache quel fichier chercher
spring.application.name=product-service

# URL du Config Server
spring.cloud.config.uri=http://localhost:8888
</div></section><section class="chapter"><h3 id="c-t-serveur-organisation-du-d-p-t-git" data-toc="c-t-serveur-organisation-du-d-p-t-git">C&ocirc;t&eacute; Serveur : Organisation du D&eacute;p&ocirc;t Git</h3><p id="z2giyk_100">Le Config Server est intelligent. Il sait quel fichier envoyer en se basant sur le <code class="code" id="z2giyk_105">spring.application.name</code> du client qui l'appelle.</p><p id="z2giyk_101">Une structure de d&eacute;p&ocirc;t de configuration typique pourrait ressembler &agrave; ceci :</p><div class="code-block" data-lang="none">
config-repo/
├── application.properties      # Propriétés communes à TOUS les services
├── product-service.properties  # Propriétés spécifiques à product-service
├── order-service.properties    # Propriétés spécifiques à order-service
└── eureka-server.properties    # On peut même gérer la config d'Eureka !
</div><ul class="list _bullet" id="z2giyk_103"><li class="list__item" id="z2giyk_106"><p id="z2giyk_108"><code class="code" id="z2giyk_109">application.properties</code>: Contiendrait les propri&eacute;t&eacute;s partag&eacute;es, comme <code class="code" id="z2giyk_110">eureka.client.serviceUrl.defaultZone</code>. Il est charg&eacute; en premier.</p></li><li class="list__item" id="z2giyk_107"><p id="z2giyk_111"><code class="code" id="z2giyk_112">{application-name}.properties</code>: Contiendrait les propri&eacute;t&eacute;s sp&eacute;cifiques au service, comme <code class="code" id="z2giyk_113">server.port</code>. Il est charg&eacute; apr&egrave;s <code class="code" id="z2giyk_114">application.properties</code> et peut surcharger les valeurs communes.</p></li></ul></section></section><section class="chapter"><h2 id="conclusion-de-la-partie" data-toc="conclusion-de-la-partie">Conclusion de la partie</h2><p id="z2giyk_115">Vous comprenez maintenant pourquoi la centralisation de la configuration est non seulement une bonne pratique, mais une n&eacute;cessit&eacute; dans une architecture microservices. Vous avez d&eacute;couvert le pattern de <span class="control" id="z2giyk_121">Configuration Externalis&eacute;e</span> et son impl&eacute;mentation robuste avec <span class="control" id="z2giyk_122">Spring Cloud Config Server</span>.</p><p id="z2giyk_116">Vous avez appris l'architecture cl&eacute; bas&eacute;e sur un <span class="control" id="z2giyk_123">d&eacute;p&ocirc;t Git</span> comme source de v&eacute;rit&eacute;, un <span class="control" id="z2giyk_124">Config Server</span> comme interm&eacute;diaire, et des <span class="control" id="z2giyk_125">clients</span> qui r&eacute;cup&egrave;rent leur configuration au d&eacute;marrage via le fichier <code class="code" id="z2giyk_126">bootstrap.properties</code>.</p><p id="z2giyk_117">Cette approche nous apporte :</p><ul class="list _bullet" id="z2giyk_118"><li class="list__item" id="z2giyk_127"><p id="z2giyk_131"><span class="control" id="z2giyk_132">Centralisation :</span> Un seul endroit pour g&eacute;rer toute la configuration.</p></li><li class="list__item" id="z2giyk_128"><p id="z2giyk_133"><span class="control" id="z2giyk_134">S&eacute;curit&eacute; :</span> Les informations sensibles sont hors du code source.</p></li><li class="list__item" id="z2giyk_129"><p id="z2giyk_135"><span class="control" id="z2giyk_136">Consistance :</span> Tous les services partagent la m&ecirc;me source de v&eacute;rit&eacute;.</p></li><li class="list__item" id="z2giyk_130"><p id="z2giyk_137"><span class="control" id="z2giyk_138">Audit et Versioning :</span> Gr&acirc;ce &agrave; Git, chaque changement est trac&eacute;.</p></li></ul><p id="z2giyk_119">La th&eacute;orie est pos&eacute;e. Dans le TP suivant, nous allons mettre les mains dans le cambouis : cr&eacute;er notre d&eacute;p&ocirc;t Git de configuration, lancer notre propre Config Server, et transformer nos microservices en clients pour qu'ils abandonnent leurs fichiers <code class="code" id="z2giyk_139">application.properties</code> locaux au profit de cette nouvelle source centralis&eacute;e.</p></section><section class="chapter"><h2 id="auto-valuation" data-toc="auto-valuation">Auto-&eacute;valuation</h2><p id="z2giyk_140">Prenez un moment pour r&eacute;pondre &agrave; ces questions. Les corrections se trouvent &agrave; la toute fin du support de cours.</p><ol class="list _decimal" id="z2giyk_141" type="1"><li class="list__item" id="z2giyk_142"><p id="z2giyk_147"><span class="control" id="z2giyk_148">(Question ouverte)</span> Quels sont les deux principaux avantages &agrave; utiliser Git comme backend pour un Config Server, par rapport &agrave; un simple dossier sur le serveur ?</p></li><li class="list__item" id="z2giyk_143"><p id="z2giyk_149"><span class="control" id="z2giyk_151">(QCM)</span> Dans une application cliente du Config Server, quel fichier est lu en premier au d&eacute;marrage ?</p><ul class="list _bullet" id="z2giyk_150"><li class="list__item" id="z2giyk_152"><p id="z2giyk_156">A) <code class="code" id="z2giyk_157">application.properties</code></p></li><li class="list__item" id="z2giyk_153"><p id="z2giyk_158">B) <code class="code" id="z2giyk_159">config.properties</code></p></li><li class="list__item" id="z2giyk_154"><p id="z2giyk_160">C) <code class="code" id="z2giyk_161">pom.xml</code></p></li><li class="list__item" id="z2giyk_155"><p id="z2giyk_162">D) <code class="code" id="z2giyk_163">bootstrap.properties</code></p></li></ul></li><li class="list__item" id="z2giyk_144"><p id="z2giyk_164"><span class="control" id="z2giyk_166">(QCM)</span> Quelle d&eacute;pendance est n&eacute;cessaire dans les microservices clients pour que le <code class="code" id="z2giyk_167">bootstrap.properties</code> soit pris en compte (avec Spring Boot 2.4+)?</p><ul class="list _bullet" id="z2giyk_165"><li class="list__item" id="z2giyk_168"><p id="z2giyk_172">A) <code class="code" id="z2giyk_173">spring-cloud-starter-config</code></p></li><li class="list__item" id="z2giyk_169"><p id="z2giyk_174">B) <code class="code" id="z2giyk_175">spring-cloud-starter-bootstrap</code></p></li><li class="list__item" id="z2giyk_170"><p id="z2giyk_176">C) <code class="code" id="z2giyk_177">spring-boot-starter-web</code></p></li><li class="list__item" id="z2giyk_171"><p id="z2giyk_178">D) <code class="code" id="z2giyk_179">spring-cloud-starter-git</code></p></li></ul></li><li class="list__item" id="z2giyk_145"><p id="z2giyk_180"><span class="control" id="z2giyk_181">(Question ouverte)</span> Un <code class="code" id="z2giyk_182">product-service</code> d&eacute;marre et contacte le Config Server. Le d&eacute;p&ocirc;t Git contient un fichier <code class="code" id="z2giyk_183">application.properties</code> avec <code class="code" id="z2giyk_184">logging.level.root=INFO</code> et un fichier <code class="code" id="z2giyk_185">product-service.properties</code> avec <code class="code" id="z2giyk_186">logging.level.root=DEBUG</code>. Quel niveau de log sera finalement appliqu&eacute; au <code class="code" id="z2giyk_187">product-service</code> et pourquoi ?</p></li><li class="list__item" id="z2giyk_146"><p id="z2giyk_188"><span class="control" id="z2giyk_190">(QCM)</span> Que se passe-t-il si le Config Server est inaccessible au moment o&ugrave; un microservice d&eacute;marre ?</p><ul class="list _bullet" id="z2giyk_189"><li class="list__item" id="z2giyk_191"><p id="z2giyk_195">A) Le service d&eacute;marre avec une configuration par d&eacute;faut.</p></li><li class="list__item" id="z2giyk_192"><p id="z2giyk_196">B) Le service utilise la derni&egrave;re configuration qu'il avait mise en cache.</p></li><li class="list__item" id="z2giyk_193"><p id="z2giyk_197">C) Le service ne parvient pas &agrave; d&eacute;marrer et s'arr&ecirc;te (comportement par d&eacute;faut &quot;fail-fast&quot;).</p></li><li class="list__item" id="z2giyk_194"><p id="z2giyk_198">D) Le service d&eacute;marre, mais ne peut pas contacter les autres services.</p></li></ul></li></ol></section><div class="last-modified">17 juillet 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="004-03-tp-4.html" class="navigation-links__prev">TP 4 : Le Dialogue s'installe - Cr&eacute;ation et Communication avec un second service</a><a href="005-01-tp-5.html" class="navigation-links__next">TP 5 : Un seul pour les gouverner tous - Mise en place de la Configuration Centralis&eacute;e</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>